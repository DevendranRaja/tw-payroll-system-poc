/*
 * MIT License
 *
 * Copyright (c) 2019 RÃ©mi Van Keisbelck
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
import { err, ok } from './Result';
import { just, nothing } from './Maybe';
import { List } from './List';
import { asError } from './Try';
/**
 * Decoder for a given type.
 */
export class Decoder {
    constructor(f) {
        this.f = f;
    }
    /**
     * Attempt to decode passed JSON string into a T
     * @param s the string to decode
     */
    decodeString(s) {
        try {
            const o = JSON.parse(s);
            return this.decodeValue(o);
        }
        catch (e) {
            return err(asError(e).message);
        }
    }
    /**
     * Attempt to decode a JS value into a T
     * @param o the value to decode
     */
    decodeValue(o) {
        return this.f(o);
    }
}
function stringifyForMsg(o, maxChars = 100) {
    if (o === null) {
        return 'null';
    }
    if (o === undefined) {
        return 'undefined';
    }
    try {
        const s = JSON.stringify(o);
        if (s.length > maxChars) {
            return s.substring(0, maxChars - 1);
        }
        else {
            return s;
        }
    }
    catch (e) {
        return o.toString();
    }
}
/**
 * Decoding primitives and utilities.
 */
export class Decode {
    // Data Structures
    /**
     * Decoder for null/undefined values
     * @param d the decoder to be used if the value is not null or undefined
     */
    static nullable(d) {
        return new Decoder((o) => {
            if (o === null || o === undefined) {
                return ok(nothing);
            }
            else {
                return d.decodeValue(o).map(just);
            }
        });
    }
    /**
     * Decoder for nullable types
     * @param d the decoder to be used if the value is not null
     */
    static orNull(d) {
        return this.map((v) => v.map((v) => v).withDefault(null), this.nullable(d));
    }
    /**
     * Decoder for lists
     * @param d the decoder for elements in the list
     */
    static list(d) {
        return Decode.map((a) => List.fromArray(a), Decode.array(d));
    }
    /**
     * Decoder for arrays
     * @param d the decoder for elements in the array
     */
    static array(d) {
        return new Decoder((o) => {
            if (o instanceof Array) {
                const a = o;
                const res = [];
                for (let i = 0; i < a.length; i++) {
                    const r = d.decodeValue(a[i]);
                    switch (r.tag) {
                        case 'Ok':
                            res.push(r.value);
                            break;
                        case 'Err':
                            return err(`could not convert element at index ${i} of ${stringifyForMsg(o)} : ${r.err}`);
                    }
                }
                return ok(res);
            }
            else {
                return err(`value is not an array : ${stringifyForMsg(o)}`);
            }
        });
    }
    // Object Primitives
    /**
     * Decoder for object fields
     * @param key the name of the field
     * @param d the decoder for the field's value
     */
    static field(key, d) {
        return Decode.at([key], d);
    }
    /**
     * Decoder for optinal object fields
     * @param key the name of the optinal field
     * @param d the decoder for the field's value
     */
    static optionalField(key, d) {
        return Decode.andThen((value) => value
            .map((v) => new Decoder(() => d.decodeValue(v)))
            .withDefault(Decode.succeed(undefined)), Decode.maybe(Decode.field(key, Decode.value)));
    }
    /**
     * Decoder for navigable object properties
     * @param keys a list of fields to navigate
     * @param d the decoder for the leaf value
     */
    static at(keys, d) {
        function isUndef(x) {
            return x === null || x === undefined;
        }
        return new Decoder((o) => {
            let v = o;
            const path = [];
            function pathToStr() {
                return `[${path.join(',')}]`;
            }
            for (let i = 0; i < keys.length; i++) {
                if (isUndef(v)) {
                    return err(`path not found ${pathToStr()} on ${stringifyForMsg(o)}`);
                }
                const key = keys[i];
                path.push(key);
                if (v.hasOwnProperty(key)) {
                    v = v[key];
                }
                else {
                    return err(`path not found ${pathToStr()} on ${stringifyForMsg(o)}`);
                }
            }
            const r = d.decodeValue(v);
            switch (r.tag) {
                case 'Ok':
                    return r;
                case 'Err':
                    return err(`ran into decoder error at ${pathToStr()} : ${r.err}`);
            }
        });
    }
    // Inconsistent Structure
    /**
     * Decoder for optional values : turns decoding failures into maybes.
     * @param d the decoder to be used
     */
    static maybe(d) {
        return new Decoder((o) => {
            const v = d.decodeValue(o);
            switch (v.tag) {
                case 'Ok':
                    return ok(just(v.value));
                case 'Err':
                    return ok(nothing);
            }
        });
    }
    /**
     * Tries passed decoders sequentially, and fails if no decoder succeeds
     * @param ds an array of Decoders to try, one after the othen
     */
    static oneOf(ds) {
        return new Decoder((o) => {
            for (let i = 0; i < ds.length; i++) {
                const r = ds[i].decodeValue(o);
                switch (r.tag) {
                    case 'Ok':
                        return r;
                    case 'Err':
                        break;
                }
            }
            return err(`ran out of decoders for ${stringifyForMsg(o)}`);
        });
    }
    // Mapping
    /**
     * Map a decoder
     * @param f the mapping function
     * @param d the decoder to use
     */
    static map(f, d) {
        return new Decoder((o) => {
            return d.decodeValue(o).map(f);
        });
    }
    static map2(f, d1, d2) {
        return Decode.andThen((t1) => Decode.andThen((t2) => {
            const t3 = f(t1, t2);
            return Decode.succeed(t3);
        }, d2), d1);
    }
    static map3(f, d1, d2, d3) {
        return Decode.andThen((t1) => Decode.map2((t2, t3) => {
            return f(t1, t2, t3);
        }, d2, d3), d1);
    }
    static map4(f, d1, d2, d3, d4) {
        return Decode.andThen((t1) => Decode.map3((t2, t3, t4) => {
            return f(t1, t2, t3, t4);
        }, d2, d3, d4), d1);
    }
    static map5(f, d1, d2, d3, d4, d5) {
        return Decode.andThen((t1) => Decode.map4((t2, t3, t4, t5) => {
            return f(t1, t2, t3, t4, t5);
        }, d2, d3, d4, d5), d1);
    }
    static map6(f, d1, d2, d3, d4, d5, d6) {
        return Decode.andThen((t1) => Decode.map5((t2, t3, t4, t5, t6) => {
            return f(t1, t2, t3, t4, t5, t6);
        }, d2, d3, d4, d5, d6), d1);
    }
    static map7(f, d1, d2, d3, d4, d5, d6, d7) {
        return Decode.andThen((t1) => Decode.map6((t2, t3, t4, t5, t6, t7) => {
            return f(t1, t2, t3, t4, t5, t6, t7);
        }, d2, d3, d4, d5, d6, d7), d1);
    }
    static map8(f, d1, d2, d3, d4, d5, d6, d7, d8) {
        return Decode.andThen((t1) => Decode.map7((t2, t3, t4, t5, t6, t7, t8) => {
            return f(t1, t2, t3, t4, t5, t6, t7, t8);
        }, d2, d3, d4, d5, d6, d7, d8), d1);
    }
    /**
     * Decoder for big objects, where map8() is not enough.
     * @param dobject an object with decoders
     */
    static mapObject(dobject) {
        const keys = Object.keys(dobject);
        return new Decoder((value) => keys.reduce((acc, key) => {
            const propertyDecoder = getProperty(dobject, key);
            const v = propertyDecoder.decodeValue(value);
            return v.andThen((v) => acc.map((acc) => {
                acc[key] = v;
                return acc;
            }));
        }, ok({})));
    }
    /**
     * Convenience, map decoder object to another decoder object
     * @param decoders an object with decoders
     * @param fun the mapper function
     */
    static mapFields(decoders, fun) {
        const keys = Object.keys(decoders);
        const partial = keys.reduce((acc, key) => {
            const propertyDecoder = getProperty(decoders, key);
            const [key2, propertyDecoder2] = fun(key, propertyDecoder);
            acc[key2] = propertyDecoder2;
            return acc;
        }, {});
        return partial;
    }
    /**
     * Convenience, map docoders to required field decoders
     * @param decoders an object with decoders
     */
    static mapRequiredFields(decoders) {
        return this.mapFields(decoders, (k, d) => [k, Decode.field(k, d)]);
    }
    /**
     * Convenience, map decoders to optional field decoders
     * @param decoders an object with decoders
     */
    static mapOptionalFields(decoders) {
        const mapper = (k, d) => [
            k,
            Decode.optionalField(k, d),
        ];
        return this.mapFields(decoders, mapper);
    }
    /**
     * Decoder for fixed-length tuples.
     * @param decoders an array with decoders
     */
    static mapTuple(decoders) {
        return Decode.map((v) => Object.values(v), this.mapObject(this.mapRequiredFields(decoders)));
    }
    // Fancy Decoding
    /**
     * Decoder for recursive data structures
     * @param f a no-arg function that yields a decoder
     */
    static lazy(f) {
        return new Decoder((o) => {
            return f().decodeValue(o);
        });
    }
    /**
     * Decoder for null
     * @param t the result to yield in case the decoded value is null
     */
    static null(t) {
        return new Decoder((o) => {
            if (o === null) {
                return ok(t);
            }
            else {
                return err(`expected null for ${stringifyForMsg(o)}`);
            }
        });
    }
    /**
     * Decoder that always succeed
     * @param t the value to yield
     */
    static succeed(t) {
        return new Decoder(() => {
            return ok(t);
        });
    }
    /**
     * Decoder that fails
     * @param msg the message to use in the resulting Err
     */
    static fail(msg) {
        return new Decoder(() => {
            return err(msg);
        });
    }
    /**
     * Chain decoders
     * @param f the function to apply if the first decoder has succeeded
     * @param d the first decoder to use
     */
    static andThen(f, d) {
        return new Decoder((o) => {
            const r = d.decodeValue(o);
            switch (r.tag) {
                case 'Ok':
                    const t1 = r.value;
                    const d2 = f(t1);
                    return d2.decodeValue(o);
                case 'Err':
                    return err(r.err);
            }
        });
    }
}
// Primitives
/**
 * string decoder
 */
Decode.str = new Decoder((o) => {
    if (o !== null && o !== undefined && typeof o === 'string') {
        return ok(o);
    }
    else {
        return err(`value is not a string : ${stringifyForMsg(o)}`);
    }
});
/**
 * boolean decoder
 */
Decode.bool = new Decoder((o) => {
    if (o !== null && o !== undefined && typeof o === 'boolean') {
        return ok(o);
    }
    else {
        return err(`value is not a boolean : ${stringifyForMsg(o)}`);
    }
});
/**
 * number decoder
 */
Decode.num = new Decoder((o) => {
    if (o !== null && o !== undefined && typeof o === 'number') {
        return ok(o);
    }
    else {
        return err(`value is not a number : ${stringifyForMsg(o)}`);
    }
});
/**
 * Decoder for any value
 */
Decode.value = new Decoder((o) => ok(o));
function getProperty(o, key) {
    return o[key];
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVjb2RlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1RlYUN1cC9EZWNvZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBdUJHO0FBRUgsT0FBTyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQVUsTUFBTSxVQUFVLENBQUM7QUFDM0MsT0FBTyxFQUFFLElBQUksRUFBUyxPQUFPLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDL0MsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUM5QixPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sT0FBTyxDQUFDO0FBRWhDOztHQUVHO0FBQ0gsTUFBTSxPQUFPLE9BQU87SUFHbEIsWUFBWSxDQUFnQztRQUMxQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNiLENBQUM7SUFFRDs7O09BR0c7SUFDSCxZQUFZLENBQUMsQ0FBUztRQUNwQixJQUFJLENBQUM7WUFDSCxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3QixDQUFDO1FBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztZQUNYLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNqQyxDQUFDO0lBQ0gsQ0FBQztJQUVEOzs7T0FHRztJQUNILFdBQVcsQ0FBQyxDQUFNO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuQixDQUFDO0NBQ0Y7QUFFRCxTQUFTLGVBQWUsQ0FBQyxDQUFNLEVBQUUsV0FBbUIsR0FBRztJQUNyRCxJQUFJLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQztRQUNmLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFDRCxJQUFJLENB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LElBQUksT0FBTyxDQUFDLEtBQUssUUFBUSxFQUFFLENBQUM7UUFDM0QsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDZixDQUFDO1NBQU0sQ0FBQztRQUNOLE9BQU8sR0FBRyxDQUFDLDJCQUEyQixlQUFlLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzlELENBQUM7QUFDSCxDQUFDLENBQUMsQ0FBQztBQTBaSDs7R0FFRztBQUNJLFlBQUssR0FBaUIsSUFBSSxPQUFPLENBQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBd0Q5RCxTQUFTLFdBQVcsQ0FBdUIsQ0FBSSxFQUFFLEdBQU07SUFDckQsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBNSVQgTGljZW5zZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxOSBSw6ltaSBWYW4gS2Vpc2JlbGNrXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuICogY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG4gKiBTT0ZUV0FSRS5cbiAqXG4gKi9cblxuaW1wb3J0IHsgZXJyLCBvaywgUmVzdWx0IH0gZnJvbSAnLi9SZXN1bHQnO1xuaW1wb3J0IHsganVzdCwgTWF5YmUsIG5vdGhpbmcgfSBmcm9tICcuL01heWJlJztcbmltcG9ydCB7IExpc3QgfSBmcm9tICcuL0xpc3QnO1xuaW1wb3J0IHsgYXNFcnJvciB9IGZyb20gJy4vVHJ5JztcblxuLyoqXG4gKiBEZWNvZGVyIGZvciBhIGdpdmVuIHR5cGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWNvZGVyPFQ+IHtcbiAgcHJpdmF0ZSByZWFkb25seSBmOiAobzogYW55KSA9PiBSZXN1bHQ8c3RyaW5nLCBUPjtcblxuICBjb25zdHJ1Y3RvcihmOiAobzogYW55KSA9PiBSZXN1bHQ8c3RyaW5nLCBUPikge1xuICAgIHRoaXMuZiA9IGY7XG4gIH1cblxuICAvKipcbiAgICogQXR0ZW1wdCB0byBkZWNvZGUgcGFzc2VkIEpTT04gc3RyaW5nIGludG8gYSBUXG4gICAqIEBwYXJhbSBzIHRoZSBzdHJpbmcgdG8gZGVjb2RlXG4gICAqL1xuICBkZWNvZGVTdHJpbmcoczogc3RyaW5nKTogUmVzdWx0PHN0cmluZywgVD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvID0gSlNPTi5wYXJzZShzKTtcbiAgICAgIHJldHVybiB0aGlzLmRlY29kZVZhbHVlKG8pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBlcnIoYXNFcnJvcihlKS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXR0ZW1wdCB0byBkZWNvZGUgYSBKUyB2YWx1ZSBpbnRvIGEgVFxuICAgKiBAcGFyYW0gbyB0aGUgdmFsdWUgdG8gZGVjb2RlXG4gICAqL1xuICBkZWNvZGVWYWx1ZShvOiBhbnkpOiBSZXN1bHQ8c3RyaW5nLCBUPiB7XG4gICAgcmV0dXJuIHRoaXMuZihvKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlGb3JNc2cobzogYW55LCBtYXhDaGFyczogbnVtYmVyID0gMTAwKTogc3RyaW5nIHtcbiAgaWYgKG8gPT09IG51bGwpIHtcbiAgICByZXR1cm4gJ251bGwnO1xuICB9XG4gIGlmIChvID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBzID0gSlNPTi5zdHJpbmdpZnkobyk7XG4gICAgaWYgKHMubGVuZ3RoID4gbWF4Q2hhcnMpIHtcbiAgICAgIHJldHVybiBzLnN1YnN0cmluZygwLCBtYXhDaGFycyAtIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcztcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gby50b1N0cmluZygpO1xuICB9XG59XG5cbi8qKlxuICogRGVjb2RpbmcgcHJpbWl0aXZlcyBhbmQgdXRpbGl0aWVzLlxuICovXG5leHBvcnQgY2xhc3MgRGVjb2RlIHtcbiAgLy8gUHJpbWl0aXZlc1xuXG4gIC8qKlxuICAgKiBzdHJpbmcgZGVjb2RlclxuICAgKi9cbiAgc3RhdGljIHN0cjogRGVjb2RlcjxzdHJpbmc+ID0gbmV3IERlY29kZXI8c3RyaW5nPigobzogYW55KSA9PiB7XG4gICAgaWYgKG8gIT09IG51bGwgJiYgbyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIG9rKG8pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZXJyKGB2YWx1ZSBpcyBub3QgYSBzdHJpbmcgOiAke3N0cmluZ2lmeUZvck1zZyhvKX1gKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBib29sZWFuIGRlY29kZXJcbiAgICovXG4gIHN0YXRpYyBib29sOiBEZWNvZGVyPGJvb2xlYW4+ID0gbmV3IERlY29kZXI8Ym9vbGVhbj4oKG86IGFueSkgPT4ge1xuICAgIGlmIChvICE9PSBudWxsICYmIG8gIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICByZXR1cm4gb2sobyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlcnIoYHZhbHVlIGlzIG5vdCBhIGJvb2xlYW4gOiAke3N0cmluZ2lmeUZvck1zZyhvKX1gKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBudW1iZXIgZGVjb2RlclxuICAgKi9cbiAgc3RhdGljIG51bTogRGVjb2RlcjxudW1iZXI+ID0gbmV3IERlY29kZXI8bnVtYmVyPigobzogYW55KSA9PiB7XG4gICAgaWYgKG8gIT09IG51bGwgJiYgbyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIG9rKG8pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZXJyKGB2YWx1ZSBpcyBub3QgYSBudW1iZXIgOiAke3N0cmluZ2lmeUZvck1zZyhvKX1gKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIERhdGEgU3RydWN0dXJlc1xuXG4gIC8qKlxuICAgKiBEZWNvZGVyIGZvciBudWxsL3VuZGVmaW5lZCB2YWx1ZXNcbiAgICogQHBhcmFtIGQgdGhlIGRlY29kZXIgdG8gYmUgdXNlZCBpZiB0aGUgdmFsdWUgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAqL1xuICBzdGF0aWMgbnVsbGFibGU8VD4oZDogRGVjb2RlcjxUPik6IERlY29kZXI8TWF5YmU8VD4+IHtcbiAgICByZXR1cm4gbmV3IERlY29kZXI8TWF5YmU8VD4+KChvOiBhbnkpID0+IHtcbiAgICAgIGlmIChvID09PSBudWxsIHx8IG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gb2sobm90aGluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZC5kZWNvZGVWYWx1ZShvKS5tYXAoanVzdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlciBmb3IgbnVsbGFibGUgdHlwZXNcbiAgICogQHBhcmFtIGQgdGhlIGRlY29kZXIgdG8gYmUgdXNlZCBpZiB0aGUgdmFsdWUgaXMgbm90IG51bGxcbiAgICovXG4gIHN0YXRpYyBvck51bGw8VD4oZDogRGVjb2RlcjxUPik6IERlY29kZXI8VCB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5tYXAoKHYpID0+IHYubWFwPFQgfCBudWxsPigodikgPT4gdikud2l0aERlZmF1bHQobnVsbCksIHRoaXMubnVsbGFibGUoZCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29kZXIgZm9yIGxpc3RzXG4gICAqIEBwYXJhbSBkIHRoZSBkZWNvZGVyIGZvciBlbGVtZW50cyBpbiB0aGUgbGlzdFxuICAgKi9cbiAgc3RhdGljIGxpc3Q8VD4oZDogRGVjb2RlcjxUPik6IERlY29kZXI8TGlzdDxUPj4ge1xuICAgIHJldHVybiBEZWNvZGUubWFwKChhOiBBcnJheTxUPikgPT4gTGlzdC5mcm9tQXJyYXkoYSksIERlY29kZS5hcnJheShkKSk7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlciBmb3IgYXJyYXlzXG4gICAqIEBwYXJhbSBkIHRoZSBkZWNvZGVyIGZvciBlbGVtZW50cyBpbiB0aGUgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhcnJheTxUPihkOiBEZWNvZGVyPFQ+KTogRGVjb2RlcjxBcnJheTxUPj4ge1xuICAgIHJldHVybiBuZXcgRGVjb2RlcjxBcnJheTxUPj4oKG86IGFueSkgPT4ge1xuICAgICAgaWYgKG8gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICBjb25zdCBhOiBBcnJheTxhbnk+ID0gbyBhcyBBcnJheTxhbnk+O1xuICAgICAgICBjb25zdCByZXM6IEFycmF5PFQ+ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHI6IFJlc3VsdDxzdHJpbmcsIFQ+ID0gZC5kZWNvZGVWYWx1ZShhW2ldKTtcbiAgICAgICAgICBzd2l0Y2ggKHIudGFnKSB7XG4gICAgICAgICAgICBjYXNlICdPayc6XG4gICAgICAgICAgICAgIHJlcy5wdXNoKHIudmFsdWUpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0Vycic6XG4gICAgICAgICAgICAgIHJldHVybiBlcnIoYGNvdWxkIG5vdCBjb252ZXJ0IGVsZW1lbnQgYXQgaW5kZXggJHtpfSBvZiAke3N0cmluZ2lmeUZvck1zZyhvKX0gOiAke3IuZXJyfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2socmVzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBlcnIoYHZhbHVlIGlzIG5vdCBhbiBhcnJheSA6ICR7c3RyaW5naWZ5Rm9yTXNnKG8pfWApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gT2JqZWN0IFByaW1pdGl2ZXNcblxuICAvKipcbiAgICogRGVjb2RlciBmb3Igb2JqZWN0IGZpZWxkc1xuICAgKiBAcGFyYW0ga2V5IHRoZSBuYW1lIG9mIHRoZSBmaWVsZFxuICAgKiBAcGFyYW0gZCB0aGUgZGVjb2RlciBmb3IgdGhlIGZpZWxkJ3MgdmFsdWVcbiAgICovXG4gIHN0YXRpYyBmaWVsZDxUPihrZXk6IHN0cmluZywgZDogRGVjb2RlcjxUPik6IERlY29kZXI8VD4ge1xuICAgIHJldHVybiBEZWNvZGUuYXQoW2tleV0sIGQpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29kZXIgZm9yIG9wdGluYWwgb2JqZWN0IGZpZWxkc1xuICAgKiBAcGFyYW0ga2V5IHRoZSBuYW1lIG9mIHRoZSBvcHRpbmFsIGZpZWxkXG4gICAqIEBwYXJhbSBkIHRoZSBkZWNvZGVyIGZvciB0aGUgZmllbGQncyB2YWx1ZVxuICAgKi9cbiAgc3RhdGljIG9wdGlvbmFsRmllbGQ8VD4oa2V5OiBzdHJpbmcsIGQ6IERlY29kZXI8VD4pOiBEZWNvZGVyPFQgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gRGVjb2RlLmFuZFRoZW4oXG4gICAgICAodmFsdWUpID0+XG4gICAgICAgIHZhbHVlXG4gICAgICAgICAgLm1hcDxEZWNvZGVyPFQgfCB1bmRlZmluZWQ+PihcbiAgICAgICAgICAgICh2KSA9PiBuZXcgRGVjb2RlcjxUPigoKSA9PiBkLmRlY29kZVZhbHVlKHYpKSxcbiAgICAgICAgICApXG4gICAgICAgICAgLndpdGhEZWZhdWx0KERlY29kZS5zdWNjZWVkKHVuZGVmaW5lZCkpLFxuICAgICAgRGVjb2RlLm1heWJlKERlY29kZS5maWVsZChrZXksIERlY29kZS52YWx1ZSkpLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlciBmb3IgbmF2aWdhYmxlIG9iamVjdCBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSBrZXlzIGEgbGlzdCBvZiBmaWVsZHMgdG8gbmF2aWdhdGVcbiAgICogQHBhcmFtIGQgdGhlIGRlY29kZXIgZm9yIHRoZSBsZWFmIHZhbHVlXG4gICAqL1xuICBzdGF0aWMgYXQ8VD4oa2V5czogUmVhZG9ubHlBcnJheTxzdHJpbmc+LCBkOiBEZWNvZGVyPFQ+KTogRGVjb2RlcjxUPiB7XG4gICAgZnVuY3Rpb24gaXNVbmRlZih4OiBhbnkpIHtcbiAgICAgIHJldHVybiB4ID09PSBudWxsIHx8IHggPT09IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERlY29kZXI8VD4oKG86IGFueSkgPT4ge1xuICAgICAgbGV0IHY6IGFueSA9IG87XG4gICAgICBjb25zdCBwYXRoOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICBmdW5jdGlvbiBwYXRoVG9TdHIoKSB7XG4gICAgICAgIHJldHVybiBgWyR7cGF0aC5qb2luKCcsJyl9XWA7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaXNVbmRlZih2KSkge1xuICAgICAgICAgIHJldHVybiBlcnIoYHBhdGggbm90IGZvdW5kICR7cGF0aFRvU3RyKCl9IG9uICR7c3RyaW5naWZ5Rm9yTXNnKG8pfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICAgIHBhdGgucHVzaChrZXkpO1xuICAgICAgICBpZiAodi5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgdiA9IHZba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZXJyKGBwYXRoIG5vdCBmb3VuZCAke3BhdGhUb1N0cigpfSBvbiAke3N0cmluZ2lmeUZvck1zZyhvKX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCByID0gZC5kZWNvZGVWYWx1ZSh2KTtcbiAgICAgIHN3aXRjaCAoci50YWcpIHtcbiAgICAgICAgY2FzZSAnT2snOlxuICAgICAgICAgIHJldHVybiByO1xuICAgICAgICBjYXNlICdFcnInOlxuICAgICAgICAgIHJldHVybiBlcnIoYHJhbiBpbnRvIGRlY29kZXIgZXJyb3IgYXQgJHtwYXRoVG9TdHIoKX0gOiAke3IuZXJyfWApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gSW5jb25zaXN0ZW50IFN0cnVjdHVyZVxuXG4gIC8qKlxuICAgKiBEZWNvZGVyIGZvciBvcHRpb25hbCB2YWx1ZXMgOiB0dXJucyBkZWNvZGluZyBmYWlsdXJlcyBpbnRvIG1heWJlcy5cbiAgICogQHBhcmFtIGQgdGhlIGRlY29kZXIgdG8gYmUgdXNlZFxuICAgKi9cbiAgc3RhdGljIG1heWJlPFQ+KGQ6IERlY29kZXI8VD4pOiBEZWNvZGVyPE1heWJlPFQ+PiB7XG4gICAgcmV0dXJuIG5ldyBEZWNvZGVyPE1heWJlPFQ+PigobzogYW55KSA9PiB7XG4gICAgICBjb25zdCB2OiBSZXN1bHQ8c3RyaW5nLCBUPiA9IGQuZGVjb2RlVmFsdWUobyk7XG4gICAgICBzd2l0Y2ggKHYudGFnKSB7XG4gICAgICAgIGNhc2UgJ09rJzpcbiAgICAgICAgICByZXR1cm4gb2soanVzdCh2LnZhbHVlKSk7XG4gICAgICAgIGNhc2UgJ0Vycic6XG4gICAgICAgICAgcmV0dXJuIG9rKG5vdGhpbmcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWVzIHBhc3NlZCBkZWNvZGVycyBzZXF1ZW50aWFsbHksIGFuZCBmYWlscyBpZiBubyBkZWNvZGVyIHN1Y2NlZWRzXG4gICAqIEBwYXJhbSBkcyBhbiBhcnJheSBvZiBEZWNvZGVycyB0byB0cnksIG9uZSBhZnRlciB0aGUgb3RoZW5cbiAgICovXG4gIHN0YXRpYyBvbmVPZjxUPihkczogUmVhZG9ubHlBcnJheTxEZWNvZGVyPFQ+Pik6IERlY29kZXI8VD4ge1xuICAgIHJldHVybiBuZXcgRGVjb2RlcjxUPigobzogYW55KSA9PiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHI6IFJlc3VsdDxzdHJpbmcsIFQ+ID0gZHNbaV0uZGVjb2RlVmFsdWUobyk7XG4gICAgICAgIHN3aXRjaCAoci50YWcpIHtcbiAgICAgICAgICBjYXNlICdPayc6XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICBjYXNlICdFcnInOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBlcnIoYHJhbiBvdXQgb2YgZGVjb2RlcnMgZm9yICR7c3RyaW5naWZ5Rm9yTXNnKG8pfWApO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gTWFwcGluZ1xuXG4gIC8qKlxuICAgKiBNYXAgYSBkZWNvZGVyXG4gICAqIEBwYXJhbSBmIHRoZSBtYXBwaW5nIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSBkIHRoZSBkZWNvZGVyIHRvIHVzZVxuICAgKi9cbiAgc3RhdGljIG1hcDxUMSwgVDI+KGY6ICh0MTogVDEpID0+IFQyLCBkOiBEZWNvZGVyPFQxPik6IERlY29kZXI8VDI+IHtcbiAgICByZXR1cm4gbmV3IERlY29kZXI8VDI+KChvOiBhbnkpID0+IHtcbiAgICAgIHJldHVybiBkLmRlY29kZVZhbHVlKG8pLm1hcChmKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBtYXAyPFQxLCBUMiwgVDM+KGY6ICh0MTogVDEsIHQyOiBUMikgPT4gVDMsIGQxOiBEZWNvZGVyPFQxPiwgZDI6IERlY29kZXI8VDI+KTogRGVjb2RlcjxUMz4ge1xuICAgIHJldHVybiBEZWNvZGUuYW5kVGhlbihcbiAgICAgICh0MTogVDEpID0+XG4gICAgICAgIERlY29kZS5hbmRUaGVuKCh0MjogVDIpID0+IHtcbiAgICAgICAgICBjb25zdCB0MzogVDMgPSBmKHQxLCB0Mik7XG4gICAgICAgICAgcmV0dXJuIERlY29kZS5zdWNjZWVkKHQzKTtcbiAgICAgICAgfSwgZDIpLFxuICAgICAgZDEsXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBtYXAzPFQxLCBUMiwgVDMsIFQ0PihcbiAgICBmOiAodDE6IFQxLCB0MjogVDIsIHQzOiBUMykgPT4gVDQsXG4gICAgZDE6IERlY29kZXI8VDE+LFxuICAgIGQyOiBEZWNvZGVyPFQyPixcbiAgICBkMzogRGVjb2RlcjxUMz4sXG4gICk6IERlY29kZXI8VDQ+IHtcbiAgICByZXR1cm4gRGVjb2RlLmFuZFRoZW4oXG4gICAgICAodDE6IFQxKSA9PlxuICAgICAgICBEZWNvZGUubWFwMihcbiAgICAgICAgICAodDI6IFQyLCB0MzogVDMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmKHQxLCB0MiwgdDMpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZDIsXG4gICAgICAgICAgZDMsXG4gICAgICAgICksXG4gICAgICBkMSxcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIG1hcDQ8VDEsIFQyLCBUMywgVDQsIFQ1PihcbiAgICBmOiAodDE6IFQxLCB0MjogVDIsIHQzOiBUMywgdDQ6IFQ0KSA9PiBUNSxcbiAgICBkMTogRGVjb2RlcjxUMT4sXG4gICAgZDI6IERlY29kZXI8VDI+LFxuICAgIGQzOiBEZWNvZGVyPFQzPixcbiAgICBkNDogRGVjb2RlcjxUND4sXG4gICk6IERlY29kZXI8VDU+IHtcbiAgICByZXR1cm4gRGVjb2RlLmFuZFRoZW4oXG4gICAgICAodDE6IFQxKSA9PlxuICAgICAgICBEZWNvZGUubWFwMyhcbiAgICAgICAgICAodDI6IFQyLCB0MzogVDMsIHQ0OiBUNCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGYodDEsIHQyLCB0MywgdDQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZDIsXG4gICAgICAgICAgZDMsXG4gICAgICAgICAgZDQsXG4gICAgICAgICksXG4gICAgICBkMSxcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIG1hcDU8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNj4oXG4gICAgZjogKHQxOiBUMSwgdDI6IFQyLCB0MzogVDMsIHQ0OiBUNCwgdDU6IFQ1KSA9PiBUNixcbiAgICBkMTogRGVjb2RlcjxUMT4sXG4gICAgZDI6IERlY29kZXI8VDI+LFxuICAgIGQzOiBEZWNvZGVyPFQzPixcbiAgICBkNDogRGVjb2RlcjxUND4sXG4gICAgZDU6IERlY29kZXI8VDU+LFxuICApOiBEZWNvZGVyPFQ2PiB7XG4gICAgcmV0dXJuIERlY29kZS5hbmRUaGVuKFxuICAgICAgKHQxOiBUMSkgPT5cbiAgICAgICAgRGVjb2RlLm1hcDQoXG4gICAgICAgICAgKHQyOiBUMiwgdDM6IFQzLCB0NDogVDQsIHQ1OiBUNSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGYodDEsIHQyLCB0MywgdDQsIHQ1KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGQyLFxuICAgICAgICAgIGQzLFxuICAgICAgICAgIGQ0LFxuICAgICAgICAgIGQ1LFxuICAgICAgICApLFxuICAgICAgZDEsXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBtYXA2PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3PihcbiAgICBmOiAodDE6IFQxLCB0MjogVDIsIHQzOiBUMywgdDQ6IFQ0LCB0NTogVDUsIHQ2OiBUNikgPT4gVDcsXG4gICAgZDE6IERlY29kZXI8VDE+LFxuICAgIGQyOiBEZWNvZGVyPFQyPixcbiAgICBkMzogRGVjb2RlcjxUMz4sXG4gICAgZDQ6IERlY29kZXI8VDQ+LFxuICAgIGQ1OiBEZWNvZGVyPFQ1PixcbiAgICBkNjogRGVjb2RlcjxUNj4sXG4gICk6IERlY29kZXI8VDc+IHtcbiAgICByZXR1cm4gRGVjb2RlLmFuZFRoZW4oXG4gICAgICAodDE6IFQxKSA9PlxuICAgICAgICBEZWNvZGUubWFwNShcbiAgICAgICAgICAodDI6IFQyLCB0MzogVDMsIHQ0OiBUNCwgdDU6IFQ1LCB0NjogVDYpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmKHQxLCB0MiwgdDMsIHQ0LCB0NSwgdDYpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZDIsXG4gICAgICAgICAgZDMsXG4gICAgICAgICAgZDQsXG4gICAgICAgICAgZDUsXG4gICAgICAgICAgZDYsXG4gICAgICAgICksXG4gICAgICBkMSxcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIG1hcDc8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4PihcbiAgICBmOiAodDE6IFQxLCB0MjogVDIsIHQzOiBUMywgdDQ6IFQ0LCB0NTogVDUsIHQ2OiBUNiwgdDc6IFQ3KSA9PiBUOCxcbiAgICBkMTogRGVjb2RlcjxUMT4sXG4gICAgZDI6IERlY29kZXI8VDI+LFxuICAgIGQzOiBEZWNvZGVyPFQzPixcbiAgICBkNDogRGVjb2RlcjxUND4sXG4gICAgZDU6IERlY29kZXI8VDU+LFxuICAgIGQ2OiBEZWNvZGVyPFQ2PixcbiAgICBkNzogRGVjb2RlcjxUNz4sXG4gICk6IERlY29kZXI8VDg+IHtcbiAgICByZXR1cm4gRGVjb2RlLmFuZFRoZW4oXG4gICAgICAodDE6IFQxKSA9PlxuICAgICAgICBEZWNvZGUubWFwNihcbiAgICAgICAgICAodDI6IFQyLCB0MzogVDMsIHQ0OiBUNCwgdDU6IFQ1LCB0NjogVDYsIHQ3OiBUNykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGYodDEsIHQyLCB0MywgdDQsIHQ1LCB0NiwgdDcpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZDIsXG4gICAgICAgICAgZDMsXG4gICAgICAgICAgZDQsXG4gICAgICAgICAgZDUsXG4gICAgICAgICAgZDYsXG4gICAgICAgICAgZDcsXG4gICAgICAgICksXG4gICAgICBkMSxcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIG1hcDg8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOT4oXG4gICAgZjogKHQxOiBUMSwgdDI6IFQyLCB0MzogVDMsIHQ0OiBUNCwgdDU6IFQ1LCB0NjogVDYsIHQ3OiBUNywgdDg6IFQ4KSA9PiBUOSxcbiAgICBkMTogRGVjb2RlcjxUMT4sXG4gICAgZDI6IERlY29kZXI8VDI+LFxuICAgIGQzOiBEZWNvZGVyPFQzPixcbiAgICBkNDogRGVjb2RlcjxUND4sXG4gICAgZDU6IERlY29kZXI8VDU+LFxuICAgIGQ2OiBEZWNvZGVyPFQ2PixcbiAgICBkNzogRGVjb2RlcjxUNz4sXG4gICAgZDg6IERlY29kZXI8VDg+LFxuICApOiBEZWNvZGVyPFQ5PiB7XG4gICAgcmV0dXJuIERlY29kZS5hbmRUaGVuKFxuICAgICAgKHQxOiBUMSkgPT5cbiAgICAgICAgRGVjb2RlLm1hcDcoXG4gICAgICAgICAgKHQyOiBUMiwgdDM6IFQzLCB0NDogVDQsIHQ1OiBUNSwgdDY6IFQ2LCB0NzogVDcsIHQ4OiBUOCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGYodDEsIHQyLCB0MywgdDQsIHQ1LCB0NiwgdDcsIHQ4KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGQyLFxuICAgICAgICAgIGQzLFxuICAgICAgICAgIGQ0LFxuICAgICAgICAgIGQ1LFxuICAgICAgICAgIGQ2LFxuICAgICAgICAgIGQ3LFxuICAgICAgICAgIGQ4LFxuICAgICAgICApLFxuICAgICAgZDEsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvZGVyIGZvciBiaWcgb2JqZWN0cywgd2hlcmUgbWFwOCgpIGlzIG5vdCBlbm91Z2guXG4gICAqIEBwYXJhbSBkb2JqZWN0IGFuIG9iamVjdCB3aXRoIGRlY29kZXJzXG4gICAqL1xuICBzdGF0aWMgbWFwT2JqZWN0PFQ+KGRvYmplY3Q6IERlY29kZXJPYmplY3Q8VD4pOiBEZWNvZGVyPFQ+IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZG9iamVjdCkgYXMgQXJyYXk8a2V5b2YgdHlwZW9mIGRvYmplY3Q+O1xuICAgIHJldHVybiBuZXcgRGVjb2RlcigodmFsdWU6IGFueSkgPT5cbiAgICAgIGtleXMucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eURlY29kZXIgPSBnZXRQcm9wZXJ0eShkb2JqZWN0LCBrZXkpO1xuICAgICAgICBjb25zdCB2ID0gcHJvcGVydHlEZWNvZGVyLmRlY29kZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHYuYW5kVGhlbigodikgPT5cbiAgICAgICAgICBhY2MubWFwKChhY2MpID0+IHtcbiAgICAgICAgICAgIGFjY1trZXldID0gdjtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgICB9LCBvazxzdHJpbmcsIFQ+KHt9IGFzIFQpKSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlLCBtYXAgZGVjb2RlciBvYmplY3QgdG8gYW5vdGhlciBkZWNvZGVyIG9iamVjdFxuICAgKiBAcGFyYW0gZGVjb2RlcnMgYW4gb2JqZWN0IHdpdGggZGVjb2RlcnNcbiAgICogQHBhcmFtIGZ1biB0aGUgbWFwcGVyIGZ1bmN0aW9uXG4gICAqL1xuICBzdGF0aWMgbWFwRmllbGRzPFQsIFQyPihkZWNvZGVyczogRGVjb2Rlck9iamVjdDxUPiwgZnVuOiBEZWNvZGVyT2JqZWN0TWFwcGVyPFQsIFQyPik6IERlY29kZXJPYmplY3Q8VDI+IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZGVjb2RlcnMpIGFzIEFycmF5PGtleW9mIHR5cGVvZiBkZWNvZGVycz47XG4gICAgY29uc3QgcGFydGlhbDogUGFydGlhbDxEZWNvZGVyT2JqZWN0PFQyPj4gPSBrZXlzLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5RGVjb2RlciA9IGdldFByb3BlcnR5KGRlY29kZXJzLCBrZXkpO1xuICAgICAgY29uc3QgW2tleTIsIHByb3BlcnR5RGVjb2RlcjJdID0gZnVuKGtleSwgcHJvcGVydHlEZWNvZGVyKTtcbiAgICAgIGFjY1trZXkyXSA9IHByb3BlcnR5RGVjb2RlcjI7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9IGFzIFBhcnRpYWw8RGVjb2Rlck9iamVjdDxUMj4+KTtcbiAgICByZXR1cm4gcGFydGlhbCBhcyBEZWNvZGVyT2JqZWN0PFQyPjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSwgbWFwIGRvY29kZXJzIHRvIHJlcXVpcmVkIGZpZWxkIGRlY29kZXJzXG4gICAqIEBwYXJhbSBkZWNvZGVycyBhbiBvYmplY3Qgd2l0aCBkZWNvZGVyc1xuICAgKi9cbiAgc3RhdGljIG1hcFJlcXVpcmVkRmllbGRzPFQ+KGRlY29kZXJzOiBEZWNvZGVyT2JqZWN0PFQ+KTogRGVjb2Rlck9iamVjdDxUPiB7XG4gICAgcmV0dXJuIHRoaXMubWFwRmllbGRzKGRlY29kZXJzLCAoazoga2V5b2YgVCwgZDogRGVjb2RlcjxUW2tleW9mIFRdPikgPT4gW2ssIERlY29kZS5maWVsZChrIGFzIHN0cmluZywgZCldKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSwgbWFwIGRlY29kZXJzIHRvIG9wdGlvbmFsIGZpZWxkIGRlY29kZXJzXG4gICAqIEBwYXJhbSBkZWNvZGVycyBhbiBvYmplY3Qgd2l0aCBkZWNvZGVyc1xuICAgKi9cbiAgc3RhdGljIG1hcE9wdGlvbmFsRmllbGRzPFQ+KGRlY29kZXJzOiBEZWNvZGVyT2JqZWN0PFQ+KTogRGVjb2Rlck9iamVjdDxPcHRpb25hbEZpZWxkczxUPj4ge1xuICAgIGNvbnN0IG1hcHBlcjogRGVjb2Rlck9iamVjdE1hcHBlcjxULCBPcHRpb25hbEZpZWxkczxUPj4gPSAoazoga2V5b2YgVCwgZDogRGVjb2RlcjxUW2tleW9mIFRdPikgPT4gW1xuICAgICAgayxcbiAgICAgIERlY29kZS5vcHRpb25hbEZpZWxkKGsgYXMgc3RyaW5nLCBkKSxcbiAgICBdO1xuICAgIHJldHVybiB0aGlzLm1hcEZpZWxkcyhkZWNvZGVycywgbWFwcGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvZGVyIGZvciBmaXhlZC1sZW5ndGggdHVwbGVzLlxuICAgKiBAcGFyYW0gZGVjb2RlcnMgYW4gYXJyYXkgd2l0aCBkZWNvZGVyc1xuICAgKi9cbiAgc3RhdGljIG1hcFR1cGxlPFQgZXh0ZW5kcyBhbnlbXT4oZGVjb2RlcnM6IERlY29kZXJBcnJheTxUPik6IERlY29kZXI8VD4ge1xuICAgIHJldHVybiBEZWNvZGUubWFwKCh2KSA9PiBPYmplY3QudmFsdWVzKHYpIGFzIFQsIHRoaXMubWFwT2JqZWN0PFQ+KHRoaXMubWFwUmVxdWlyZWRGaWVsZHM8VD4oZGVjb2RlcnMpKSk7XG4gIH1cblxuICAvLyBGYW5jeSBEZWNvZGluZ1xuXG4gIC8qKlxuICAgKiBEZWNvZGVyIGZvciByZWN1cnNpdmUgZGF0YSBzdHJ1Y3R1cmVzXG4gICAqIEBwYXJhbSBmIGEgbm8tYXJnIGZ1bmN0aW9uIHRoYXQgeWllbGRzIGEgZGVjb2RlclxuICAgKi9cbiAgc3RhdGljIGxhenk8VD4oZjogKCkgPT4gRGVjb2RlcjxUPik6IERlY29kZXI8VD4ge1xuICAgIHJldHVybiBuZXcgRGVjb2RlcjxUPigobzogYW55KSA9PiB7XG4gICAgICByZXR1cm4gZigpLmRlY29kZVZhbHVlKG8pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29kZXIgZm9yIGFueSB2YWx1ZVxuICAgKi9cbiAgc3RhdGljIHZhbHVlOiBEZWNvZGVyPGFueT4gPSBuZXcgRGVjb2Rlcjxhbnk+KChvKSA9PiBvayhvKSk7XG5cbiAgLyoqXG4gICAqIERlY29kZXIgZm9yIG51bGxcbiAgICogQHBhcmFtIHQgdGhlIHJlc3VsdCB0byB5aWVsZCBpbiBjYXNlIHRoZSBkZWNvZGVkIHZhbHVlIGlzIG51bGxcbiAgICovXG4gIHN0YXRpYyBudWxsPFQ+KHQ6IFQpOiBEZWNvZGVyPFQ+IHtcbiAgICByZXR1cm4gbmV3IERlY29kZXI8VD4oKG86IGFueSkgPT4ge1xuICAgICAgaWYgKG8gPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG9rKHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGVycihgZXhwZWN0ZWQgbnVsbCBmb3IgJHtzdHJpbmdpZnlGb3JNc2cobyl9YCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlciB0aGF0IGFsd2F5cyBzdWNjZWVkXG4gICAqIEBwYXJhbSB0IHRoZSB2YWx1ZSB0byB5aWVsZFxuICAgKi9cbiAgc3RhdGljIHN1Y2NlZWQ8VD4odDogVCk6IERlY29kZXI8VD4ge1xuICAgIHJldHVybiBuZXcgRGVjb2RlcjxUPigoKSA9PiB7XG4gICAgICByZXR1cm4gb2sodCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlciB0aGF0IGZhaWxzXG4gICAqIEBwYXJhbSBtc2cgdGhlIG1lc3NhZ2UgdG8gdXNlIGluIHRoZSByZXN1bHRpbmcgRXJyXG4gICAqL1xuICBzdGF0aWMgZmFpbDxUPihtc2c6IHN0cmluZyk6IERlY29kZXI8VD4ge1xuICAgIHJldHVybiBuZXcgRGVjb2RlcjxUPigoKSA9PiB7XG4gICAgICByZXR1cm4gZXJyKG1zZyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hhaW4gZGVjb2RlcnNcbiAgICogQHBhcmFtIGYgdGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGlmIHRoZSBmaXJzdCBkZWNvZGVyIGhhcyBzdWNjZWVkZWRcbiAgICogQHBhcmFtIGQgdGhlIGZpcnN0IGRlY29kZXIgdG8gdXNlXG4gICAqL1xuICBzdGF0aWMgYW5kVGhlbjxUMSwgVDI+KGY6ICh0MTogVDEpID0+IERlY29kZXI8VDI+LCBkOiBEZWNvZGVyPFQxPik6IERlY29kZXI8VDI+IHtcbiAgICByZXR1cm4gbmV3IERlY29kZXI8VDI+KChvOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHI6IFJlc3VsdDxzdHJpbmcsIFQxPiA9IGQuZGVjb2RlVmFsdWUobyk7XG4gICAgICBzd2l0Y2ggKHIudGFnKSB7XG4gICAgICAgIGNhc2UgJ09rJzpcbiAgICAgICAgICBjb25zdCB0MTogVDEgPSByLnZhbHVlO1xuICAgICAgICAgIGNvbnN0IGQyOiBEZWNvZGVyPFQyPiA9IGYodDEpO1xuICAgICAgICAgIHJldHVybiBkMi5kZWNvZGVWYWx1ZShvKTtcbiAgICAgICAgY2FzZSAnRXJyJzpcbiAgICAgICAgICByZXR1cm4gZXJyKHIuZXJyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRQcm9wZXJ0eTxULCBLIGV4dGVuZHMga2V5b2YgVD4obzogVCwga2V5OiBLKTogVFtLXSB7XG4gIHJldHVybiBvW2tleV07XG59XG5cbmV4cG9ydCB0eXBlIERlY29kZXJPYmplY3Q8VD4gPSBSZXF1aXJlZDx7IFtQIGluIGtleW9mIFRdOiBEZWNvZGVyPFRbUF0+IH0+O1xuZXhwb3J0IHR5cGUgRGVjb2RlckFycmF5PEEgZXh0ZW5kcyBhbnlbXT4gPSBSZXF1aXJlZDxcbiAgeyBbUCBpbiBrZXlvZiBBXTogQVtQXSBleHRlbmRzIEFbbnVtYmVyXSA/IERlY29kZXI8QVtQXT4gOiBuZXZlciB9XG4+O1xuXG5leHBvcnQgdHlwZSBPcHRpb25hbEZpZWxkczxUPiA9IHtcbiAgW1AgaW4ga2V5b2YgVF06IFRbUF0gfCB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgdHlwZSBEZWNvZGVyT2JqZWN0TWFwcGVyPFQsIFQyPiA9IChrOiBrZXlvZiBULCBkOiBEZWNvZGVyPFRba2V5b2YgVF0+KSA9PiBba2V5b2YgVDIsIERlY29kZXI8VDJba2V5b2YgVDJdPl07XG4iXX0=