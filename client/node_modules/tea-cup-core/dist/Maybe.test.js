/*
 * MIT License
 *
 * Copyright (c) 2019 RÃ©mi Van Keisbelck
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
import { just, map2, nothing } from './Maybe';
import { expect, test, assert } from "vitest";
test('just with default', () => {
    expect(just(1).withDefault(2)).toBe(1);
});
test('just with default supply', () => {
    expect(just(1).withDefaultSupply(() => 2)).toBe(1);
});
test('nothing with default', () => {
    const m = nothing;
    expect(m.withDefault(1)).toBe(1);
});
test('nothing with default supply', () => {
    const m = nothing;
    expect(m.withDefaultSupply(() => 1)).toBe(1);
});
test('just or else', () => {
    expect(just(1).orElse(just(13))).toEqual(just(1));
});
test('nothing or else', () => {
    const m = nothing;
    expect(m.orElse(just(13))).toEqual(just(13));
    expect(m.orElse(nothing)).toEqual(nothing);
});
test('just or else supply', () => {
    expect(just(1).orElseSupply(() => just(13))).toEqual(just(1));
});
test('nothing or else supply', () => {
    const m = nothing;
    expect(m.orElseSupply(() => just(13))).toEqual(just(13));
    expect(m.orElseSupply(() => nothing)).toEqual(nothing);
});
test('just map', () => {
    expect(just(1)
        .map((i) => i + 1)
        .withDefault(10)).toBe(2);
    expect(just(1)
        .map((i) => i + 1)
        .map((i) => i + 2)
        .withDefault(10)).toBe(4);
});
test('nothing map', () => {
    const n = nothing;
    expect(n.map((i) => i + 1).withDefault(10)).toBe(10);
    expect(n
        .map((i) => i + 1)
        .map((i) => i + 2)
        .withDefault(10)).toBe(10);
});
test('switch nothing', () => {
    const m = nothing;
    switch (m.type) {
        case 'Just':
            assert.fail('expected nothing');
            break;
        case 'Nothing':
            // all good !
            break;
    }
});
test('switch just', () => {
    const m = just(1);
    switch (m.type) {
        case 'Just':
            expect(m.value).toBe(1);
            break;
        case 'Nothing':
            assert.fail('expected a Just');
            break;
    }
});
test('map2', () => {
    // both maybe are 'just', result is 'just'
    expect(map2(just(10), just(20), (a, b) => a + b)).toEqual(just(30));
    // one of the maybes is 'nothing', result is 'nothing'
    expect(map2(just(10), nothing, (a, b) => a + b)).toEqual(nothing);
    expect(map2(nothing, just(10), (a, b) => a + b)).toEqual(nothing);
});
test('To native', () => {
    const obj = { groovy: 'baby' };
    let mbObj = just(obj);
    expect(mbObj.toNative()).toEqual(obj);
    mbObj = nothing;
    expect(mbObj.toNative()).toEqual(undefined);
});
test('isJust', () => {
    const j = just('foo');
    expect(j.isJust()).toBe(true);
    expect(j.isNothing()).toBe(false);
});
test('isNothing', () => {
    const n = nothing;
    expect(n.isJust()).toBe(false);
    expect(n.isNothing()).toBe(true);
});
test('filter', () => {
    const m = just(123);
    expect(m.filter((x) => x === 123).isJust()).toBe(true);
    expect(m.filter((x) => x === 456).isJust()).toBe(false);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF5YmUudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9UZWFDdXAvTWF5YmUudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F1Qkc7QUFFSCxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBUyxPQUFPLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDckQsT0FBTyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBRTlDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7SUFDN0IsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFJLENBQUMsMEJBQTBCLEVBQUUsR0FBRyxFQUFFO0lBQ3BDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDckQsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFJLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO0lBQ2hDLE1BQU0sQ0FBQyxHQUFrQixPQUFPLENBQUM7SUFDakMsTUFBTSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFJLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO0lBQ3ZDLE1BQU0sQ0FBQyxHQUFrQixPQUFPLENBQUM7SUFDakMsTUFBTSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMs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SSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDbEUsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3BFLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUU7SUFDckIsTUFBTSxHQUFHLEdBQUcsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLENBQUM7SUFDL0IsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdEMsS0FBSyxHQUFHLE9BQU8sQ0FBQztJQUNoQixNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzlDLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7SUFDbEIsTUFBTSxDQUFDLEdBQWtCLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNyQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlCLE1BQU0sQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDcEMsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFJLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRTtJQUNyQixNQUFNLENBQUMsR0FBa0IsT0FBTyxDQUFDO0lBQ2pDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0IsTUFBTSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNuQyxDQUFDLENBQUMsQ0FBQztBQUVILElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFO0lBQ2xCLE1BQU0sQ0FBQyxHQUFrQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN2RCxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzFELENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIE1JVCBMaWNlbnNlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFLDqW1pIFZhbiBLZWlzYmVsY2tcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG4gKiBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbiAqIFNPRlRXQVJFLlxuICpcbiAqL1xuXG5pbXBvcnQgeyBqdXN0LCBtYXAyLCBNYXliZSwgbm90aGluZyB9IGZyb20gJy4vTWF5YmUnO1xuaW1wb3J0IHsgZXhwZWN0LCB0ZXN0LCBhc3NlcnQgfSBmcm9tIFwidml0ZXN0XCI7XG5cbnRlc3QoJ2p1c3Qgd2l0aCBkZWZhdWx0JywgKCkgPT4ge1xuICBleHBlY3QoanVzdCgxKS53aXRoRGVmYXVsdCgyKSkudG9CZSgxKTtcbn0pO1xuXG50ZXN0KCdqdXN0IHdpdGggZGVmYXVsdCBzdXBwbHknLCAoKSA9PiB7XG4gIGV4cGVjdChqdXN0KDEpLndpdGhEZWZhdWx0U3VwcGx5KCgpID0+IDIpKS50b0JlKDEpO1xufSk7XG5cbnRlc3QoJ25vdGhpbmcgd2l0aCBkZWZhdWx0JywgKCkgPT4ge1xuICBjb25zdCBtOiBNYXliZTxudW1iZXI+ID0gbm90aGluZztcbiAgZXhwZWN0KG0ud2l0aERlZmF1bHQoMSkpLnRvQmUoMSk7XG59KTtcblxudGVzdCgnbm90aGluZyB3aXRoIGRlZmF1bHQgc3VwcGx5JywgKCkgPT4ge1xuICBjb25zdCBtOiBNYXliZTxudW1iZXI+ID0gbm90aGluZztcbiAgZXhwZWN0KG0ud2l0aERlZmF1bHRTdXBwbHkoKCkgPT4gMSkpLnRvQmUoMSk7XG59KTtcblxudGVzdCgnanVzdCBvciBlbHNlJywgKCkgPT4ge1xuICBleHBlY3QoanVzdCgxKS5vckVsc2UoanVzdCgxMykpKS50b0VxdWFsKGp1c3QoMSkpO1xufSk7XG5cbnRlc3QoJ25vdGhpbmcgb3IgZWxzZScsICgpID0+IHtcbiAgY29uc3QgbTogTWF5YmU8bnVtYmVyPiA9IG5vdGhpbmc7XG4gIGV4cGVjdChtLm9yRWxzZShqdXN0KDEzKSkpLnRvRXF1YWwoanVzdCgxMykpO1xuICBleHBlY3QobS5vckVsc2Uobm90aGluZykpLnRvRXF1YWwobm90aGluZyk7XG59KTtcblxudGVzdCgnanVzdCBvciBlbHNlIHN1cHBseScsICgpID0+IHtcbiAgZXhwZWN0KGp1c3QoMSkub3JFbHNlU3VwcGx5KCgpID0+IGp1c3QoMTMpKSkudG9FcXVhbChqdXN0KDEpKTtcbn0pO1xuXG50ZXN0KCdub3RoaW5nIG9yIGVsc2Ugc3VwcGx5JywgKCkgPT4ge1xuICBjb25zdCBtOiBNYXliZTxudW1iZXI+ID0gbm90aGluZztcbiAgZXhwZWN0KG0ub3JFbHNlU3VwcGx5KCgpID0+IGp1c3QoMTMpKSkudG9FcXVhbChqdXN0KDEzKSk7XG4gIGV4cGVjdChtLm9yRWxzZVN1cHBseSgoKSA9PiBub3RoaW5nKSkudG9FcXVhbChub3RoaW5nKTtcbn0pO1xuXG50ZXN0KCdqdXN0IG1hcCcsICgpID0+IHtcbiAgZXhwZWN0KFxuICAgIGp1c3QoMSlcbiAgICAgIC5tYXAoKGkpID0+IGkgKyAxKVxuICAgICAgLndpdGhEZWZhdWx0KDEwKSxcbiAgKS50b0JlKDIpO1xuICBleHBlY3QoXG4gICAganVzdCgxKVxuICAgICAgLm1hcCgoaSkgPT4gaSArIDEpXG4gICAgICAubWFwKChpKSA9PiBpICsgMilcbiAgICAgIC53aXRoRGVmYXVsdCgxMCksXG4gICkudG9CZSg0KTtcbn0pO1xuXG50ZXN0KCdub3RoaW5nIG1hcCcsICgpID0+IHtcbiAgY29uc3QgbjogTWF5YmU8bnVtYmVyPiA9IG5vdGhpbmc7XG4gIGV4cGVjdChuLm1hcCgoaSkgPT4gaSArIDEpLndpdGhEZWZhdWx0KDEwKSkudG9CZSgxMCk7XG4gIGV4cGVjdChcbiAgICBuXG4gICAgICAubWFwKChpKSA9PiBpICsgMSlcbiAgICAgIC5tYXAoKGkpID0+IGkgKyAyKVxuICAgICAgLndpdGhEZWZhdWx0KDEwKSxcbiAgKS50b0JlKDEwKTtcbn0pO1xuXG50ZXN0KCdzd2l0Y2ggbm90aGluZycsICgpID0+IHtcbiAgY29uc3QgbTogTWF5YmU8bnVtYmVyPiA9IG5vdGhpbmc7XG4gIHN3aXRjaCAobS50eXBlKSB7XG4gICAgY2FzZSAnSnVzdCc6XG4gICAgICBhc3NlcnQuZmFpbCgnZXhwZWN0ZWQgbm90aGluZycpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnTm90aGluZyc6XG4gICAgICAvLyBhbGwgZ29vZCAhXG4gICAgICBicmVhaztcbiAgfVxufSk7XG5cbnRlc3QoJ3N3aXRjaCBqdXN0JywgKCkgPT4ge1xuICBjb25zdCBtOiBNYXliZTxudW1iZXI+ID0ganVzdCgxKTtcbiAgc3dpdGNoIChtLnR5cGUpIHtcbiAgICBjYXNlICdKdXN0JzpcbiAgICAgIGV4cGVjdChtLnZhbHVlKS50b0JlKDEpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnTm90aGluZyc6XG4gICAgICBhc3NlcnQuZmFpbCgnZXhwZWN0ZWQgYSBKdXN0Jyk7XG4gICAgICBicmVhaztcbiAgfVxufSk7XG5cbnRlc3QoJ21hcDInLCAoKSA9PiB7XG4gIC8vIGJvdGggbWF5YmUgYXJlICdqdXN0JywgcmVzdWx0IGlzICdqdXN0J1xuICBleHBlY3QobWFwMihqdXN0KDEwKSwganVzdCgyMCksIChhLCBiKSA9PiBhICsgYikpLnRvRXF1YWwoanVzdCgzMCkpO1xuICAvLyBvbmUgb2YgdGhlIG1heWJlcyBpcyAnbm90aGluZycsIHJlc3VsdCBpcyAnbm90aGluZydcbiAgZXhwZWN0KG1hcDIoanVzdCgxMCksIG5vdGhpbmcsIChhLCBiKSA9PiBhICsgYikpLnRvRXF1YWwobm90aGluZyk7XG4gIGV4cGVjdChtYXAyKG5vdGhpbmcsIGp1c3QoMTApLCAoYSwgYikgPT4gYSArIGIpKS50b0VxdWFsKG5vdGhpbmcpO1xufSk7XG5cbnRlc3QoJ1RvIG5hdGl2ZScsICgpID0+IHtcbiAgY29uc3Qgb2JqID0geyBncm9vdnk6ICdiYWJ5JyB9O1xuICBsZXQgbWJPYmogPSBqdXN0KG9iaik7XG4gIGV4cGVjdChtYk9iai50b05hdGl2ZSgpKS50b0VxdWFsKG9iaik7XG4gIG1iT2JqID0gbm90aGluZztcbiAgZXhwZWN0KG1iT2JqLnRvTmF0aXZlKCkpLnRvRXF1YWwodW5kZWZpbmVkKTtcbn0pO1xuXG50ZXN0KCdpc0p1c3QnLCAoKSA9PiB7XG4gIGNvbnN0IGo6IE1heWJlPHN0cmluZz4gPSBqdXN0KCdmb28nKTtcbiAgZXhwZWN0KGouaXNKdXN0KCkpLnRvQmUodHJ1ZSk7XG4gIGV4cGVjdChqLmlzTm90aGluZygpKS50b0JlKGZhbHNlKTtcbn0pO1xuXG50ZXN0KCdpc05vdGhpbmcnLCAoKSA9PiB7XG4gIGNvbnN0IG46IE1heWJlPHN0cmluZz4gPSBub3RoaW5nO1xuICBleHBlY3Qobi5pc0p1c3QoKSkudG9CZShmYWxzZSk7XG4gIGV4cGVjdChuLmlzTm90aGluZygpKS50b0JlKHRydWUpO1xufSk7XG5cbnRlc3QoJ2ZpbHRlcicsICgpID0+IHtcbiAgY29uc3QgbTogTWF5YmU8bnVtYmVyPiA9IGp1c3QoMTIzKTtcbiAgZXhwZWN0KG0uZmlsdGVyKCh4KSA9PiB4ID09PSAxMjMpLmlzSnVzdCgpKS50b0JlKHRydWUpO1xuICBleHBlY3QobS5maWx0ZXIoKHgpID0+IHggPT09IDQ1NikuaXNKdXN0KCkpLnRvQmUoZmFsc2UpO1xufSk7XG4iXX0=