/*
 * MIT License
 *
 * Copyright (c) 2019 RÃ©mi Van Keisbelck
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
import { Decode } from './Decode';
import { err, ok } from './Result';
import { just, nothing } from './Maybe';
const num = Decode.num;
const field = Decode.field;
import { describe, expect, test } from "vitest";
test('syntax error', () => {
    expect(num.decodeString(' { broken ')).toEqual(err('Expected property name or \'}\' in JSON at position 3'));
});
test('primitives', () => {
    expect(num.decodeValue(1)).toEqual(ok(1));
    expect(num.decodeValue('yeah')).toEqual(err('value is not a number : "yeah"'));
    expect(Decode.bool.decodeValue(true)).toEqual(ok(true));
    expect(Decode.bool.decodeValue('boom')).toEqual(err('value is not a boolean : "boom"'));
});
test('nullable', () => {
    const d = Decode.nullable(num);
    expect(d.decodeValue(1)).toEqual(ok(just(1)));
    expect(d.decodeValue(null)).toEqual(ok(nothing));
    expect(d.decodeValue('neh')).toEqual(err('value is not a number : "neh"'));
});
test('field', () => {
    const o = {
        age: 123,
    };
    expect(field('age', num).decodeValue(o)).toEqual(ok(123));
    expect(field('neh', num).decodeValue(o)).toEqual(err('path not found [neh] on {"age":123}'));
});
test('at', () => {
    const o = {
        foo: {
            bar: 'baz',
        },
    };
    expect(Decode.at(['foo', 'bar'], Decode.str).decodeValue(o)).toEqual(ok('baz'));
    expect(Decode.at(['foo', 'bar', 'nope'], Decode.str).decodeValue(o)).toEqual(err('path not found [foo,bar,nope] on {"foo":{"bar":"baz"}}'));
    expect(Decode.at(['x'], Decode.str).decodeValue(o)).toEqual(err('path not found [x] on {"foo":{"bar":"baz"}}'));
});
test('maybe', () => {
    const o = {
        name: 'tom',
        age: 42,
    };
    const maybe = Decode.maybe;
    expect(maybe(field('age', num)).decodeValue(o)).toEqual(ok(just(42)));
    expect(maybe(field('name', num)).decodeValue(o)).toEqual(ok(nothing));
    expect(maybe(field('height', num)).decodeValue(o)).toEqual(ok(nothing));
    expect(field('age', maybe(num)).decodeValue(o)).toEqual(ok(just(42)));
    expect(field('name', maybe(num)).decodeValue(o)).toEqual(ok(nothing));
    expect(field('height', maybe(num)).decodeValue(o)).toEqual(err('path not found [height] on {"name":"tom","age":42}'));
});
test('map', () => {
    expect(Decode.map((s) => s.length, Decode.str).decodeValue('foo')).toEqual(ok(3));
});
test('map2', () => {
    const point = Decode.map2((x, y) => [x, y], field('x', num), field('y', num));
    expect(point.decodeValue({ x: 1, y: 2 })).toEqual(ok([1, 2]));
    expect(point.decodeValue({ x: 1 })).toEqual(err('path not found [y] on {"x":1}'));
    expect(point.decodeValue({ y: 1 })).toEqual(err('path not found [x] on {"y":1}'));
    expect(point.decodeValue({ foo: 1 })).toEqual(err('path not found [x] on {"foo":1}'));
});
test('map3', () => {
    const point = Decode.map3((x, y, z) => [x, y, z], field('x', num), field('y', num), field('z', num));
    expect(point.decodeValue({ x: 1, y: 2, z: 3 })).toEqual(ok([1, 2, 3]));
    expect(point.decodeValue({ x: 1 })).toEqual(err('path not found [y] on {"x":1}'));
});
test('map8', () => {
    const o = {
        a: 1,
        b: 2,
        c: 3,
        d: 4,
        e: 5,
        f: 6,
        g: 7,
        h: 8,
    };
    expect(Decode.map8((a, b, c, d, e, f, g, h) => {
        return {
            a: a,
            b: b,
            c: c,
            d: d,
            e: e,
            f: f,
            g: g,
            h: h,
        };
    }, field('a', num), field('b', num), field('c', num), field('d', num), field('e', num), field('f', num), field('g', num), field('h', num)).decodeValue(o)).toEqual(ok(o));
});
describe('mapObject', () => {
    const expected = {
        foo: 'a foo',
        bar: 13,
    };
    test('simple', () => {
        const value = { foo: 'a foo', bar: 13 };
        expect(Decode.mapObject({
            foo: Decode.field('foo', Decode.str),
            bar: Decode.field('bar', Decode.num),
        }).decodeValue(value)).toEqual(ok(expected));
    });
    test('simpler', () => {
        const value = { foo: 'a foo', bar: 13 };
        expect(Decode.mapObject(Decode.mapRequiredFields({
            foo: Decode.str,
            bar: Decode.num,
        })).decodeValue(value)).toEqual(ok(expected));
    });
    test('missing field', () => {
        const value = { foo: 'a foo' };
        expect(Decode.mapObject({
            foo: Decode.field('foo', Decode.str),
            bar: Decode.field('bar', Decode.num),
        }).decodeValue(value)).toEqual(err('path not found [bar] on {"foo":"a foo"}'));
    });
    test('superfluous field', () => {
        const value = { foo: 'a foo', bar: 13, toto: true };
        expect(Decode.mapObject({
            foo: Decode.field('foo', Decode.str),
            bar: Decode.field('bar', Decode.num),
        }).decodeValue(value)).toEqual(ok(expected));
    });
    test('optional field', () => {
        const expected = {
            foo: 'a foo',
        };
        const value = { foo: 'a foo', toto: true };
        expect(Decode.mapObject({
            foo: Decode.field('foo', Decode.str),
            bar: Decode.optionalField('bar', Decode.num),
        }).decodeValue(value)).toEqual(ok(expected));
        // the type system will compile fail this test:
        // expect(Decode.mapObject<MyType2>({
        //   foo: Decode.field('foo', Decode.str),
        // }).decodeValue(value)).toEqual(ok(expected));
    });
    test('simpler optional field', () => {
        const expected = {
            foo: 'a foo',
        };
        const decoder = Object.assign(Object.assign({}, Decode.mapRequiredFields({
            foo: Decode.str,
        })), Decode.mapOptionalFields({
            bar: Decode.num,
        }));
        const value = { foo: 'a foo', toto: true };
        expect(Decode.mapObject(decoder).decodeValue(value)).toEqual(ok(expected));
    });
    test('decode array of mapObject', () => {
        const MyItemDecoder = Decode.mapObject(Decode.mapRequiredFields({
            gnu: Decode.num,
            foo: Decode.str,
        }));
        const payload = [
            {
                gnu: 1,
                foo: 'a',
            },
            {
                gnu: 2,
                foo: 'b',
            },
        ];
        const r = Decode.array(MyItemDecoder).decodeValue(payload);
        expect(r).toEqual(ok(payload));
    });
});
describe('mapArray', () => {
    const expected = ['a foo', 13];
    test('simple', () => {
        const value = ['a foo', 13];
        expect(Decode.mapTuple([Decode.str, Decode.num]).decodeValue(value)).toEqual(ok(expected));
    });
    test('type mismatch', () => {
        const value = ['a foo', 13];
        // the type system will compile fail this test:
        // expect(Decode.mapArray<ValueType>([
        //   Decode.str,
        //   Decode.str
        // ]).decodeValue(value)).toEqual(err('ran into decoder error at [1] : value is not a string : 13'));
        // the type system will let though to runtime:
        expect(Decode.mapTuple([Decode.str, Decode.str]).decodeValue(value)).toEqual(err('ran into decoder error at [1] : value is not a string : 13'));
    });
    test('missing item', () => {
        // the type system will compile fail this test:
        // const value: ValueType  = ['a foo']
        // the type system will let though to runtime:
        const value = ['a foo'];
        expect(Decode.mapTuple([Decode.str, Decode.num]).decodeValue(value)).toEqual(err('path not found [1] on ["a foo"]'));
    });
    test('too many items', () => {
        // the type system will compile fail this test:
        // const value: ValueType = ['a foo', 13, true]
        // the type system will let though to runtime:
        const value = ['a foo', 13, true];
        expect(Decode.mapTuple([Decode.str, Decode.num]).decodeValue(value)).toEqual(ok(expected));
    });
});
test('andThen', () => {
    const stuff = Decode.andThen(stuffHelp, field('tag', Decode.str));
    function stuffHelp(tag) {
        switch (tag) {
            case 'stuff1':
                return stuff1Decoder;
            case 'stuff2':
                return stuff2Decoder;
            default:
                return Decode.fail('unknown stuff ' + tag);
        }
    }
    const stuff1Decoder = Decode.map((foo) => {
        return {
            tag: 'stuff1',
            foo: foo,
        };
    }, Decode.field('foo', Decode.str));
    const stuff2Decoder = Decode.map((bar) => {
        return {
            tag: 'stuff2',
            bar: bar,
        };
    }, Decode.field('bar', Decode.str));
    const s1 = {
        tag: 'stuff1',
        foo: 'bar',
    };
    const s2 = {
        tag: 'stuff2',
        bar: 'baz',
    };
    expect(stuff.decodeValue(s1)).toEqual(ok(s1));
    expect(stuff.decodeValue(s2)).toEqual(ok(s2));
    expect(stuff.decodeValue({
        tag: 'wtf',
        blah: 'blah',
    })).toEqual(err('unknown stuff wtf'));
    expect(stuff.decodeValue({
        tag: 'stuff1',
        notThere: true,
    })).toEqual(err('path not found [foo] on {"tag":"stuff1","notThere":true}'));
});
test('lazy', () => {
    const comment = Decode.map2((message, responses) => {
        return {
            message: message,
            responses: responses,
        };
    }, field('message', Decode.str), field('responses', Decode.array(Decode.lazy(() => comment))));
    const v = {
        message: 'hello',
        responses: [
            {
                message: 'there',
                responses: [],
            },
            {
                message: 'world',
                responses: [],
            },
        ],
    };
    expect(comment.decodeValue(v)).toEqual(ok(v));
});
test('oneOf', () => {
    const badInt = Decode.oneOf([Decode.num, Decode.null(0)]);
    expect(badInt.decodeValue(123)).toEqual(ok(123));
    expect(badInt.decodeValue(null)).toEqual(ok(0));
    expect(badInt.decodeValue('foo')).toEqual(err('ran out of decoders for "foo"'));
});
test('from string', () => {
    expect(num.decodeString('123')).toEqual(ok(123));
});
test('any value', () => {
    const anyValue = { foo: 'bar' };
    expect(Decode.value.decodeValue(anyValue)).toEqual(ok(anyValue));
});
describe('optional field', () => {
    test('is present', () => {
        const value = { foo: 'bar', gnu: 13 };
        expect(Decode.optionalField('gnu', Decode.num).decodeValue(value)).toEqual(ok(13));
    });
    test('is missing', () => {
        const value = { foo: 'bar' };
        expect(Decode.optionalField('gnu', Decode.num).decodeValue(value)).toEqual(ok(undefined));
    });
    test('typical use case', () => {
        const value = { foo: 'bar' };
        const expected = {
            foo: 'bar',
        };
        expect(Decode.map2((foo, gnu) => {
            return { foo, gnu };
        }, Decode.field('foo', Decode.str), Decode.optionalField('gnu', Decode.num)).decodeValue(value)).toEqual(ok(expected));
    });
    test('simpler optional field', () => {
        const expected = {
            foo: 'a foo',
        };
        const value = { foo: 'a foo', toto: true };
        expect(Decode.mapObject(Object.assign(Object.assign({}, Decode.mapRequiredFields({
            foo: Decode.str,
        })), { bar: Decode.optionalField('bar', Decode.num) })).decodeValue(value)).toEqual(ok(expected));
    });
});
describe('null types', () => {
    test('non null value', () => {
        const value = { foo: 'bar' };
        const result = Decode.orNull(Decode.field('foo', Decode.str)).decodeValue(value);
        expect(result).toEqual(ok('bar'));
    });
    test('null value', () => {
        const value = { foo: null };
        const result = Decode.field('foo', Decode.orNull(Decode.str)).decodeValue(value);
        expect(result).toEqual(ok(null));
    });
    test('typical use case', () => {
        const value = { foo: null, gnu: null };
        const expected = {
            foo: null,
            gnu: null,
        };
        expect(Decode.map2((foo, gnu) => {
            return { foo, gnu };
        }, Decode.field('foo', Decode.orNull(Decode.str)), Decode.field('gnu', Decode.orNull(Decode.num))).decodeValue(value)).toEqual(ok(expected));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVjb2RlLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvVGVhQ3VwL0RlY29kZS50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXVCRztBQUVILE9BQU8sRUFBRSxNQUFNLEVBQTBCLE1BQU0sVUFBVSxDQUFDO0FBQzFELE9BQU8sRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFVLE1BQU0sVUFBVSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQ3hDLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDdkIsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUMzQixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFFaEQsSUFBSSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7SUFDeEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLHVEQUF1RCxDQUFDLENBQUMsQ0FBQztBQUMvRyxDQUFDLENBQUMsQ0FBQztBQUVILElBQUksQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO0lBQ3RCLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDLENBQUM7SUFFL0UsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVB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O0lBRUgsSUFBSSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtRQUs1QixNQUFNLEtBQUssR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDO1FBQ3ZDLE1BQU0sUUFBUSxHQUFXO1lBQ3ZCLEdBQUcsRUFBRSxJQUFJO1lBQ1QsR0FBRyxFQUFFLElBQUk7U0FDVixDQUFDO1FBQ0YsTUFBTSxDQUNKLE1BQU0sQ0FBQyxJQUFJLENBQ1QsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUU7WUFDWCxPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLENBQUMsRUFDRCxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUM5QyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUMvQyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FDckIsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDMUIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBNSVQgTGljZW5zZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxOSBSw6ltaSBWYW4gS2Vpc2JlbGNrXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuICogY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG4gKiBTT0ZUV0FSRS5cbiAqXG4gKi9cblxuaW1wb3J0IHsgRGVjb2RlLCBEZWNvZGVyLCBEZWNvZGVyT2JqZWN0IH0gZnJvbSAnLi9EZWNvZGUnO1xuaW1wb3J0IHsgZXJyLCBvaywgUmVzdWx0IH0gZnJvbSAnLi9SZXN1bHQnO1xuaW1wb3J0IHsganVzdCwgbm90aGluZyB9IGZyb20gJy4vTWF5YmUnO1xuY29uc3QgbnVtID0gRGVjb2RlLm51bTtcbmNvbnN0IGZpZWxkID0gRGVjb2RlLmZpZWxkO1xuaW1wb3J0IHsgZGVzY3JpYmUsIGV4cGVjdCwgdGVzdCB9IGZyb20gXCJ2aXRlc3RcIjtcblxudGVzdCgnc3ludGF4IGVycm9yJywgKCkgPT4ge1xuICBleHBlY3QobnVtLmRlY29kZVN0cmluZygnIHsgYnJva2VuICcpKS50b0VxdWFsKGVycignRXhwZWN0ZWQgcHJvcGVydHkgbmFtZSBvciBcXCd9XFwnIGluIEpTT04gYXQgcG9zaXRpb24gMycpKTtcbn0pO1xuXG50ZXN0KCdwcmltaXRpdmVzJywgKCkgPT4ge1xuICBleHBlY3QobnVtLmRlY29kZVZhbHVlKDEpKS50b0VxdWFsKG9rKDEpKTtcbiAgZXhwZWN0KG51bS5kZWNvZGVWYWx1ZSgneWVhaCcpKS50b0VxdWFsKGVycigndmFsdWUgaXMgbm90IGEgbnVtYmVyIDogXCJ5ZWFoXCInKSk7XG5cbiAgZXhwZWN0KERlY29kZS5ib29sLmRlY29kZVZhbHVlKHRydWUpKS50b0VxdWFsKG9rKHRydWUpKTtcbiAgZXhwZWN0KERlY29kZS5ib29sLmRlY29kZVZhbHVlKCdib29tJykpLnRvRXF1YWwoZXJyKCd2YWx1ZSBpcyBub3QgYSBib29sZWFuIDogXCJib29tXCInKSk7XG59KTtcblxudGVzdCgnbnVsbGFibGUnLCAoKSA9PiB7XG4gIGNvbnN0IGQgPSBEZWNvZGUubnVsbGFibGUobnVtKTtcbiAgZXhwZWN0KGQuZGVjb2RlVmFsdWUoMSkpLnRvRXF1YWwob2soanVzdCgxKSkpO1xuICBleHBlY3QoZC5kZWNvZGVWYWx1ZShudWxsKSkudG9FcXVhbChvayhub3RoaW5nKSk7XG4gIGV4cGVjdChkLmRlY29kZVZhbHVlKCduZWgnKSkudG9FcXVhbChlcnIoJ3ZhbHVlIGlzIG5vdCBhIG51bWJlciA6IFwibmVoXCInKSk7XG59KTtcblxudGVzdCgnZmllbGQnLCAoKSA9PiB7XG4gIGNvbnN0IG8gPSB7XG4gICAgYWdlOiAxMjMsXG4gIH07XG5cbiAgZXhwZWN0KGZpZWxkKCdhZ2UnLCBudW0pLmRlY29kZVZhbHVlKG8pKS50b0VxdWFsKG9rKDEyMykpO1xuICBleHBlY3QoZmllbGQoJ25laCcsIG51bSkuZGVjb2RlVmFsdWUobykpLnRvRXF1YWwoZXJyKCdwYXRoIG5vdCBmb3VuZCBbbmVoXSBvbiB7XCJhZ2VcIjoxMjN9JykpO1xufSk7XG5cbnRlc3QoJ2F0JywgKCkgPT4ge1xuICBjb25zdCBvID0ge1xuICAgIGZvbzoge1xuICAgICAgYmFyOiAnYmF6JyxcbiAgICB9LFxuICB9O1xuICBleHBlY3QoRGVjb2RlLmF0KFsnZm9vJywgJ2JhciddLCBEZWNvZGUuc3RyKS5kZWNvZGVWYWx1ZShvKSkudG9FcXVhbChvaygnYmF6JykpO1xuICBleHBlY3QoRGVjb2RlLmF0KFsnZm9vJywgJ2JhcicsICdub3BlJ10sIERlY29kZS5zdHIpLmRlY29kZVZhbHVlKG8pKS50b0VxdWFsKFxuICAgIGVycigncGF0aCBub3QgZm91bmQgW2ZvbyxiYXIsbm9wZV0gb24ge1wiZm9vXCI6e1wiYmFyXCI6XCJiYXpcIn19JyksXG4gICk7XG4gIGV4cGVjdChEZWNvZGUuYXQoWyd4J10sIERlY29kZS5zdHIpLmRlY29kZVZhbHVlKG8pKS50b0VxdWFsKGVycigncGF0aCBub3QgZm91bmQgW3hdIG9uIHtcImZvb1wiOntcImJhclwiOlwiYmF6XCJ9fScpKTtcbn0pO1xuXG50ZXN0KCdtYXliZScsICgpID0+IHtcbiAgY29uc3QgbyA9IHtcbiAgICBuYW1lOiAndG9tJyxcbiAgICBhZ2U6IDQyLFxuICB9O1xuXG4gIGNvbnN0IG1heWJlID0gRGVjb2RlLm1heWJlO1xuICBleHBlY3QobWF5YmUoZmllbGQoJ2FnZScsIG51bSkpLmRlY29kZVZhbHVlKG8pKS50b0VxdWFsKG9rKGp1c3QoNDIpKSk7XG4gIGV4cGVjdChtYXliZShmaWVsZCgnbmFtZScsIG51bSkpLmRlY29kZVZhbHVlKG8pKS50b0VxdWFsKG9rKG5vdGhpbmcpKTtcbiAgZXhwZWN0KG1heWJlKGZpZWxkKCdoZWlnaHQnLCBudW0pKS5kZWNvZGVWYWx1ZShvKSkudG9FcXVhbChvayhub3RoaW5nKSk7XG5cbiAgZXhwZWN0KGZpZWxkKCdhZ2UnLCBtYXliZShudW0pKS5kZWNvZGVWYWx1ZShvKSkudG9FcXVhbChvayhqdXN0KDQyKSkpO1xuICBleHBlY3QoZmllbGQoJ25hbWUnLCBtYXliZShudW0pKS5kZWNvZGVWYWx1ZShvKSkudG9FcXVhbChvayhub3RoaW5nKSk7XG4gIGV4cGVjdChmaWVsZCgnaGVpZ2h0JywgbWF5YmUobnVtKSkuZGVjb2RlVmFsdWUobykpLnRvRXF1YWwoZXJyKCdwYXRoIG5vdCBmb3VuZCBbaGVpZ2h0XSBvbiB7XCJuYW1lXCI6XCJ0b21cIixcImFnZVwiOjQyfScpKTtcbn0pO1xuXG50ZXN0KCdtYXAnLCAoKSA9PiB7XG4gIGV4cGVjdChEZWNvZGUubWFwKChzOiBzdHJpbmcpID0+IHMubGVuZ3RoLCBEZWNvZGUuc3RyKS5kZWNvZGVWYWx1ZSgnZm9vJykpLnRvRXF1YWwob2soMykpO1xufSk7XG5cbnRlc3QoJ21hcDInLCAoKSA9PiB7XG4gIGNvbnN0IHBvaW50OiBEZWNvZGVyPG51bWJlcltdPiA9IERlY29kZS5tYXAyKCh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gW3gsIHldLCBmaWVsZCgneCcsIG51bSksIGZpZWxkKCd5JywgbnVtKSk7XG5cbiAgZXhwZWN0KHBvaW50LmRlY29kZVZhbHVlKHsgeDogMSwgeTogMiB9KSkudG9FcXVhbChvayhbMSwgMl0pKTtcbiAgZXhwZWN0KHBvaW50LmRlY29kZVZhbHVlKHsgeDogMSB9KSkudG9FcXVhbChlcnIoJ3BhdGggbm90IGZvdW5kIFt5XSBvbiB7XCJ4XCI6MX0nKSk7XG4gIGV4cGVjdChwb2ludC5kZWNvZGVWYWx1ZSh7IHk6IDEgfSkpLnRvRXF1YWwoZXJyKCdwYXRoIG5vdCBmb3VuZCBbeF0gb24ge1wieVwiOjF9JykpO1xuICBleHBlY3QocG9pbnQuZGVjb2RlVmFsdWUoeyBmb286IDEgfSkpLnRvRXF1YWwoZXJyKCdwYXRoIG5vdCBmb3VuZCBbeF0gb24ge1wiZm9vXCI6MX0nKSk7XG59KTtcblxudGVzdCgnbWFwMycsICgpID0+IHtcbiAgY29uc3QgcG9pbnQ6IERlY29kZXI8bnVtYmVyW10+ID0gRGVjb2RlLm1hcDMoXG4gICAgKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpID0+IFt4LCB5LCB6XSxcbiAgICBmaWVsZCgneCcsIG51bSksXG4gICAgZmllbGQoJ3knLCBudW0pLFxuICAgIGZpZWxkKCd6JywgbnVtKSxcbiAgKTtcblxuICBleHBlY3QocG9pbnQuZGVjb2RlVmFsdWUoeyB4OiAxLCB5OiAyLCB6OiAzIH0pKS50b0VxdWFsKG9rKFsxLCAyLCAzXSkpO1xuICBleHBlY3QocG9pbnQuZGVjb2RlVmFsdWUoeyB4OiAxIH0pKS50b0VxdWFsKGVycigncGF0aCBub3QgZm91bmQgW3ldIG9uIHtcInhcIjoxfScpKTtcbn0pO1xuXG50ZXN0KCdtYXA4JywgKCkgPT4ge1xuICBpbnRlcmZhY2UgTXkge1xuICAgIHJlYWRvbmx5IGE6IG51bWJlcjtcbiAgICByZWFkb25seSBiOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgYzogbnVtYmVyO1xuICAgIHJlYWRvbmx5IGQ6IG51bWJlcjtcbiAgICByZWFkb25seSBlOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgZjogbnVtYmVyO1xuICAgIHJlYWRvbmx5IGc6IG51bWJlcjtcbiAgICByZWFkb25seSBoOiBudW1iZXI7XG4gIH1cblxuICBjb25zdCBvID0ge1xuICAgIGE6IDEsXG4gICAgYjogMixcbiAgICBjOiAzLFxuICAgIGQ6IDQsXG4gICAgZTogNSxcbiAgICBmOiA2LFxuICAgIGc6IDcsXG4gICAgaDogOCxcbiAgfTtcblxuICBleHBlY3QoXG4gICAgRGVjb2RlLm1hcDgoXG4gICAgICAoYTogbnVtYmVyLCBiOiBudW1iZXIsIGM6IG51bWJlciwgZDogbnVtYmVyLCBlOiBudW1iZXIsIGY6IG51bWJlciwgZzogbnVtYmVyLCBoOiBudW1iZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBhOiBhLFxuICAgICAgICAgIGI6IGIsXG4gICAgICAgICAgYzogYyxcbiAgICAgICAgICBkOiBkLFxuICAgICAgICAgIGU6IGUsXG4gICAgICAgICAgZjogZixcbiAgICAgICAgICBnOiBnLFxuICAgICAgICAgIGg6IGgsXG4gICAgICAgIH0gYXMgTXk7XG4gICAgICB9LFxuICAgICAgZmllbGQoJ2EnLCBudW0pLFxuICAgICAgZmllbGQoJ2InLCBudW0pLFxuICAgICAgZmllbGQoJ2MnLCBudW0pLFxuICAgICAgZmllbGQoJ2QnLCBudW0pLFxuICAgICAgZmllbGQoJ2UnLCBudW0pLFxuICAgICAgZmllbGQoJ2YnLCBudW0pLFxuICAgICAgZmllbGQoJ2cnLCBudW0pLFxuICAgICAgZmllbGQoJ2gnLCBudW0pLFxuICAgICkuZGVjb2RlVmFsdWUobyksXG4gICkudG9FcXVhbChvayhvKSk7XG59KTtcblxuZGVzY3JpYmUoJ21hcE9iamVjdCcsICgpID0+IHtcbiAgdHlwZSBNeVR5cGUgPSB7XG4gICAgZm9vOiBzdHJpbmc7XG4gICAgYmFyOiBudW1iZXI7XG4gIH07XG4gIGNvbnN0IGV4cGVjdGVkOiBNeVR5cGUgPSB7XG4gICAgZm9vOiAnYSBmb28nLFxuICAgIGJhcjogMTMsXG4gIH07XG5cbiAgdGVzdCgnc2ltcGxlJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0geyBmb286ICdhIGZvbycsIGJhcjogMTMgfTtcbiAgICBleHBlY3QoXG4gICAgICBEZWNvZGUubWFwT2JqZWN0PE15VHlwZT4oe1xuICAgICAgICBmb286IERlY29kZS5maWVsZCgnZm9vJywgRGVjb2RlLnN0ciksXG4gICAgICAgIGJhcjogRGVjb2RlLmZpZWxkKCdiYXInLCBEZWNvZGUubnVtKSxcbiAgICAgIH0pLmRlY29kZVZhbHVlKHZhbHVlKSxcbiAgICApLnRvRXF1YWwob2soZXhwZWN0ZWQpKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2ltcGxlcicsICgpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHsgZm9vOiAnYSBmb28nLCBiYXI6IDEzIH07XG4gICAgZXhwZWN0KFxuICAgICAgRGVjb2RlLm1hcE9iamVjdDxNeVR5cGU+KFxuICAgICAgICBEZWNvZGUubWFwUmVxdWlyZWRGaWVsZHMoe1xuICAgICAgICAgIGZvbzogRGVjb2RlLnN0cixcbiAgICAgICAgICBiYXI6IERlY29kZS5udW0sXG4gICAgICAgIH0pLFxuICAgICAgKS5kZWNvZGVWYWx1ZSh2YWx1ZSksXG4gICAgKS50b0VxdWFsKG9rKGV4cGVjdGVkKSk7XG4gIH0pO1xuXG4gIHRlc3QoJ21pc3NpbmcgZmllbGQnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSB7IGZvbzogJ2EgZm9vJyB9O1xuICAgIGV4cGVjdChcbiAgICAgIERlY29kZS5tYXBPYmplY3Q8TXlUeXBlPih7XG4gICAgICAgIGZvbzogRGVjb2RlLmZpZWxkKCdmb28nLCBEZWNvZGUuc3RyKSxcbiAgICAgICAgYmFyOiBEZWNvZGUuZmllbGQoJ2JhcicsIERlY29kZS5udW0pLFxuICAgICAgfSkuZGVjb2RlVmFsdWUodmFsdWUpLFxuICAgICkudG9FcXVhbChlcnIoJ3BhdGggbm90IGZvdW5kIFtiYXJdIG9uIHtcImZvb1wiOlwiYSBmb29cIn0nKSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3N1cGVyZmx1b3VzIGZpZWxkJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0geyBmb286ICdhIGZvbycsIGJhcjogMTMsIHRvdG86IHRydWUgfTtcbiAgICBleHBlY3QoXG4gICAgICBEZWNvZGUubWFwT2JqZWN0PE15VHlwZT4oe1xuICAgICAgICBmb286IERlY29kZS5maWVsZCgnZm9vJywgRGVjb2RlLnN0ciksXG4gICAgICAgIGJhcjogRGVjb2RlLmZpZWxkKCdiYXInLCBEZWNvZGUubnVtKSxcbiAgICAgIH0pLmRlY29kZVZhbHVlKHZhbHVlKSxcbiAgICApLnRvRXF1YWwob2soZXhwZWN0ZWQpKTtcbiAgfSk7XG5cbiAgdGVzdCgnb3B0aW9uYWwgZmllbGQnLCAoKSA9PiB7XG4gICAgdHlwZSBNeVR5cGUyID0ge1xuICAgICAgZm9vOiBzdHJpbmc7XG4gICAgICBiYXI/OiBudW1iZXI7XG4gICAgfTtcbiAgICBjb25zdCBleHBlY3RlZDogTXlUeXBlMiA9IHtcbiAgICAgIGZvbzogJ2EgZm9vJyxcbiAgICB9O1xuXG4gICAgY29uc3QgdmFsdWUgPSB7IGZvbzogJ2EgZm9vJywgdG90bzogdHJ1ZSB9O1xuICAgIGV4cGVjdChcbiAgICAgIERlY29kZS5tYXBPYmplY3Q8TXlUeXBlMj4oe1xuICAgICAgICBmb286IERlY29kZS5maWVsZCgnZm9vJywgRGVjb2RlLnN0ciksXG4gICAgICAgIGJhcjogRGVjb2RlLm9wdGlvbmFsRmllbGQoJ2JhcicsIERlY29kZS5udW0pLFxuICAgICAgfSkuZGVjb2RlVmFsdWUodmFsdWUpLFxuICAgICkudG9FcXVhbChvayhleHBlY3RlZCkpO1xuXG4gICAgLy8gdGhlIHR5cGUgc3lzdGVtIHdpbGwgY29tcGlsZSBmYWlsIHRoaXMgdGVzdDpcbiAgICAvLyBleHBlY3QoRGVjb2RlLm1hcE9iamVjdDxNeVR5cGUyPih7XG4gICAgLy8gICBmb286IERlY29kZS5maWVsZCgnZm9vJywgRGVjb2RlLnN0ciksXG4gICAgLy8gfSkuZGVjb2RlVmFsdWUodmFsdWUpKS50b0VxdWFsKG9rKGV4cGVjdGVkKSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3NpbXBsZXIgb3B0aW9uYWwgZmllbGQnLCAoKSA9PiB7XG4gICAgdHlwZSBNeVR5cGUyID0ge1xuICAgICAgZm9vOiBzdHJpbmc7XG4gICAgICBiYXI/OiBudW1iZXI7XG4gICAgfTtcbiAgICBjb25zdCBleHBlY3RlZDogTXlUeXBlMiA9IHtcbiAgICAgIGZvbzogJ2EgZm9vJyxcbiAgICB9O1xuXG4gICAgY29uc3QgZGVjb2RlcjogRGVjb2Rlck9iamVjdDxNeVR5cGUyPiA9IHtcbiAgICAgIC4uLkRlY29kZS5tYXBSZXF1aXJlZEZpZWxkcyh7XG4gICAgICAgIGZvbzogRGVjb2RlLnN0cixcbiAgICAgIH0pLFxuICAgICAgLi4uRGVjb2RlLm1hcE9wdGlvbmFsRmllbGRzKHtcbiAgICAgICAgYmFyOiBEZWNvZGUubnVtLFxuICAgICAgfSksXG4gICAgfTtcblxuICAgIGNvbnN0IHZhbHVlID0geyBmb286ICdhIGZvbycsIHRvdG86IHRydWUgfTtcbiAgICBleHBlY3QoRGVjb2RlLm1hcE9iamVjdDxNeVR5cGUyPihkZWNvZGVyKS5kZWNvZGVWYWx1ZSh2YWx1ZSkpLnRvRXF1YWwob2soZXhwZWN0ZWQpKTtcbiAgfSk7XG5cbiAgdGVzdCgnZGVjb2RlIGFycmF5IG9mIG1hcE9iamVjdCcsICgpID0+IHtcbiAgICB0eXBlIE15SXRlbSA9IHsgZ251OiBudW1iZXI7IGZvbzogc3RyaW5nIH07XG5cbiAgICBjb25zdCBNeUl0ZW1EZWNvZGVyOiBEZWNvZGVyPE15SXRlbT4gPSBEZWNvZGUubWFwT2JqZWN0KFxuICAgICAgRGVjb2RlLm1hcFJlcXVpcmVkRmllbGRzKHtcbiAgICAgICAgZ251OiBEZWNvZGUubnVtLFxuICAgICAgICBmb286IERlY29kZS5zdHIsXG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgY29uc3QgcGF5bG9hZDogTXlJdGVtW10gPSBbXG4gICAgICB7XG4gICAgICAgIGdudTogMSxcbiAgICAgICAgZm9vOiAnYScsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBnbnU6IDIsXG4gICAgICAgIGZvbzogJ2InLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgY29uc3QgciA9IERlY29kZS5hcnJheShNeUl0ZW1EZWNvZGVyKS5kZWNvZGVWYWx1ZShwYXlsb2FkKTtcbiAgICBleHBlY3QocikudG9FcXVhbChvayhwYXlsb2FkKSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdtYXBBcnJheScsICgpID0+IHtcbiAgdHlwZSBNeVR5cGUgPSBbc3RyaW5nLCBudW1iZXJdO1xuICBjb25zdCBleHBlY3RlZDogTXlUeXBlID0gWydhIGZvbycsIDEzXTtcblxuICB0ZXN0KCdzaW1wbGUnLCAoKSA9PiB7XG4gICAgdHlwZSBWYWx1ZVR5cGUgPSBbc3RyaW5nLCBudW1iZXJdO1xuICAgIGNvbnN0IHZhbHVlOiBWYWx1ZVR5cGUgPSBbJ2EgZm9vJywgMTNdO1xuICAgIGV4cGVjdChcbiAgICAgIERlY29kZS5tYXBUdXBsZTxWYWx1ZVR5cGU+KFtEZWNvZGUuc3RyLCBEZWNvZGUubnVtXSkuZGVjb2RlVmFsdWUodmFsdWUpLFxuICAgICkudG9FcXVhbChvayhleHBlY3RlZCkpO1xuICB9KTtcblxuICB0ZXN0KCd0eXBlIG1pc21hdGNoJywgKCkgPT4ge1xuICAgIHR5cGUgVmFsdWVUeXBlID0gW3N0cmluZywgbnVtYmVyXTtcbiAgICBjb25zdCB2YWx1ZTogVmFsdWVUeXBlID0gWydhIGZvbycsIDEzXTtcblxuICAgIC8vIHRoZSB0eXBlIHN5c3RlbSB3aWxsIGNvbXBpbGUgZmFpbCB0aGlzIHRlc3Q6XG4gICAgLy8gZXhwZWN0KERlY29kZS5tYXBBcnJheTxWYWx1ZVR5cGU+KFtcbiAgICAvLyAgIERlY29kZS5zdHIsXG4gICAgLy8gICBEZWNvZGUuc3RyXG4gICAgLy8gXSkuZGVjb2RlVmFsdWUodmFsdWUpKS50b0VxdWFsKGVycigncmFuIGludG8gZGVjb2RlciBlcnJvciBhdCBbMV0gOiB2YWx1ZSBpcyBub3QgYSBzdHJpbmcgOiAxMycpKTtcblxuICAgIC8vIHRoZSB0eXBlIHN5c3RlbSB3aWxsIGxldCB0aG91Z2ggdG8gcnVudGltZTpcbiAgICBleHBlY3QoRGVjb2RlLm1hcFR1cGxlKFtEZWNvZGUuc3RyLCBEZWNvZGUuc3RyXSkuZGVjb2RlVmFsdWUodmFsdWUpKS50b0VxdWFsKFxuICAgICAgZXJyKCdyYW4gaW50byBkZWNvZGVyIGVycm9yIGF0IFsxXSA6IHZhbHVlIGlzIG5vdCBhIHN0cmluZyA6IDEzJyksXG4gICAgKTtcbiAgfSk7XG5cbiAgdGVzdCgnbWlzc2luZyBpdGVtJywgKCkgPT4ge1xuICAgIHR5cGUgVmFsdWVUeXBlID0gW3N0cmluZywgbnVtYmVyXTtcbiAgICAvLyB0aGUgdHlwZSBzeXN0ZW0gd2lsbCBjb21waWxlIGZhaWwgdGhpcyB0ZXN0OlxuICAgIC8vIGNvbnN0IHZhbHVlOiBWYWx1ZVR5cGUgID0gWydhIGZvbyddXG5cbiAgICAvLyB0aGUgdHlwZSBzeXN0ZW0gd2lsbCBsZXQgdGhvdWdoIHRvIHJ1bnRpbWU6XG4gICAgY29uc3QgdmFsdWUgPSBbJ2EgZm9vJ107XG4gICAgZXhwZWN0KERlY29kZS5tYXBUdXBsZShbRGVjb2RlLnN0ciwgRGVjb2RlLm51bV0pLmRlY29kZVZhbHVlKHZhbHVlKSkudG9FcXVhbChcbiAgICAgIGVycigncGF0aCBub3QgZm91bmQgWzFdIG9uIFtcImEgZm9vXCJdJyksXG4gICAgKTtcbiAgfSk7XG5cbiAgdGVzdCgndG9vIG1hbnkgaXRlbXMnLCAoKSA9PiB7XG4gICAgdHlwZSBWYWx1ZVR5cGUgPSBbc3RyaW5nLCBudW1iZXJdO1xuICAgIC8vIHRoZSB0eXBlIHN5c3RlbSB3aWxsIGNvbXBpbGUgZmFpbCB0aGlzIHRlc3Q6XG4gICAgLy8gY29uc3QgdmFsdWU6IFZhbHVlVHlwZSA9IFsnYSBmb28nLCAxMywgdHJ1ZV1cblxuICAgIC8vIHRoZSB0eXBlIHN5c3RlbSB3aWxsIGxldCB0aG91Z2ggdG8gcnVudGltZTpcbiAgICBjb25zdCB2YWx1ZSA9IFsnYSBmb28nLCAxMywgdHJ1ZV07XG4gICAgZXhwZWN0KERlY29kZS5tYXBUdXBsZShbRGVjb2RlLnN0ciwgRGVjb2RlLm51bV0pLmRlY29kZVZhbHVlKHZhbHVlKSkudG9FcXVhbChvayhleHBlY3RlZCkpO1xuICB9KTtcbn0pO1xuXG50ZXN0KCdhbmRUaGVuJywgKCkgPT4ge1xuICB0eXBlIFN0dWZmID0geyByZWFkb25seSB0YWc6ICdzdHVmZjEnOyByZWFkb25seSBmb286IHN0cmluZyB9IHwgeyByZWFkb25seSB0YWc6ICdzdHVmZjInOyByZWFkb25seSBiYXI6IHN0cmluZyB9O1xuXG4gIGNvbnN0IHN0dWZmOiBEZWNvZGVyPFN0dWZmPiA9IERlY29kZS5hbmRUaGVuKHN0dWZmSGVscCwgZmllbGQoJ3RhZycsIERlY29kZS5zdHIpKTtcblxuICBmdW5jdGlvbiBzdHVmZkhlbHAodGFnOiBzdHJpbmcpOiBEZWNvZGVyPFN0dWZmPiB7XG4gICAgc3dpdGNoICh0YWcpIHtcbiAgICAgIGNhc2UgJ3N0dWZmMSc6XG4gICAgICAgIHJldHVybiBzdHVmZjFEZWNvZGVyO1xuICAgICAgY2FzZSAnc3R1ZmYyJzpcbiAgICAgICAgcmV0dXJuIHN0dWZmMkRlY29kZXI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gRGVjb2RlLmZhaWwoJ3Vua25vd24gc3R1ZmYgJyArIHRhZyk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc3R1ZmYxRGVjb2RlcjogRGVjb2RlcjxTdHVmZj4gPSBEZWNvZGUubWFwKChmb286IHN0cmluZykgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICB0YWc6ICdzdHVmZjEnLFxuICAgICAgZm9vOiBmb28sXG4gICAgfSBhcyBTdHVmZjtcbiAgfSwgRGVjb2RlLmZpZWxkKCdmb28nLCBEZWNvZGUuc3RyKSk7XG5cbiAgY29uc3Qgc3R1ZmYyRGVjb2RlcjogRGVjb2RlcjxTdHVmZj4gPSBEZWNvZGUubWFwKChiYXI6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICB0YWc6ICdzdHVmZjInLFxuICAgICAgYmFyOiBiYXIsXG4gICAgfSBhcyBTdHVmZjtcbiAgfSwgRGVjb2RlLmZpZWxkKCdiYXInLCBEZWNvZGUuc3RyKSk7XG5cbiAgY29uc3QgczE6IGFueSA9IHtcbiAgICB0YWc6ICdzdHVmZjEnLFxuICAgIGZvbzogJ2JhcicsXG4gIH07XG5cbiAgY29uc3QgczI6IGFueSA9IHtcbiAgICB0YWc6ICdzdHVmZjInLFxuICAgIGJhcjogJ2JheicsXG4gIH07XG5cbiAgZXhwZWN0KHN0dWZmLmRlY29kZVZhbHVlKHMxKSkudG9FcXVhbChvayhzMSkpO1xuXG4gIGV4cGVjdChzdHVmZi5kZWNvZGVWYWx1ZShzMikpLnRvRXF1YWwob2soczIpKTtcblxuICBleHBlY3QoXG4gICAgc3R1ZmYuZGVjb2RlVmFsdWUoe1xuICAgICAgdGFnOiAnd3RmJyxcbiAgICAgIGJsYWg6ICdibGFoJyxcbiAgICB9KSxcbiAgKS50b0VxdWFsKGVycigndW5rbm93biBzdHVmZiB3dGYnKSk7XG5cbiAgZXhwZWN0KFxuICAgIHN0dWZmLmRlY29kZVZhbHVlKHtcbiAgICAgIHRhZzogJ3N0dWZmMScsXG4gICAgICBub3RUaGVyZTogdHJ1ZSxcbiAgICB9KSxcbiAgKS50b0VxdWFsKGVycigncGF0aCBub3QgZm91bmQgW2Zvb10gb24ge1widGFnXCI6XCJzdHVmZjFcIixcIm5vdFRoZXJlXCI6dHJ1ZX0nKSk7XG59KTtcblxudGVzdCgnbGF6eScsICgpID0+IHtcbiAgaW50ZXJmYWNlIENvbW1lbnQge1xuICAgIHJlYWRvbmx5IG1lc3NhZ2U6IHN0cmluZztcbiAgICByZWFkb25seSByZXNwb25zZXM6IFJlYWRvbmx5QXJyYXk8Q29tbWVudD47XG4gIH1cblxuICBjb25zdCBjb21tZW50OiBEZWNvZGVyPENvbW1lbnQ+ID0gRGVjb2RlLm1hcDIoXG4gICAgKG1lc3NhZ2U6IHN0cmluZywgcmVzcG9uc2VzOiBDb21tZW50W10pID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgIHJlc3BvbnNlczogcmVzcG9uc2VzLFxuICAgICAgfSBhcyBDb21tZW50O1xuICAgIH0sXG4gICAgZmllbGQoJ21lc3NhZ2UnLCBEZWNvZGUuc3RyKSxcbiAgICBmaWVsZCgncmVzcG9uc2VzJywgRGVjb2RlLmFycmF5KERlY29kZS5sYXp5KCgpID0+IGNvbW1lbnQpKSksXG4gICk7XG5cbiAgY29uc3QgdiA9IHtcbiAgICBtZXNzYWdlOiAnaGVsbG8nLFxuICAgIHJlc3BvbnNlczogW1xuICAgICAge1xuICAgICAgICBtZXNzYWdlOiAndGhlcmUnLFxuICAgICAgICByZXNwb25zZXM6IFtdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbWVzc2FnZTogJ3dvcmxkJyxcbiAgICAgICAgcmVzcG9uc2VzOiBbXSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfTtcblxuICBleHBlY3QoY29tbWVudC5kZWNvZGVWYWx1ZSh2KSkudG9FcXVhbChvayh2KSk7XG59KTtcblxudGVzdCgnb25lT2YnLCAoKSA9PiB7XG4gIGNvbnN0IGJhZEludDogRGVjb2RlcjxudW1iZXI+ID0gRGVjb2RlLm9uZU9mKFtEZWNvZGUubnVtLCBEZWNvZGUubnVsbCgwKV0pO1xuXG4gIGV4cGVjdChiYWRJbnQuZGVjb2RlVmFsdWUoMTIzKSkudG9FcXVhbChvaygxMjMpKTtcbiAgZXhwZWN0KGJhZEludC5kZWNvZGVWYWx1ZShudWxsKSkudG9FcXVhbChvaygwKSk7XG4gIGV4cGVjdChiYWRJbnQuZGVjb2RlVmFsdWUoJ2ZvbycpKS50b0VxdWFsKGVycigncmFuIG91dCBvZiBkZWNvZGVycyBmb3IgXCJmb29cIicpKTtcbn0pO1xuXG50ZXN0KCdmcm9tIHN0cmluZycsICgpID0+IHtcbiAgZXhwZWN0KG51bS5kZWNvZGVTdHJpbmcoJzEyMycpKS50b0VxdWFsKG9rKDEyMykpO1xufSk7XG5cbnRlc3QoJ2FueSB2YWx1ZScsICgpID0+IHtcbiAgY29uc3QgYW55VmFsdWUgPSB7IGZvbzogJ2JhcicgfTtcbiAgZXhwZWN0KERlY29kZS52YWx1ZS5kZWNvZGVWYWx1ZShhbnlWYWx1ZSkpLnRvRXF1YWwob2soYW55VmFsdWUpKTtcbn0pO1xuXG5kZXNjcmliZSgnb3B0aW9uYWwgZmllbGQnLCAoKSA9PiB7XG4gIHRlc3QoJ2lzIHByZXNlbnQnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSB7IGZvbzogJ2JhcicsIGdudTogMTMgfTtcbiAgICBleHBlY3QoRGVjb2RlLm9wdGlvbmFsRmllbGQoJ2dudScsIERlY29kZS5udW0pLmRlY29kZVZhbHVlKHZhbHVlKSkudG9FcXVhbChvaygxMykpO1xuICB9KTtcbiAgdGVzdCgnaXMgbWlzc2luZycsICgpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHsgZm9vOiAnYmFyJyB9O1xuICAgIGV4cGVjdChEZWNvZGUub3B0aW9uYWxGaWVsZCgnZ251JywgRGVjb2RlLm51bSkuZGVjb2RlVmFsdWUodmFsdWUpKS50b0VxdWFsKG9rKHVuZGVmaW5lZCkpO1xuICB9KTtcblxuICB0ZXN0KCd0eXBpY2FsIHVzZSBjYXNlJywgKCkgPT4ge1xuICAgIHR5cGUgTXlUeXBlID0ge1xuICAgICAgZm9vOiBzdHJpbmc7XG4gICAgICBnbnU/OiBudW1iZXI7XG4gICAgfTtcbiAgICBjb25zdCB2YWx1ZSA9IHsgZm9vOiAnYmFyJyB9O1xuICAgIGNvbnN0IGV4cGVjdGVkOiBNeVR5cGUgPSB7XG4gICAgICBmb286ICdiYXInLFxuICAgIH07XG4gICAgZXhwZWN0KFxuICAgICAgRGVjb2RlLm1hcDIoXG4gICAgICAgIChmb28sIGdudSkgPT4ge1xuICAgICAgICAgIHJldHVybiB7IGZvbywgZ251IH07XG4gICAgICAgIH0sXG4gICAgICAgIERlY29kZS5maWVsZCgnZm9vJywgRGVjb2RlLnN0ciksXG4gICAgICAgIERlY29kZS5vcHRpb25hbEZpZWxkKCdnbnUnLCBEZWNvZGUubnVtKSxcbiAgICAgICkuZGVjb2RlVmFsdWUodmFsdWUpLFxuICAgICkudG9FcXVhbChvayhleHBlY3RlZCkpO1xuICB9KTtcblxuICB0ZXN0KCdzaW1wbGVyIG9wdGlvbmFsIGZpZWxkJywgKCkgPT4ge1xuICAgIHR5cGUgTXlUeXBlMiA9IHtcbiAgICAgIGZvbzogc3RyaW5nO1xuICAgICAgYmFyPzogbnVtYmVyO1xuICAgIH07XG4gICAgY29uc3QgZXhwZWN0ZWQ6IE15VHlwZTIgPSB7XG4gICAgICBmb286ICdhIGZvbycsXG4gICAgfTtcblxuICAgIGNvbnN0IHZhbHVlID0geyBmb286ICdhIGZvbycsIHRvdG86IHRydWUgfTtcbiAgICBleHBlY3QoXG4gICAgICBEZWNvZGUubWFwT2JqZWN0PE15VHlwZTI+KHtcbiAgICAgICAgLi4uRGVjb2RlLm1hcFJlcXVpcmVkRmllbGRzKHtcbiAgICAgICAgICBmb286IERlY29kZS5zdHIsXG4gICAgICAgIH0pLFxuICAgICAgICBiYXI6IERlY29kZS5vcHRpb25hbEZpZWxkKCdiYXInLCBEZWNvZGUubnVtKSxcbiAgICAgIH0pLmRlY29kZVZhbHVlKHZhbHVlKSxcbiAgICApLnRvRXF1YWwob2soZXhwZWN0ZWQpKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ251bGwgdHlwZXMnLCAoKSA9PiB7XG4gIHRlc3QoJ25vbiBudWxsIHZhbHVlJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0geyBmb286ICdiYXInIH07XG4gICAgY29uc3QgcmVzdWx0OiBSZXN1bHQ8c3RyaW5nLCBzdHJpbmcgfCBudWxsPiA9IERlY29kZS5vck51bGwoRGVjb2RlLmZpZWxkKCdmb28nLCBEZWNvZGUuc3RyKSkuZGVjb2RlVmFsdWUodmFsdWUpO1xuICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwob2soJ2JhcicpKTtcbiAgfSk7XG5cbiAgdGVzdCgnbnVsbCB2YWx1ZScsICgpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHsgZm9vOiBudWxsIH07XG4gICAgY29uc3QgcmVzdWx0OiBSZXN1bHQ8c3RyaW5nLCBzdHJpbmcgfCBudWxsPiA9IERlY29kZS5maWVsZCgnZm9vJywgRGVjb2RlLm9yTnVsbChEZWNvZGUuc3RyKSkuZGVjb2RlVmFsdWUodmFsdWUpO1xuICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwob2sobnVsbCkpO1xuICB9KTtcblxuICB0ZXN0KCd0eXBpY2FsIHVzZSBjYXNlJywgKCkgPT4ge1xuICAgIHR5cGUgTXlUeXBlID0ge1xuICAgICAgZ251OiBudW1iZXIgfCBudWxsO1xuICAgICAgZm9vOiBzdHJpbmcgfCBudWxsO1xuICAgIH07XG4gICAgY29uc3QgdmFsdWUgPSB7IGZvbzogbnVsbCwgZ251OiBudWxsIH07XG4gICAgY29uc3QgZXhwZWN0ZWQ6IE15VHlwZSA9IHtcbiAgICAgIGZvbzogbnVsbCxcbiAgICAgIGdudTogbnVsbCxcbiAgICB9O1xuICAgIGV4cGVjdChcbiAgICAgIERlY29kZS5tYXAyKFxuICAgICAgICAoZm9vLCBnbnUpID0+IHtcbiAgICAgICAgICByZXR1cm4geyBmb28sIGdudSB9O1xuICAgICAgICB9LFxuICAgICAgICBEZWNvZGUuZmllbGQoJ2ZvbycsIERlY29kZS5vck51bGwoRGVjb2RlLnN0cikpLFxuICAgICAgICBEZWNvZGUuZmllbGQoJ2dudScsIERlY29kZS5vck51bGwoRGVjb2RlLm51bSkpLFxuICAgICAgKS5kZWNvZGVWYWx1ZSh2YWx1ZSksXG4gICAgKS50b0VxdWFsKG9rKGV4cGVjdGVkKSk7XG4gIH0pO1xufSk7XG4iXX0=