/*
 * MIT License
 *
 * Copyright (c) 2019 RÃ©mi Van Keisbelck
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
import { just, nothing } from './Maybe';
export class ListWithSelection {
    constructor(l1, l2, sel) {
        this.l1 = l1;
        this.l2 = l2;
        this.sel = sel;
    }
    static fromArray(a) {
        return new ListWithSelection(a, [], nothing);
    }
    static empty() {
        return new ListWithSelection([], [], nothing);
    }
    toArray() {
        return this.l1.concat(this.sel.map((t) => [t]).withDefault([])).concat(this.l2);
    }
    select(f) {
        const l = this.toArray();
        const l1 = [];
        const l2 = [];
        let sel = nothing;
        for (let i = 0; i < l.length; i++) {
            switch (sel.type) {
                case 'Nothing': {
                    // nothing selected yet, we need to test
                    const selected = f(l[i], i, l);
                    if (selected) {
                        sel = just(l[i]);
                    }
                    else {
                        l1.push(l[i]);
                    }
                    break;
                }
                case 'Just': {
                    // selection done already, feed into l2
                    l2.push(l[i]);
                    break;
                }
            }
        }
        return new ListWithSelection(l1, l2, sel);
    }
    selectIndex(index) {
        return this.select((item, i) => i === index);
    }
    isSelected(item) {
        return this.sel.map((t) => t === item).withDefault(false);
    }
    getSelected() {
        return this.sel;
    }
    getSelectedIndex() {
        return this.sel.map(() => this.l1.length);
    }
    length() {
        return this.toArray().length;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGlzdFdpdGhTZWxlY3Rpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvVGVhQ3VwL0xpc3RXaXRoU2VsZWN0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXVCRztBQUVILE9BQU8sRUFBRSxJQUFJLEVBQVMsT0FBTyxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBRS9DLE1BQU0sT0FBTyxpQkFBaUI7SUFLNUIsWUFBb0IsRUFBb0IsRUFBRSxFQUFvQixFQUFFLEdBQWE7UUFDM0UsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDYixJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0lBQ2pCLENBQUM7SUFFRCxNQUFNLENBQUMsU0FBUyxDQUFJLENBQW1CO1FBQ3JDLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFRCxNQUFNLENBQUMsS0FBSztRQUNWLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDbEYsQ0FBQztJQUVELE1BQU0sQ0FBQyxDQUE2RDtRQUNsRSxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDekIsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDO1FBQ2QsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDO1FBQ2QsSUFBSSxHQUFHLEdBQWEsT0FBTyxDQUFDO1FBQzVCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDbEMsUUFBUSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ2pCLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztvQkFDZix3Q0FBd0M7b0JBQ3hDLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUMvQixJQUFJLFFBQVEsRUFBRSxDQUFDO3dCQUNiLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ25CLENBQUM7eUJBQU0sQ0FBQzt3QkFDTixFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNoQixDQUFDO29CQUNELE1BQU07Z0JBQ1IsQ0FBQztnQkFDRCxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUM7b0JBQ1osdUNBQXVDO29CQUN2QyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNkLE1BQU07Z0JBQ1IsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO1FBQ0QsT0FBTyxJQUFJLGlCQUFpQixDQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVELFdBQVcsQ0FBQyxLQUFhO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRUQsVUFBVSxDQUFDLElBQU87UUFDaEIsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRUQsV0FBVztRQUNULE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNsQixDQUFDO0lBRUQsZ0JBQWdCO1FBQ2QsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFRCxNQUFNO1FBQ0osT0FBTyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsTUFBTSxDQUFDO0lBQy9CLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBNSVQgTGljZW5zZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxOSBSw6ltaSBWYW4gS2Vpc2JlbGNrXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuICogY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG4gKiBTT0ZUV0FSRS5cbiAqXG4gKi9cblxuaW1wb3J0IHsganVzdCwgTWF5YmUsIG5vdGhpbmcgfSBmcm9tICcuL01heWJlJztcblxuZXhwb3J0IGNsYXNzIExpc3RXaXRoU2VsZWN0aW9uPFQ+IHtcbiAgcHJpdmF0ZSByZWFkb25seSBsMTogUmVhZG9ubHlBcnJheTxUPjtcbiAgcHJpdmF0ZSByZWFkb25seSBsMjogUmVhZG9ubHlBcnJheTxUPjtcbiAgcHJpdmF0ZSByZWFkb25seSBzZWw6IE1heWJlPFQ+O1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IobDE6IFJlYWRvbmx5QXJyYXk8VD4sIGwyOiBSZWFkb25seUFycmF5PFQ+LCBzZWw6IE1heWJlPFQ+KSB7XG4gICAgdGhpcy5sMSA9IGwxO1xuICAgIHRoaXMubDIgPSBsMjtcbiAgICB0aGlzLnNlbCA9IHNlbDtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tQXJyYXk8VD4oYTogUmVhZG9ubHlBcnJheTxUPik6IExpc3RXaXRoU2VsZWN0aW9uPFQ+IHtcbiAgICByZXR1cm4gbmV3IExpc3RXaXRoU2VsZWN0aW9uKGEsIFtdLCBub3RoaW5nKTtcbiAgfVxuXG4gIHN0YXRpYyBlbXB0eTxUPigpOiBMaXN0V2l0aFNlbGVjdGlvbjxUPiB7XG4gICAgcmV0dXJuIG5ldyBMaXN0V2l0aFNlbGVjdGlvbihbXSwgW10sIG5vdGhpbmcpO1xuICB9XG5cbiAgdG9BcnJheSgpOiBSZWFkb25seUFycmF5PFQ+IHtcbiAgICByZXR1cm4gdGhpcy5sMS5jb25jYXQodGhpcy5zZWwubWFwKCh0KSA9PiBbdF0pLndpdGhEZWZhdWx0KFtdKSkuY29uY2F0KHRoaXMubDIpO1xuICB9XG5cbiAgc2VsZWN0KGY6IChpdGVtOiBULCBpbmRleDogbnVtYmVyLCBhcnI6IFJlYWRvbmx5QXJyYXk8VD4pID0+IGJvb2xlYW4pOiBMaXN0V2l0aFNlbGVjdGlvbjxUPiB7XG4gICAgY29uc3QgbCA9IHRoaXMudG9BcnJheSgpO1xuICAgIGNvbnN0IGwxID0gW107XG4gICAgY29uc3QgbDIgPSBbXTtcbiAgICBsZXQgc2VsOiBNYXliZTxUPiA9IG5vdGhpbmc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKHNlbC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ05vdGhpbmcnOiB7XG4gICAgICAgICAgLy8gbm90aGluZyBzZWxlY3RlZCB5ZXQsIHdlIG5lZWQgdG8gdGVzdFxuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZihsW2ldLCBpLCBsKTtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHNlbCA9IGp1c3QobFtpXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGwxLnB1c2gobFtpXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0p1c3QnOiB7XG4gICAgICAgICAgLy8gc2VsZWN0aW9uIGRvbmUgYWxyZWFkeSwgZmVlZCBpbnRvIGwyXG4gICAgICAgICAgbDIucHVzaChsW2ldKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IExpc3RXaXRoU2VsZWN0aW9uPFQ+KGwxLCBsMiwgc2VsKTtcbiAgfVxuXG4gIHNlbGVjdEluZGV4KGluZGV4OiBudW1iZXIpOiBMaXN0V2l0aFNlbGVjdGlvbjxUPiB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0KChpdGVtLCBpKSA9PiBpID09PSBpbmRleCk7XG4gIH1cblxuICBpc1NlbGVjdGVkKGl0ZW06IFQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zZWwubWFwKCh0KSA9PiB0ID09PSBpdGVtKS53aXRoRGVmYXVsdChmYWxzZSk7XG4gIH1cblxuICBnZXRTZWxlY3RlZCgpOiBNYXliZTxUPiB7XG4gICAgcmV0dXJuIHRoaXMuc2VsO1xuICB9XG5cbiAgZ2V0U2VsZWN0ZWRJbmRleCgpOiBNYXliZTxudW1iZXI+IHtcbiAgICByZXR1cm4gdGhpcy5zZWwubWFwKCgpID0+IHRoaXMubDEubGVuZ3RoKTtcbiAgfVxuXG4gIGxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5sZW5ndGg7XG4gIH1cbn1cbiJdfQ==