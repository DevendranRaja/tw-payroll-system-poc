/*
 * MIT License
 *
 * Copyright (c) 2019 RÃ©mi Van Keisbelck
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
/**
 * A Maybe with something inside
 */
export class Just {
    constructor(value) {
        this.type = 'Just';
        this.value = value;
    }
    map(f) {
        return new Just(f(this.value));
    }
    withDefault(_) {
        return this.value;
    }
    withDefaultSupply(f) {
        return this.value;
    }
    orElse(e) {
        return this;
    }
    orElseSupply(f) {
        return this;
    }
    forEach(f) {
        f(this.value);
    }
    andThen(f) {
        return f(this.value);
    }
    toNative() {
        return this.value;
    }
    isJust() {
        return true;
    }
    isNothing() {
        return false;
    }
    filter(f) {
        if (f(this.value)) {
            return this;
        }
        return nothing;
    }
}
/**
 * Wrap an object into a Maybe
 * @param t the object to wrap
 */
export function just(t) {
    return new Just(t);
}
/**
 * An "empty" Maybe
 */
export class Nothing {
    constructor() {
        this.type = 'Nothing';
    }
    map(f) {
        return Nothing.value;
    }
    withDefault(d) {
        return d;
    }
    withDefaultSupply(f) {
        return f();
    }
    orElse(e) {
        return e;
    }
    orElseSupply(f) {
        return f();
    }
    forEach(f) { }
    andThen(f) {
        return nothing;
    }
    toNative() {
        return undefined;
    }
    isJust() {
        return false;
    }
    isNothing() {
        return true;
    }
    filter() {
        return nothing;
    }
}
Nothing.value = new Nothing();
/**
 * The "nothing" maybe.
 */
export const nothing = Nothing.value;
/**
 * Make a Maybe with a "nullable" object
 * @param t the object, or undef, or null
 */
export function maybeOf(t) {
    if (t === undefined || t === null) {
        return nothing;
    }
    else {
        return just(t);
    }
}
/**
 * Apply a function if all the arguments are `Just` a value.
 * @param m1 First Maybe
 * @param m2 Second Maybe
 * @param func the function applied on the values of the Maybes
 */
export function map2(m1, m2, func) {
    return m1
        .map((a) => {
        return m2
            .map((b) => {
            return new Just(func(a, b));
        })
            .withDefault(nothing);
    })
        .withDefault(nothing);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF5YmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvVGVhQ3VwL01heWJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXVCRztBQU9IOztHQUVHO0FBQ0gsTUFBTSxPQUFPLElBQUk7SUFJZixZQUFZLEtBQVE7UUFIWCxTQUFJLEdBQVcsTUFBTSxDQUFDO1FBSTdCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ3JCLENBQUM7SUFFRCxHQUFHLENBQUssQ0FBZTtRQUNyQixPQUFPLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsV0FBVyxDQUFDLENBQUk7UUFDZCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEIsQ0FBQztJQUVELGlCQUFpQixDQUFDLENBQVU7UUFDMUIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7SUFFRCxNQUFNLENBQUMsQ0FBVztRQUNoQixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxZQUFZLENBQUMsQ0FBaUI7UUFDNUIsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsT0FBTyxDQUFDLENBQWlCO1FBQ3ZCLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEIsQ0FBQztJQUVELE9BQU8sQ0FBSyxDQUFzQjtRQUNoQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVELFFBQVE7UUFDTixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEIsQ0FBQztJQUVELE1BQU07UUFDSixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxTQUFTO1FBQ1AsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRUQsTUFBTSxDQUFDLENBQW9CO1FBQ3pCLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ2xCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUNELE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUM7Q0FDRjtBQUVEOzs7R0FHRztBQUNILE1BQU0sVUFBVSxJQUFJLENBQUksQ0FBSTtJQUMxQixPQUFPLElBQUksSUFBSSxDQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3hCLENBQUM7QUFFRDs7R0FFRztBQUNILE1BQU0sT0FBTyxPQUFPO0lBSWxCO1FBSFMsU0FBSSxHQUFjLFNBQVMsQ0FBQztJQUdkLENBQUM7SUFFeEIsR0FBRyxDQUFLLENBQWU7UUFDckIsT0FBTyxPQUFPLENBQUMsS0FBSyxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxXQUFXLENBQUMsQ0FBSTtRQUNkLE9BQU8sQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVELGlCQUFpQixDQUFDLENBQVU7UUFDMUIsT0FBTyxDQUFDLEVBQUUsQ0FBQztJQUNiLENBQUM7SUFFRCxNQUFNLENBQUMsQ0FBVztRQUNoQixPQUFPLENBQUMsQ0FBQztJQUNYLENBQUM7SUFFRCxZQUFZLENBQUMsQ0FBaUI7UUFDNUIsT0FBTyxDQUFDLEVBQUUsQ0FBQztJQUNiLENBQUM7SUFFRCxPQUFPLENBQUMsQ0FBaUIsSUFBUyxDQUFDO0lBRW5DLE9BQU8sQ0FBSyxDQUFzQjtRQUNoQyxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBRUQsUUFBUTtRQUNOLE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFFRCxNQUFNO1FBQ0osT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRUQsU0FBUztRQUNQLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELE1BQU07UUFDSixPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDOztBQTVDTSxhQUFLLEdBQW1CLElBQUksT0FBTyxFQUFFLEFBQWhDLENBQWlDO0FBK0MvQzs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLE9BQU8sR0FBaUIsT0FBTyxDQUFDLEtBQUssQ0FBQztBQUVuRDs7O0dBR0c7QUFDSCxNQUFNLFVBQVUsT0FBTyxDQUFJLENBQXVCO0lBQ2hELElBQUksQ0FBQyxLQUFLLFNBQVMsSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUM7UUFDbEMsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztTQUFNLENBQUM7UUFDTixPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqQixDQUFDO0FBQ0gsQ0FBQztBQUVEOzs7OztHQUtHO0FBQ0gsTUFBTSxVQUFVLElBQUksQ0FBYSxFQUFhLEVBQUUsRUFBYSxFQUFFLElBQTBCO0lBQ3ZGLE9BQU8sRUFBRTtTQUNOLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1FBQ1QsT0FBTyxFQUFFO2FBQ04sR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDVCxPQUFPLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQWMsQ0FBQztRQUMzQyxDQUFDLENBQUM7YUFDRCxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDMUIsQ0FBQyxDQUFDO1NBQ0QsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzFCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTUlUIExpY2Vuc2VcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgUsOpbWkgVmFuIEtlaXNiZWxja1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbiAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuICogU09GVFdBUkUuXG4gKlxuICovXG5cbi8qKlxuICogTWF5YmUgaXMgZWl0aGVyIFwianVzdCBzb21ldGhpbmdcIiwgb3QgXCJub3RoaW5nXCIgIVxuICovXG5leHBvcnQgdHlwZSBNYXliZTxUPiA9IEp1c3Q8VD4gfCBOb3RoaW5nPFQ+O1xuXG4vKipcbiAqIEEgTWF5YmUgd2l0aCBzb21ldGhpbmcgaW5zaWRlXG4gKi9cbmV4cG9ydCBjbGFzcyBKdXN0PFQ+IHtcbiAgcmVhZG9ubHkgdHlwZTogJ0p1c3QnID0gJ0p1c3QnO1xuICByZWFkb25seSB2YWx1ZTogVDtcblxuICBjb25zdHJ1Y3Rvcih2YWx1ZTogVCkge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIG1hcDxUMj4oZjogKHQ6IFQpID0+IFQyKTogTWF5YmU8VDI+IHtcbiAgICByZXR1cm4gbmV3IEp1c3QoZih0aGlzLnZhbHVlKSk7XG4gIH1cblxuICB3aXRoRGVmYXVsdChfOiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cblxuICB3aXRoRGVmYXVsdFN1cHBseShmOiAoKSA9PiBUKTogVCB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cblxuICBvckVsc2UoZTogTWF5YmU8VD4pOiBNYXliZTxUPiB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBvckVsc2VTdXBwbHkoZjogKCkgPT4gTWF5YmU8VD4pOiBNYXliZTxUPiB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBmb3JFYWNoKGY6ICh0OiBUKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgZih0aGlzLnZhbHVlKTtcbiAgfVxuXG4gIGFuZFRoZW48VDI+KGY6ICh0OiBUKSA9PiBNYXliZTxUMj4pOiBNYXliZTxUMj4ge1xuICAgIHJldHVybiBmKHRoaXMudmFsdWUpO1xuICB9XG5cbiAgdG9OYXRpdmUoKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cblxuICBpc0p1c3QoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpc05vdGhpbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZmlsdGVyKGY6ICh0OiBUKSA9PiBib29sZWFuKTogTWF5YmU8VD4ge1xuICAgIGlmIChmKHRoaXMudmFsdWUpKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIG5vdGhpbmc7XG4gIH1cbn1cblxuLyoqXG4gKiBXcmFwIGFuIG9iamVjdCBpbnRvIGEgTWF5YmVcbiAqIEBwYXJhbSB0IHRoZSBvYmplY3QgdG8gd3JhcFxuICovXG5leHBvcnQgZnVuY3Rpb24ganVzdDxUPih0OiBUKTogTWF5YmU8VD4ge1xuICByZXR1cm4gbmV3IEp1c3Q8VD4odCk7XG59XG5cbi8qKlxuICogQW4gXCJlbXB0eVwiIE1heWJlXG4gKi9cbmV4cG9ydCBjbGFzcyBOb3RoaW5nPFQ+IHtcbiAgcmVhZG9ubHkgdHlwZTogJ05vdGhpbmcnID0gJ05vdGhpbmcnO1xuICBzdGF0aWMgdmFsdWU6IE5vdGhpbmc8bmV2ZXI+ID0gbmV3IE5vdGhpbmcoKTtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICBtYXA8VDI+KGY6ICh0OiBUKSA9PiBUMik6IE1heWJlPFQyPiB7XG4gICAgcmV0dXJuIE5vdGhpbmcudmFsdWU7XG4gIH1cblxuICB3aXRoRGVmYXVsdChkOiBUKTogVCB7XG4gICAgcmV0dXJuIGQ7XG4gIH1cblxuICB3aXRoRGVmYXVsdFN1cHBseShmOiAoKSA9PiBUKTogVCB7XG4gICAgcmV0dXJuIGYoKTtcbiAgfVxuXG4gIG9yRWxzZShlOiBNYXliZTxUPik6IE1heWJlPFQ+IHtcbiAgICByZXR1cm4gZTtcbiAgfVxuXG4gIG9yRWxzZVN1cHBseShmOiAoKSA9PiBNYXliZTxUPik6IE1heWJlPFQ+IHtcbiAgICByZXR1cm4gZigpO1xuICB9XG5cbiAgZm9yRWFjaChmOiAodDogVCkgPT4gdm9pZCk6IHZvaWQge31cblxuICBhbmRUaGVuPFQyPihmOiAodDogVCkgPT4gTWF5YmU8VDI+KTogTWF5YmU8VDI+IHtcbiAgICByZXR1cm4gbm90aGluZztcbiAgfVxuXG4gIHRvTmF0aXZlKCk6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBpc0p1c3QoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaXNOb3RoaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZmlsdGVyKCk6IE1heWJlPFQ+IHtcbiAgICByZXR1cm4gbm90aGluZztcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBcIm5vdGhpbmdcIiBtYXliZS5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vdGhpbmc6IE1heWJlPG5ldmVyPiA9IE5vdGhpbmcudmFsdWU7XG5cbi8qKlxuICogTWFrZSBhIE1heWJlIHdpdGggYSBcIm51bGxhYmxlXCIgb2JqZWN0XG4gKiBAcGFyYW0gdCB0aGUgb2JqZWN0LCBvciB1bmRlZiwgb3IgbnVsbFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF5YmVPZjxUPih0OiBUIHwgdW5kZWZpbmVkIHwgbnVsbCk6IE1heWJlPFQ+IHtcbiAgaWYgKHQgPT09IHVuZGVmaW5lZCB8fCB0ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG5vdGhpbmc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGp1c3QodCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIGlmIGFsbCB0aGUgYXJndW1lbnRzIGFyZSBgSnVzdGAgYSB2YWx1ZS5cbiAqIEBwYXJhbSBtMSBGaXJzdCBNYXliZVxuICogQHBhcmFtIG0yIFNlY29uZCBNYXliZVxuICogQHBhcmFtIGZ1bmMgdGhlIGZ1bmN0aW9uIGFwcGxpZWQgb24gdGhlIHZhbHVlcyBvZiB0aGUgTWF5YmVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXAyPFQxLCBUMiwgVDM+KG0xOiBNYXliZTxUMT4sIG0yOiBNYXliZTxUMj4sIGZ1bmM6IChhOiBUMSwgYjogVDIpID0+IFQzKTogTWF5YmU8VDM+IHtcbiAgcmV0dXJuIG0xXG4gICAgLm1hcCgoYSkgPT4ge1xuICAgICAgcmV0dXJuIG0yXG4gICAgICAgIC5tYXAoKGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gbmV3IEp1c3QoZnVuYyhhLCBiKSkgYXMgTWF5YmU8VDM+O1xuICAgICAgICB9KVxuICAgICAgICAud2l0aERlZmF1bHQobm90aGluZyk7XG4gICAgfSlcbiAgICAud2l0aERlZmF1bHQobm90aGluZyk7XG59XG4iXX0=