export function memoize(f, compareFn) {
    let data;
    function invoke(t) {
        const res = f(t);
        data = {
            arg: t,
            res,
        };
        return res;
    }
    const compare = compareFn !== null && compareFn !== void 0 ? compareFn : ((o1, o2) => o1 === o2);
    return (t) => {
        if (data) {
            if (compare(t, data.arg)) {
                return data.res;
            }
            else {
                return invoke(t);
            }
        }
        else {
            return invoke(t);
        }
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVtb2l6ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9UZWFDdXAvTWVtb2l6ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFPQSxNQUFNLFVBQVUsT0FBTyxDQUFNLENBQVMsRUFBRSxTQUFxQztJQUMzRSxJQUFJLElBQTJCLENBQUM7SUFFaEMsU0FBUyxNQUFNLENBQUMsQ0FBRztRQUNqQixNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsSUFBSSxHQUFHO1lBQ0wsR0FBRyxFQUFFLENBQUM7WUFDTixHQUFHO1NBQ0osQ0FBQTtRQUNELE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztJQUVELE1BQU0sT0FBTyxHQUFHLFNBQVMsYUFBVCxTQUFTLGNBQVQsU0FBUyxHQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFFckQsT0FBTyxDQUFDLENBQUcsRUFBRSxFQUFFO1FBQ2IsSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUNULElBQUksT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDekIsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQ2xCLENBQUM7aUJBQU0sQ0FBQztnQkFDTixPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNuQixDQUFDO1FBQ0gsQ0FBQzthQUFNLENBQUM7WUFDTixPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQixDQUFDO0lBQ0gsQ0FBQyxDQUFBO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIEY8VCxSPiA9ICh0OlQpID0+IFI7XG5cbmludGVyZmFjZSBEYXRhPFQsUj4ge1xuICByZWFkb25seSBhcmc6IFQ7XG4gIHJlYWRvbmx5IHJlczogUjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemU8VCxSPihmOiBGPFQsUj4sIGNvbXBhcmVGbj86IChvMTogVCwgbzI6IFQpID0+IGJvb2xlYW4pOiBGPFQsUj4ge1xuICBsZXQgZGF0YTogRGF0YTxULFI+IHwgdW5kZWZpbmVkO1xuXG4gIGZ1bmN0aW9uIGludm9rZSh0OlQpOiBSIHtcbiAgICBjb25zdCByZXMgPSBmKHQpO1xuICAgIGRhdGEgPSB7XG4gICAgICBhcmc6IHQsXG4gICAgICByZXMsXG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBjb25zdCBjb21wYXJlID0gY29tcGFyZUZuID8/ICgobzEsIG8yKSA9PiBvMSA9PT0gbzIpO1xuXG4gIHJldHVybiAodDpUKSA9PiB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGlmIChjb21wYXJlKHQsIGRhdGEuYXJnKSkge1xuICAgICAgICByZXR1cm4gZGF0YS5yZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaW52b2tlKHQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaW52b2tlKHQpO1xuICAgIH1cbiAgfVxufVxuIl19