"use strict";
/*
 * MIT License
 *
 * Copyright (c) 2020 RÃ©mi Van Keisbelck
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
Object.defineProperty(exports, "__esModule", { value: true });
const Dim_1 = require("./Dim");
const Box_1 = require("./Box");
const Pos_1 = require("./Pos");
const Popover_1 = require("./Popover");
describe('popover 2 tests', () => {
    const viewport = Dim_1.dim(100);
    const place_ = (refBox) => (elem) => Popover_1.place(viewport, refBox, elem);
    describe('top left', () => {
        const doPlace = place_(Box_1.box(Pos_1.pos(10, 10), Dim_1.dim(10)));
        test('should align top right', () => {
            expect(doPlace(Dim_1.dim(50))).toEqual(Box_1.box(Pos_1.pos(20, 10), Dim_1.dim(50)));
        });
        test('should translate up if not enough space to align top right', () => {
            expect(doPlace(Dim_1.dim(50, 95))).toEqual(Box_1.box(Pos_1.pos(20, 5), Dim_1.dim(50, 95)));
        });
        test('should fit vertically if too high', () => {
            expect(doPlace(Dim_1.dim(50, 200))).toEqual(Box_1.box(Pos_1.pos(20, 0), Dim_1.dim(50, 100)));
        });
        test("should translate up and left if doesn't fit", () => {
            expect(doPlace(Dim_1.dim(85, 95))).toEqual(Box_1.box(Pos_1.pos(15, 5), Dim_1.dim(85, 95)));
        });
    });
    describe('bottom left', () => {
        const doPlace = place_(Box_1.box(Pos_1.pos(10, 80), Dim_1.dim(10)));
        test('should align bottom right', () => {
            expect(doPlace(Dim_1.dim(50))).toEqual(Box_1.box(Pos_1.pos(20, 40), Dim_1.dim(50)));
        });
        test('shoult fit vertically if too high', () => {
            expect(doPlace(Dim_1.dim(50, 200))).toEqual(Box_1.box(Pos_1.pos(20, 0), Dim_1.dim(50, 100)));
        });
    });
    describe('top right', () => {
        const doPlace = place_(Box_1.box(Pos_1.pos(80, 10), Dim_1.dim(10)));
        test('should align top left', () => {
            expect(doPlace(Dim_1.dim(50))).toEqual(Box_1.box(Pos_1.pos(30, 10), Dim_1.dim(50)));
        });
        test('should translate up if not enough space to aligh top left', () => {
            expect(doPlace(Dim_1.dim(50, 95))).toEqual(Box_1.box(Pos_1.pos(30, 5), Dim_1.dim(50, 95)));
        });
        test('should fit vertically if too high', () => {
            expect(doPlace(Dim_1.dim(50, 200))).toEqual(Box_1.box(Pos_1.pos(30, 0), Dim_1.dim(50, 100)));
        });
    });
    describe('bottom right', () => {
        const doPlace = place_(Box_1.box(Pos_1.pos(80, 80), Dim_1.dim(10)));
        test('should align bottom left', () => {
            expect(doPlace(Dim_1.dim(50))).toEqual(Box_1.box(Pos_1.pos(30, 40), Dim_1.dim(50)));
        });
        test('should fit vertically if too high', () => {
            expect(doPlace(Dim_1.dim(50, 200))).toEqual(Box_1.box(Pos_1.pos(30, 0), Dim_1.dim(50, 100)));
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUG9wb3Zlci50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1BvcG92ZXIudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBdUJHOztBQUVILCtCQUFpQztBQUNqQywrQkFBaUM7QUFDakMsK0JBQTRCO0FBQzVCLHVDQUFrQztBQUVsQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO0lBQy9CLE1BQU0sUUFBUSxHQUFRLFNBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUUvQixNQUFNLE1BQU0sR0FBRyxDQUFDLE1BQVcsRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRSxDQUFDLGVBQUssQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBRTdFLFFBQVEsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1FBQ3hCLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxTQUFHLENBQUMsU0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxTQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWxELElBQUksQ0FBQyx3QkFBd0IsRUFBRSxHQUFHLEVBQUU7WUFDbEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFHLENBQUMsU0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxTQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLDREQUE0RCxFQUFFLEdBQUcsRUFBRTtZQUN0RSxNQUFNLENBQUMsT0FBTyxDQUFDLFNBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFHLENBQUMsU0FBRyxDQUFDLEVBQUUs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TSxDQUFDLE9BQU8sQ0FBQyxTQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBRyxDQUFDLFNBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsU0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxjQUFjLEVBQUUsR0FBRyxFQUFFO1FBQzVCLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxTQUFHLENBQUMsU0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxTQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWxELElBQUksQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7WUFDcEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFHLENBQUMsU0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxTQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLG1DQUFtQyxFQUFFLEdBQUcsRUFBRTtZQUM3QyxNQUFNLENBQUMsT0FBTyxDQUFDLFNBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFHLENBQUMsU0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxTQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTUlUIExpY2Vuc2VcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAgUsOpbWkgVmFuIEtlaXNiZWxja1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbiAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuICogU09GVFdBUkUuXG4gKlxuICovXG5cbmltcG9ydCB7IGRpbSwgRGltIH0gZnJvbSAnLi9EaW0nO1xuaW1wb3J0IHsgQm94LCBib3ggfSBmcm9tICcuL0JveCc7XG5pbXBvcnQgeyBwb3MgfSBmcm9tICcuL1Bvcyc7XG5pbXBvcnQgeyBwbGFjZSB9IGZyb20gJy4vUG9wb3Zlcic7XG5cbmRlc2NyaWJlKCdwb3BvdmVyIDIgdGVzdHMnLCAoKSA9PiB7XG4gIGNvbnN0IHZpZXdwb3J0OiBEaW0gPSBkaW0oMTAwKTtcblxuICBjb25zdCBwbGFjZV8gPSAocmVmQm94OiBCb3gpID0+IChlbGVtOiBEaW0pID0+IHBsYWNlKHZpZXdwb3J0LCByZWZCb3gsIGVsZW0pO1xuXG4gIGRlc2NyaWJlKCd0b3AgbGVmdCcsICgpID0+IHtcbiAgICBjb25zdCBkb1BsYWNlID0gcGxhY2VfKGJveChwb3MoMTAsIDEwKSwgZGltKDEwKSkpO1xuXG4gICAgdGVzdCgnc2hvdWxkIGFsaWduIHRvcCByaWdodCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChkb1BsYWNlKGRpbSg1MCkpKS50b0VxdWFsKGJveChwb3MoMjAsIDEwKSwgZGltKDUwKSkpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHRyYW5zbGF0ZSB1cCBpZiBub3QgZW5vdWdoIHNwYWNlIHRvIGFsaWduIHRvcCByaWdodCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChkb1BsYWNlKGRpbSg1MCwgOTUpKSkudG9FcXVhbChib3gocG9zKDIwLCA1KSwgZGltKDUwLCA5NSkpKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBmaXQgdmVydGljYWxseSBpZiB0b28gaGlnaCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChkb1BsYWNlKGRpbSg1MCwgMjAwKSkpLnRvRXF1YWwoYm94KHBvcygyMCwgMCksIGRpbSg1MCwgMTAwKSkpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCB0cmFuc2xhdGUgdXAgYW5kIGxlZnQgaWYgZG9lc24ndCBmaXRcIiwgKCkgPT4ge1xuICAgICAgZXhwZWN0KGRvUGxhY2UoZGltKDg1LCA5NSkpKS50b0VxdWFsKGJveChwb3MoMTUsIDUpLCBkaW0oODUsIDk1KSkpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYm90dG9tIGxlZnQnLCAoKSA9PiB7XG4gICAgY29uc3QgZG9QbGFjZSA9IHBsYWNlXyhib3gocG9zKDEwLCA4MCksIGRpbSgxMCkpKTtcblxuICAgIHRlc3QoJ3Nob3VsZCBhbGlnbiBib3R0b20gcmlnaHQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZG9QbGFjZShkaW0oNTApKSkudG9FcXVhbChib3gocG9zKDIwLCA0MCksIGRpbSg1MCkpKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsdCBmaXQgdmVydGljYWxseSBpZiB0b28gaGlnaCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChkb1BsYWNlKGRpbSg1MCwgMjAwKSkpLnRvRXF1YWwoYm94KHBvcygyMCwgMCksIGRpbSg1MCwgMTAwKSkpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndG9wIHJpZ2h0JywgKCkgPT4ge1xuICAgIGNvbnN0IGRvUGxhY2UgPSBwbGFjZV8oYm94KHBvcyg4MCwgMTApLCBkaW0oMTApKSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYWxpZ24gdG9wIGxlZnQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZG9QbGFjZShkaW0oNTApKSkudG9FcXVhbChib3gocG9zKDMwLCAxMCksIGRpbSg1MCkpKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB0cmFuc2xhdGUgdXAgaWYgbm90IGVub3VnaCBzcGFjZSB0byBhbGlnaCB0b3AgbGVmdCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChkb1BsYWNlKGRpbSg1MCwgOTUpKSkudG9FcXVhbChib3gocG9zKDMwLCA1KSwgZGltKDUwLCA5NSkpKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBmaXQgdmVydGljYWxseSBpZiB0b28gaGlnaCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChkb1BsYWNlKGRpbSg1MCwgMjAwKSkpLnRvRXF1YWwoYm94KHBvcygzMCwgMCksIGRpbSg1MCwgMTAwKSkpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYm90dG9tIHJpZ2h0JywgKCkgPT4ge1xuICAgIGNvbnN0IGRvUGxhY2UgPSBwbGFjZV8oYm94KHBvcyg4MCwgODApLCBkaW0oMTApKSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYWxpZ24gYm90dG9tIGxlZnQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZG9QbGFjZShkaW0oNTApKSkudG9FcXVhbChib3gocG9zKDMwLCA0MCksIGRpbSg1MCkpKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBmaXQgdmVydGljYWxseSBpZiB0b28gaGlnaCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChkb1BsYWNlKGRpbSg1MCwgMjAwKSkpLnRvRXF1YWwoYm94KHBvcygzMCwgMCksIGRpbSg1MCwgMTAwKSkpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19