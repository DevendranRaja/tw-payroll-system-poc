/*
 * MIT License
 *
 * Copyright (c) 2019 RÃ©mi Van Keisbelck
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
function defaultTeaCupToReduxMessage(msg) {
    const { tag, type } = msg, others = __rest(msg, ["tag", "type"]);
    return Object.assign({ type: type || tag }, others);
}
export function withReduxDevTools(dt, options) {
    const reduxDevtoolsExtension = window.__REDUX_DEVTOOLS_EXTENSION__;
    if (reduxDevtoolsExtension) {
        const reduxDevTools = reduxDevtoolsExtension.connect(options);
        reduxDevTools.subscribe((message) => {
            var _a, _b;
            if (message.type === 'DISPATCH' && message.state) {
                // console.log('DISPATCH', message.payload);
                if (((_a = message.payload) === null || _a === void 0 ? void 0 : _a.type) === 'JUMP_TO_ACTION' || ((_b = message.payload) === null || _b === void 0 ? void 0 : _b.type) === 'JUMP_TO_STATE') {
                    // console.log('travelling to ', message.payload.actionId);
                    dt.travelTo(message.payload.actionId);
                }
            }
        });
        const teacupToReduxMessage = (options === null || options === void 0 ? void 0 : options.teacupToReduxMessage) || defaultTeaCupToReduxMessage;
        dt.addListener((e) => {
            switch (e.tag) {
                case 'init':
                    reduxDevTools.init(e.model);
                    break;
                case 'updated':
                    const action = teacupToReduxMessage(e.msg);
                    reduxDevTools.send(action, e.modelAfter);
                    break;
            }
        });
    }
    return dt;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVkdXhEZXZUb29scy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9UZWFDdXAvUmVkdXhEZXZUb29scy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F1Qkc7Ozs7Ozs7Ozs7OztBQVFILFNBQVMsMkJBQTJCLENBQUMsR0FBUTtJQUMzQyxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksS0FBZ0IsR0FBRyxFQUFkLE1BQU0sVUFBSyxHQUFHLEVBQTlCLGVBQXdCLENBQU0sQ0FBQztJQUNyQyx1QkFDRSxJQUFJLEVBQUUsSUFBSSxJQUFJLEdBQUcsSUFDZCxNQUFNLEVBQ1Q7QUFDSixDQUFDO0FBOEVELE1BQU0sVUFBVSxpQkFBaUIsQ0FDL0IsRUFBd0IsRUFDeEIsT0FBOEI7SUFFOUIsTUFBTSxzQkFBc0IsR0FBNEIsTUFBYyxDQUFDLDRCQUE0QixDQUFDO0lBQ3BHLElBQUksc0JBQXNCLEVBQUUsQ0FBQztRQUMzQixNQUFNLGFBQWEsR0FBRyxzQkFBc0IsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDOUQsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQTZCLEVBQUUsRUFBRTs7WUFDeEQsSUFBSSxPQUFPLENBQUMsSUFBSSxLQUFLLFVBQVUsSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2pELDRDQUE0QztnQkFDNUMsSUFBSSxDQUFBLE1BQUEsT0FBTyxDQUFDLE9BQU8sMENBQUUsSUFBSSxNQUFLLGdCQUFnQixJQUFJLENBQUEsTUFBQSxPQUFPLENBQUMsT0FBTywwQ0FBRSxJQUFJLE1BQUssZUFBZSxFQUFFLENBQUM7b0JBQzVGLDJEQUEyRDtvQkFDM0QsRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUN4QyxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxvQkFBb0IsR0FBRyxDQUFBLE9BQU8sYUFBUCxPQUFPLHVCQUFQLE9BQU8sQ0FBRSxvQkFBb0IsS0FBSSwyQkFBMkIsQ0FBQztRQUMxRixFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDbkIsUUFBUSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQ2QsS0FBSyxNQUFNO29CQUNULGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUM1QixNQUFNO2dCQUNSLEtBQUssU0FBUztvQkFDWixNQUFNLE1BQU0sR0FBRyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzNDLGFBQWEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFDekMsTUFBTTtZQUNWLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxPQUFPLEVBQUUsQ0FBQztBQUNaLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTUlUIExpY2Vuc2VcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgUsOpbWkgVmFuIEtlaXNiZWxja1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbiAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuICogU09GVFdBUkUuXG4gKlxuICovXG5cbmltcG9ydCB7IERldlRvb2xzIH0gZnJvbSAnLi9EZXZUb29scyc7XG5cbmludGVyZmFjZSBSZWR1eE1zZyB7XG4gIHR5cGU6IHN0cmluZztcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFRlYUN1cFRvUmVkdXhNZXNzYWdlKG1zZzogYW55KTogUmVkdXhNc2cge1xuICBjb25zdCB7IHRhZywgdHlwZSwgLi4ub3RoZXJzIH0gPSBtc2c7XG4gIHJldHVybiB7XG4gICAgdHlwZTogdHlwZSB8fCB0YWcsXG4gICAgLi4ub3RoZXJzLFxuICB9O1xufVxuXG5pbnRlcmZhY2UgUmVkdXhEZXZUb29sc01lc3NhZ2Uge1xuICByZWFkb25seSB0eXBlOiAnRElTUEFUQ0gnIHwgJ0FDVElPTicgfCAnSU1QT1JUJyB8ICdFWFBPUlQnIHwgJ1VQREFURScgfCAnU1RBUlQnIHwgJ1NUT1AnO1xuICByZWFkb25seSBwYXlsb2FkPzoge1xuICAgIHJlYWRvbmx5IHR5cGU6XG4gICAgICB8ICdKVU1QX1RPX1NUQVRFJ1xuICAgICAgfCAnSlVNUF9UT19BQ1RJT04nXG4gICAgICB8ICdUT0dHTEVfQUNUSU9OJ1xuICAgICAgfCAnUkVPUkRFUl9BQ1RJT04nXG4gICAgICB8ICdJTVBPUlRfU1RBVEUnXG4gICAgICB8ICdMT0NLX0NIQU5HRVMnXG4gICAgICB8ICdQQVVTRV9SRUNPUkRJTkcnO1xuICAgIHJlYWRvbmx5IGluZGV4OiBudW1iZXI7XG4gICAgcmVhZG9ubHkgYWN0aW9uSWQ6IG51bWJlcjtcbiAgfTtcbiAgcmVhZG9ubHkgc3RhdGU/OiBhbnk7XG59XG5cbmludGVyZmFjZSBSZWR1eERldnRvb2xzIHtcbiAgc3Vic2NyaWJlKGxpc3RlbmVyOiAobWVzc2FnZTogUmVkdXhEZXZUb29sc01lc3NhZ2UpID0+IHZvaWQpOiB2b2lkO1xuICB1bnN1YnNjcmliZSgpOiB2b2lkO1xuICBzZW5kKGFjdGlvbjogc3RyaW5nIHwgUmVkdXhNc2csIHN0YXRlOiBhbnkpOiB2b2lkO1xuICBpbml0KHN0YXRlOiBhbnkpOiB2b2lkO1xuICBlcnJvcihtZXNzYWdlOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlZHV4RGV2VG9vbHNPcHRpb25zIHtcbiAgcmVhZG9ubHkgdGVhY3VwVG9SZWR1eE1lc3NhZ2U6IChtc2c6IGFueSkgPT4gUmVkdXhNc2c7XG4gIHJlYWRvbmx5IG5hbWU/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IGFjdGlvbnNDcmVhdG9ycz86IGFueTsgLy8gVE9ET1xuICByZWFkb25seSBsYXRlbmN5PzogbnVtYmVyO1xuICByZWFkb25seSBtYXhBZ2U/OiBudW1iZXI7XG4gIHJlYWRvbmx5IHRyYWNlPzogYm9vbGVhbjtcbiAgcmVhZG9ubHkgdHJhY2VMaW1pdD86IG51bWJlcjtcbiAgcmVhZG9ubHkgc2VyaWFsaXplPzpcbiAgICB8IGJvb2xlYW5cbiAgICB8IHtcbiAgICAgICAgZGF0ZT86IGJvb2xlYW47XG4gICAgICAgIHJlZ2V4PzogYm9vbGVhbjtcbiAgICAgICAgdW5kZWZpbmVkPzogYm9vbGVhbjtcbiAgICAgICAgZXJyb3I/OiBib29sZWFuO1xuICAgICAgICBzeW1ib2w/OiBib29sZWFuO1xuICAgICAgICBtYXA/OiBib29sZWFuO1xuICAgICAgICBzZXQ/OiBib29sZWFuO1xuICAgICAgICBmdW5jdGlvbj86IGJvb2xlYW4gfCBGdW5jdGlvbjtcbiAgICAgIH07XG4gIGFjdGlvblNhbml0aXplcj8oYWN0aW9uOiBhbnksIGlkOiBudW1iZXIpOiBhbnk7XG4gIHN0YXRlU2FuaXRpemVyPyhzdGF0ZTogYW55LCBpbmRleD86IG51bWJlcik6IGFueTtcbiAgcmVhZG9ubHkgYWN0aW9uc0JsYWNrbGlzdD86IHN0cmluZyB8IHN0cmluZ1tdO1xuICByZWFkb25seSBhY3Rpb25zV2hpdGVsaXN0Pzogc3RyaW5nIHwgc3RyaW5nW107XG4gIHByZWRpY2F0ZT8oc3RhdGU6IGFueSwgYWN0aW9uOiBhbnkpOiBib29sZWFuO1xuICByZWFkb25seSBzaG91bGRSZWNvcmRDaGFuZ2VzPzogYm9vbGVhbjtcbiAgcmVhZG9ubHkgcGF1c2VBY3Rpb25UeXBlPzogc3RyaW5nO1xuICByZWFkb25seSBhdXRvUGF1c2U/OiBib29sZWFuO1xuICByZWFkb25seSBzaG91bGRTdGFydExvY2tlZD86IGJvb2xlYW47XG4gIHJlYWRvbmx5IHNob3VsZEhvdFJlbG9hZD86IGJvb2xlYW47XG4gIHJlYWRvbmx5IHNob3VsZENhdGNoRXJyb3JzPzogYm9vbGVhbjtcbiAgcmVhZG9ubHkgZmVhdHVyZXM/OiB7XG4gICAgcmVhZG9ubHkgcGF1c2U/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IGxvY2s/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IHBlcnNpc3Q/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IGV4cG9ydD86IGJvb2xlYW4gfCAnY3VzdG9tJztcbiAgICByZWFkb25seSBpbXBvcnQ/OiBib29sZWFuIHwgJ2N1c3RvbSc7XG4gICAgcmVhZG9ubHkganVtcD86IGJvb2xlYW47XG4gICAgcmVhZG9ubHkgc2tpcD86IGJvb2xlYW47XG4gICAgcmVhZG9ubHkgcmVvcmRlcj86IGJvb2xlYW47XG4gICAgcmVhZG9ubHkgZGlzcGF0Y2g/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IHRlc3Q/OiBib29sZWFuO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgUmVkdXhEZXZUb29sc0V4dGVuc2lvbiB7XG4gIChvcHRpb25zPzogUmVkdXhEZXZUb29sc09wdGlvbnMpOiBSZWR1eERldnRvb2xzO1xuICBjb25uZWN0KG9wdGlvbnM/OiBSZWR1eERldlRvb2xzT3B0aW9ucyk6IFJlZHV4RGV2dG9vbHM7XG4gIGRpc2Nvbm5lY3QoKTogdm9pZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhSZWR1eERldlRvb2xzPE1vZGVsLCBNc2c+KFxuICBkdDogRGV2VG9vbHM8TW9kZWwsIE1zZz4sXG4gIG9wdGlvbnM/OiBSZWR1eERldlRvb2xzT3B0aW9ucyxcbik6IERldlRvb2xzPE1vZGVsLCBNc2c+IHtcbiAgY29uc3QgcmVkdXhEZXZ0b29sc0V4dGVuc2lvbjogUmVkdXhEZXZUb29sc0V4dGVuc2lvbiA9ICh3aW5kb3cgYXMgYW55KS5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9fO1xuICBpZiAocmVkdXhEZXZ0b29sc0V4dGVuc2lvbikge1xuICAgIGNvbnN0IHJlZHV4RGV2VG9vbHMgPSByZWR1eERldnRvb2xzRXh0ZW5zaW9uLmNvbm5lY3Qob3B0aW9ucyk7XG4gICAgcmVkdXhEZXZUb29scy5zdWJzY3JpYmUoKG1lc3NhZ2U6IFJlZHV4RGV2VG9vbHNNZXNzYWdlKSA9PiB7XG4gICAgICBpZiAobWVzc2FnZS50eXBlID09PSAnRElTUEFUQ0gnICYmIG1lc3NhZ2Uuc3RhdGUpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0RJU1BBVENIJywgbWVzc2FnZS5wYXlsb2FkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGF5bG9hZD8udHlwZSA9PT0gJ0pVTVBfVE9fQUNUSU9OJyB8fCBtZXNzYWdlLnBheWxvYWQ/LnR5cGUgPT09ICdKVU1QX1RPX1NUQVRFJykge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cmF2ZWxsaW5nIHRvICcsIG1lc3NhZ2UucGF5bG9hZC5hY3Rpb25JZCk7XG4gICAgICAgICAgZHQudHJhdmVsVG8obWVzc2FnZS5wYXlsb2FkLmFjdGlvbklkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IHRlYWN1cFRvUmVkdXhNZXNzYWdlID0gb3B0aW9ucz8udGVhY3VwVG9SZWR1eE1lc3NhZ2UgfHwgZGVmYXVsdFRlYUN1cFRvUmVkdXhNZXNzYWdlO1xuICAgIGR0LmFkZExpc3RlbmVyKChlKSA9PiB7XG4gICAgICBzd2l0Y2ggKGUudGFnKSB7XG4gICAgICAgIGNhc2UgJ2luaXQnOlxuICAgICAgICAgIHJlZHV4RGV2VG9vbHMuaW5pdChlLm1vZGVsKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndXBkYXRlZCc6XG4gICAgICAgICAgY29uc3QgYWN0aW9uID0gdGVhY3VwVG9SZWR1eE1lc3NhZ2UoZS5tc2cpO1xuICAgICAgICAgIHJlZHV4RGV2VG9vbHMuc2VuZChhY3Rpb24sIGUubW9kZWxBZnRlcik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGR0O1xufVxuIl19