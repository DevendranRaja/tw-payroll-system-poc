"use strict";
/*
 * Copyright 2018 The Diesel Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MenuTrigger = exports.WrapErrors = exports.ViewErrors = exports.onMenuTriggerClick = exports.ArrayCounter = exports.ViewJsonValue = exports.RendererFactory = void 0;
const carbon_components_react_1 = require("carbon-components-react");
const React = __importStar(require("react"));
const tea_cup_core_1 = require("tea-cup-core");
const tea_pop_core_1 = require("tea-pop-core");
const JsonValue_1 = require("../JsonValue");
const _16_1 = __importDefault(require("@carbon/icons-react/lib/add/16"));
const _16_2 = __importDefault(require("@carbon/icons-react/lib/chevron--down/16"));
const _16_3 = __importDefault(require("@carbon/icons-react/lib/chevron--up/16"));
const _16_4 = __importDefault(require("@carbon/icons-react/lib/overflow-menu--vertical/16"));
class RendererFactory {
    constructor() {
        this.renderers = new Map();
    }
    addRenderer(key, renderer) {
        this.renderers.set(key, renderer);
    }
    getRenderer(key) {
        const renderer = this.renderers.get(key);
        return (0, tea_cup_core_1.maybeOf)(renderer);
    }
}
exports.RendererFactory = RendererFactory;
function ViewJsonValue(p) {
    const { value, rendererFactory } = p;
    const path = p.path.format();
    if (rendererFactory) {
        const customRendererModel = p.model.customRenderers.get(path);
        if (customRendererModel && customRendererModel.type === 'Just') {
            const m = customRendererModel.value;
            const renderer = rendererFactory.getRenderer(m.key);
            if (renderer.type === 'Just') {
                return renderer.value.view({
                    dispatch: (msg) => p.dispatch({
                        tag: 'renderer-child-msg',
                        path,
                        msg,
                    }),
                    model: m.rendererModel,
                    path: p.path,
                    formView: (path, value) => (React.createElement(ViewJsonValue, { model: p.model, path: path, value: value, dispatch: p.dispatch, rendererFactory: rendererFactory, language: p.language })),
                });
            }
        }
    }
    const content = () => {
        switch (value.tag) {
            case 'jv-array':
                return React.createElement(ViewArray, Object.assign({}, p, { value: value }));
            case 'jv-object':
                return React.createElement(ViewObject, Object.assign({}, p, { value: value }));
            case 'jv-boolean':
                return React.createElement(ViewBoolean, Object.assign({}, p, { value: value }));
            case 'jv-null':
                return React.createElement(ViewNull, Object.assign({}, p, { value: value }));
            case 'jv-number':
                return React.createElement(ViewNumber, Object.assign({}, p, { value: value }));
            case 'jv-string':
                return React.createElement(ViewString, Object.assign({}, p, { value: value }));
        }
    };
    return (React.createElement("div", { className: 'value', "data-path": p.path.format() }, content()));
}
exports.ViewJsonValue = ViewJsonValue;
function ViewObject(p) {
    const { model, value, dispatch, path, renderOptions } = p;
    const { properties } = value;
    const { t } = model;
    const isAddingProp = p.model.adding.isJust();
    let addSection = React.createElement(React.Fragment, null);
    model.adding.forEach((addingState) => {
        // are we owning ?
        const { ownerPath } = addingState;
        if (path.equals(ownerPath)) {
            addSection = (React.createElement("div", { className: "add-prop-form" },
                React.createElement(carbon_components_react_1.TextInput, { labelText: t('propertyNameLabel', {
                        path: path.format('.'),
                    }).toString(), hideLabel: true, id: 'property-name-editor', placeholder: t('propertyNamePlaceholder'), value: addingState.addingPropName, onChange: (e) => dispatch({
                        tag: 'new-property-name-changed',
                        value: e.target.value,
                    }), onKeyDown: (e) => {
                        dispatch({
                            tag: 'new-property-name-key-down',
                            key: e.key,
                        });
                    }, invalidText: t('propertyAlreadyExists'), invalid: addingState.isDuplicate }),
                React.createElement("div", { className: 'buttons-row' },
                    React.createElement("div", { className: "spacer" }),
                    React.createElement(carbon_components_react_1.Button, { kind: 'primary', disabled: addingState.addingPropName === '' || addingState.isDuplicate, onClick: () => dispatch({ tag: 'add-prop-ok-cancel-clicked', ok: true }) }, "Add"),
                    React.createElement(carbon_components_react_1.Button, { kind: 'secondary', onClick: () => dispatch({ tag: 'add-prop-ok-cancel-clicked', ok: false }) }, "Cancel"))));
        }
    });
    const addingOwnerPath = model.adding.map((a) => a.ownerPath);
    const existingPropertyNames = new Set(properties.map((p) => p.name));
    return (React.createElement("div", { className: "jv-object" },
        properties.length === 0 ? (React.createElement("div", { className: "empty-obj" }, t('emptyObject'))) : (React.createElement(React.Fragment, null)),
        properties.map((prop, propIndex) => {
            const propertyPath = p.path.append(prop.name);
            const disabled = isAddingProp &&
                addingOwnerPath
                    .map((ownerPath) => {
                    return !propertyPath.isParentOf(ownerPath);
                })
                    .withDefault(false);
            const propNameClass = ['object-prop'].concat(disabled ? ['disabled'] : ['']);
            const isCollapsed = model.collapsedPaths.has(propertyPath.format());
            return (React.createElement("div", { className: propNameClass.join(' '), key: prop.name + propIndex },
                React.createElement("div", { className: 'prop-name-row' },
                    !(renderOptions === null || renderOptions === void 0 ? void 0 : renderOptions.hideCollapsiblePanel) && (React.createElement("div", { className: "prop-expand" },
                        React.createElement(ExpandCollapseButton, { collapsed: isCollapsed, dispatch: dispatch, path: propertyPath, t: t }))),
                    React.createElement("div", { className: 'prop-name' }, prop.name),
                    React.createElement(ArrayCounter, { value: prop.value }),
                    React.createElement("div", { className: 'prop-menu' },
                        React.createElement(MenuTrigger, { dispatch: dispatch, path: propertyPath, disabled: isAddingProp, t: t, renderOptions: renderOptions }))),
                isCollapsed ? (React.createElement(React.Fragment, null)) : (React.createElement("div", { className: "prop-value" },
                    React.createElement(ViewJsonValue, Object.assign({}, p, { path: propertyPath, value: prop.value, renderOptions: renderOptions }))))));
        }),
        React.createElement(ViewErrors, { errors: getErrorsAtPath(p) }),
        React.createElement("div", null, addSection),
        React.createElement("div", null, (0, tea_cup_core_1.maybeOf)(model.propertiesToAdd.get(p.path.format()))
            .map((propNames) => (React.createElement(React.Fragment, null, propNames
            .filter((propName) => !existingPropertyNames.has(propName))
            .sort()
            .map((propName) => (React.createElement("div", { className: "add-prop-row", key: propName },
            React.createElement(carbon_components_react_1.Button, { renderIcon: _16_1.default, kind: 'ghost', onClick: () => dispatch({
                    tag: 'add-property-btn-clicked',
                    path: p.path,
                    propertyName: propName,
                }) }, propName)))))))
            .withDefault(React.createElement(React.Fragment, null)))));
}
function ArrayCounter(props) {
    if (props.value.tag === 'jv-array') {
        return (React.createElement("div", { className: "array-counter" },
            React.createElement(carbon_components_react_1.Tag, null, props.value.elems.length)));
    }
    return React.createElement(React.Fragment, null);
}
exports.ArrayCounter = ArrayCounter;
function ExpandCollapseButton(props) {
    return (React.createElement(carbon_components_react_1.Button, { kind: 'ghost', renderIcon: props.collapsed ? _16_3.default : _16_2.default, iconDescription: props.t(props.collapsed ? 'icon.expand' : 'icon.collapse'), 
        // disabled={disabled}
        size: 'sm', tooltipPosition: 'right', hasIconOnly: true, onClick: () => props.dispatch({
            tag: 'toggle-expand-collapse',
            path: props.path,
        }) }));
}
function ViewArray(p) {
    const { dispatch, path, value, model, renderOptions } = p;
    const { t } = model;
    const isAdding = p.model.adding.isJust();
    return (React.createElement(exports.WrapErrors, Object.assign({}, p),
        React.createElement("div", { className: "jv-array" }, value.elems.length === 0 ? (React.createElement("div", { className: "empty-obj" }, t('emptyArray'))) : (React.createElement(React.Fragment, null, value.elems.map((elemValue, elemIndex) => {
            const elemPath = path.append(elemIndex.toString());
            const isCollapsed = p.model.collapsedPaths.has(elemPath.format());
            return (React.createElement("div", { className: 'array-elem', key: `value-${elemIndex}` },
                React.createElement("div", { className: 'array-elem-head' },
                    !(renderOptions === null || renderOptions === void 0 ? void 0 : renderOptions.hideCollapsiblePanel) && (React.createElement("div", { className: "prop-expand" },
                        React.createElement(ExpandCollapseButton, { collapsed: isCollapsed, dispatch: dispatch, path: elemPath, t: t }))),
                    React.createElement("div", { className: 'elem-name' },
                        "#",
                        elemIndex),
                    React.createElement("div", { className: 'prop-menu' },
                        React.createElement(MenuTrigger, { dispatch: dispatch, path: elemPath, disabled: isAdding, t: t, renderOptions: renderOptions }))),
                isCollapsed ? (React.createElement(React.Fragment, null)) : (React.createElement("div", { className: 'elem-value' },
                    React.createElement(ViewJsonValue, Object.assign({}, p, { path: elemPath, value: elemValue, renderOptions: renderOptions }))))));
        }))))));
}
function dispatchUpdateProperty(p, newValue) {
    p.dispatch({
        tag: 'update-property',
        path: p.path,
        value: newValue,
    });
}
function ViewNumber(p) {
    const { t } = p.model;
    return (React.createElement(carbon_components_react_1.TextInput, { labelText: t('numberValueLabel', { path: p.path.format('.') }).toString(), hideLabel: true, id: 'input-' + p.path.format('_'), value: p.value.value, disabled: p.model.adding.isJust(), invalidText: errorsToInvalidText(p), invalid: isInvalid(p), onChange: (evt) => {
            dispatchUpdateProperty(p, {
                tag: 'jv-number',
                value: evt.target.value,
            });
        } }));
}
function errorsToInvalidText(p) {
    return getErrorsAtPath(p)
        .map((e) => e.message)
        .join(', ');
}
function getErrorsAtPath(p) {
    var _a;
    return (_a = p.model.errors.get(p.path.format())) !== null && _a !== void 0 ? _a : [];
}
function isInvalid(p) {
    return getErrorsAtPath(p).length > 0;
}
function ViewStringDefault(p) {
    const { t } = p.model;
    return (React.createElement(carbon_components_react_1.TextInput, { labelText: t('stringValueLabel', { path: p.path.format('.') }).toString(), hideLabel: true, id: 'input-' + p.path.format('_'), type: "text", value: p.value.value, disabled: p.model.adding.isJust(), invalidText: errorsToInvalidText(p), invalid: isInvalid(p), placeholder: t('stringValuePlaceholder'), onChange: (evt) => {
            const newStr = evt.target.value;
            dispatchUpdateProperty(p, { tag: 'jv-string', value: newStr });
        } }));
}
function ViewString(p) {
    var _a, _b;
    const fmtPath = p.path.format();
    const formats = (_a = p.model.formats.get(fmtPath)) !== null && _a !== void 0 ? _a : [];
    if (formats.length === 0) {
        // no formats, check for proposals (enum, examples etc)
        const proposals = (_b = p.model.comboBoxes.get(fmtPath)) !== null && _b !== void 0 ? _b : [];
        if (proposals.length === 0) {
            return React.createElement(ViewStringDefault, Object.assign({}, p));
        }
        else {
            return ViewStringWithCombo(Object.assign(Object.assign({}, p), { proposals }));
        }
    }
    else {
        // we have formats !
        return React.createElement(ViewStringWithFormats, Object.assign({}, p, { formats: formats }));
    }
}
function ViewStringWithCombo(p) {
    const { t } = p.model;
    return (React.createElement(carbon_components_react_1.ComboBox, { id: 'input-' + p.path.format('_'), ariaLabel: t('stringValueComboLabel', {
            path: p.path.format('.'),
        }).toString(), disabled: p.model.adding.isJust(), invalidText: errorsToInvalidText(p), invalid: isInvalid(p), items: p.proposals, value: p.value.value, selectedItem: p.value.value, placeholder: '', onChange: (item) => {
            var _a;
            dispatchUpdateProperty(p, {
                tag: 'jv-string',
                value: (_a = item.selectedItem) !== null && _a !== void 0 ? _a : '',
            });
        }, onInputChange: (text) => {
            dispatchUpdateProperty(p, {
                tag: 'jv-string',
                value: text !== null && text !== void 0 ? text : '',
            });
        } }));
}
function MyTimePicker(props) {
    const fmtPath = props.path.format('_');
    const { onChange, value, isInvalid, invalidText, t } = props;
    return (React.createElement(carbon_components_react_1.TimePicker, { id: 'time-picker-' + fmtPath, className: 'time-picker', onChange: (e) => {
            const t = new MyTime(value);
            const replaced = t.setTime(e.target.value);
            onChange(replaced.fullTime);
        }, pattern: "([0-1]\\d|2[0-3]):([0-5]\\d)(:[0-5]\\d(\\.(\\d{1,3}))?)?", maxLength: 12, invalidText: invalidText, invalid: isInvalid, value: new MyTime(value).time },
        React.createElement("div", { className: 'time-picker-offset-wrapper' },
            React.createElement(carbon_components_react_1.TimePickerSelect, { id: 'time-picker-select' + fmtPath, "aria-label": t('timeValueLabel', {
                    path: props.path.format('.'),
                }).toString(), labelText: '', onChange: (event) => {
                    const offset = event.target.value;
                    const t = new MyTime(value);
                    onChange(t.setOffset(offset).fullTime);
                }, value: new MyTime(value).offset }, [React.createElement(carbon_components_react_1.SelectItem, { text: '', value: '', key: 'item' })].concat(allOffsets.map((offset, i) => (React.createElement(carbon_components_react_1.SelectItem, { value: offset, text: offset, key: 'item-' + i }))))))));
}
function languageToPickerLocale(x) {
    const parts = x.split('-');
    // @ts-ignore
    return parts[0];
}
function MyDatePicker(props) {
    const fmtPath = props.path.format('_');
    const { t } = props;
    return (React.createElement(carbon_components_react_1.DatePicker, { id: 'date-picker-' + fmtPath, datePickerType: "single", dateFormat: 'Y-m-d', onChange: (dates, str) => {
            props.onChange(str);
        }, value: props.value, locale: languageToPickerLocale(props.language) },
        React.createElement(carbon_components_react_1.DatePickerInput, { id: 'input-' + fmtPath, "aria-label": t('dateValueLabel', {
                path: props.path.format('.'),
            }).toString(), labelText: '', hideLabel: true, autoComplete: 'off', value: props.value, onChange: (e) => {
                props.onChange(e.target.value);
            }, invalidText: props.invalidText, invalid: props.isInvalid })));
}
function ViewStringWithFormats(p) {
    const { formats } = p;
    switch (formats.length) {
        case 0:
            return React.createElement(ViewStringDefault, Object.assign({}, p));
        case 1: {
            const format = formats[0];
            switch (format) {
                case 'date': {
                    return (React.createElement(MyDatePicker, { path: p.path, value: p.value.value, onChange: (s) => p.dispatch({
                            tag: 'update-property',
                            path: p.path,
                            value: (0, JsonValue_1.jvString)(s),
                        }), isInvalid: isInvalid(p), invalidText: errorsToInvalidText(p), t: p.model.t, language: p.language }));
                }
                case 'date-time': {
                    const invalid = isInvalid(p);
                    const dt = new MyDateTime(p.value.value);
                    return (React.createElement("div", { className: 'date-time-picker' },
                        React.createElement("div", { className: 'date-time-picker__date' },
                            React.createElement(MyDatePicker, { path: p.path, value: dt.date, onChange: (s) => {
                                    const dt2 = dt.setDate(s);
                                    p.dispatch({
                                        tag: 'update-property',
                                        path: p.path,
                                        value: (0, JsonValue_1.jvString)(dt2.dateTime),
                                    });
                                }, isInvalid: invalid, invalidText: errorsToInvalidText(p), t: p.model.t, language: p.language })),
                        React.createElement("div", { className: 'date-time-picker__time' },
                            React.createElement(MyTimePicker, { path: p.path, onChange: (s) => {
                                    const dt2 = dt.setTime(s);
                                    p.dispatch({
                                        tag: 'update-property',
                                        path: p.path,
                                        value: (0, JsonValue_1.jvString)(dt2.dateTime),
                                    });
                                }, value: dt.time.fullTime, isInvalid: invalid, invalidText: errorsToInvalidText(p), t: p.model.t }))));
                }
                case 'time': {
                    return (React.createElement(MyTimePicker, { path: p.path, onChange: (s) => p.dispatch({
                            tag: 'update-property',
                            path: p.path,
                            value: (0, JsonValue_1.jvString)(s),
                        }), value: p.value.value, isInvalid: isInvalid(p), invalidText: errorsToInvalidText(p), t: p.model.t }));
                }
                default:
                    return React.createElement(ViewStringDefault, Object.assign({}, p));
            }
        }
        default: {
            return React.createElement(ViewStringDefault, Object.assign({}, p));
        }
    }
}
function ViewBoolean(p) {
    const { t } = p.model;
    return (React.createElement(exports.WrapErrors, Object.assign({}, p),
        React.createElement("div", { className: "checkbox-wrapper" },
            React.createElement(carbon_components_react_1.Checkbox, { labelText: t('booleanValueLabel', {
                    path: p.path.format('.'),
                }).toString(), hideLabel: true, id: 'input-' + p.path.format('_'), checked: p.value.value, disabled: p.model.adding.isJust(), onChange: () => {
                    dispatchUpdateProperty(p, {
                        tag: 'jv-boolean',
                        value: !p.value.value,
                    });
                } }))));
}
function ViewNull(p) {
    const classes = ['js-null']
        .concat(isInvalid(p) ? ['form-error'] : [])
        .join(' ');
    return (React.createElement(exports.WrapErrors, Object.assign({}, p),
        React.createElement("div", { className: classes }, "null")));
}
const onMenuTriggerClick = (dispatch, propertyPath) => (e) => {
    const btnBox = e.target;
    if (btnBox) {
        const rb = (0, tea_pop_core_1.box)((0, tea_pop_core_1.pos)(e.clientX, e.clientY), tea_pop_core_1.Dim.zero);
        dispatch({
            tag: 'menu-trigger-clicked',
            path: propertyPath,
            refBox: rb, //box(rb.p.add(pos(rb.d.w / 2, rb.d.h / 2)), Dim.zero),
        });
    }
};
exports.onMenuTriggerClick = onMenuTriggerClick;
function ViewErrors(props) {
    return props.errors.length > 0 ? (React.createElement("div", { className: "form-errors" }, props.errors.map((e) => e.message).join(', '))) : (React.createElement(React.Fragment, null));
}
exports.ViewErrors = ViewErrors;
const WrapErrors = (p) => {
    const errorsAtPath = getErrorsAtPath(p);
    return (React.createElement(React.Fragment, null,
        p.children,
        errorsAtPath.length > 0 ? React.createElement(ViewErrors, { errors: errorsAtPath }) : React.createElement(React.Fragment, null)));
};
exports.WrapErrors = WrapErrors;
function MenuTrigger(props) {
    const { disabled, path, dispatch, t, renderOptions } = props;
    return (React.createElement(carbon_components_react_1.Button, { iconDescription: t('icon.openMenu'), disabled: disabled, size: 'sm', kind: 'ghost', renderIcon: _16_4.default, tooltipPosition: 'left', hasIconOnly: true, onClick: (0, exports.onMenuTriggerClick)(dispatch, path), style: {
            overflow: (renderOptions === null || renderOptions === void 0 ? void 0 : renderOptions.hideMenuTooltip) ? 'hidden' : undefined,
        } }));
}
exports.MenuTrigger = MenuTrigger;
const allOffsets = [
    'Z',
    '+01:00',
    '+02:00',
    '+03:00',
    '+04:00',
    '+04:30',
    '+05:00',
    '+05:30',
    '+05:45',
    '+06:00',
    '+06:30',
    '+07:00',
    '+08:00',
    '+08:45',
    '+09:00',
    '+09:30',
    '+10:00',
    '+10:30',
    '+11:00',
    '+12:00',
    '+12:45',
    '+13:00',
    '+14:00',
    '-01:00',
    '-02:00',
    '-02:30',
    '-03:00',
    '-04:00',
    '-05:00',
    '-06:00',
    '-07:00',
    '-08:00',
    '-09:00',
    '-09:30',
    '-10:00',
    '-11:00',
    '-12:00',
];
class MyDateTime {
    constructor(dateTime) {
        this.dateTime = dateTime;
        this.date = '';
        this.time = new MyTime('');
        const sepIndex = dateTime.indexOf('T');
        if (sepIndex !== -1) {
            // separator found, extract date and time parts
            this.date = dateTime.substring(0, sepIndex);
            this.time = new MyTime(dateTime.substring(sepIndex + 1));
        }
    }
    setDate(date) {
        return new MyDateTime(date + 'T' + this.time.fullTime);
    }
    setTime(time) {
        return new MyDateTime(this.date + 'T' + time);
    }
}
class MyTime {
    constructor(fullTime) {
        this.fullTime = fullTime;
        this.time = fullTime;
        this.offset = '';
        for (let i = 0; i < allOffsets.length; i++) {
            const offset = allOffsets[i];
            if (fullTime.endsWith(offset)) {
                this.time = fullTime.substring(0, fullTime.length - offset.length);
                this.offset = offset;
                break;
            }
        }
    }
    setTime(time) {
        return new MyTime(time + this.offset);
    }
    setOffset(offset) {
        return new MyTime(this.time + offset);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVuZGVyZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcmVuZGVyZXIvUmVuZGVyZXIudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7R0FjRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHSCxxRUFZaUM7QUFDakMsNkNBQStCO0FBQy9CLCtDQUErRDtBQUMvRCwrQ0FBNkM7QUFDN0MsNENBU3NCO0FBS3RCLHlFQUFtRDtBQUNuRCxtRkFBcUU7QUFDckUsaUZBQWlFO0FBQ2pFLDZGQUF3RjtBQTBCeEYsTUFBYSxlQUFlO0lBQTVCO1FBQ1UsY0FBUyxHQUFvQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBVWpFLENBQUM7SUFSQyxXQUFXLENBQWEsR0FBVyxFQUFFLFFBQThCO1FBQ2pFLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQsV0FBVyxDQUFhLEdBQVc7UUFDakMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekMsT0FBTyxJQUFBLHNCQUFPLEVBQUMsUUFBZ0MsQ0FBQyxDQUFDO0lBQ25ELENBQUM7Q0FDRjtBQVhELDBDQVdDO0FBRUQsU0FBZ0IsYUFBYSxDQUMzQixDQUE0QjtJQUU1QixNQUFNLEVBQUUsS0FBSyxFQUFFLGVBQWUsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUVyQyxNQUFNLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQzdCLElBQUksZUFBZSxFQUFFO1FBQ25CLE1BQU0sbUJBQW1CLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlELElBQUksbUJBQW1CLElBQUksbUJBQW1CLENBQUMsSUFBSSxLQUFLLE1BQU0s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QUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDO0lBQ3hDLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgRGllc2VsIEF1dGhvcnNcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgSnNWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICdAZGllc2VsLXBhcnNlci9qc29uLXNjaGVtYS1mYWNhZGUtdHMnO1xuaW1wb3J0IHtcbiAgQnV0dG9uLFxuICBDaGVja2JveCxcbiAgQ29tYm9Cb3gsXG4gIERhdGVQaWNrZXIsXG4gIERhdGVQaWNrZXJJbnB1dCxcbiAgRGF0ZVBpY2tlclByb3BzLFxuICBTZWxlY3RJdGVtLFxuICBUYWcsXG4gIFRleHRJbnB1dCxcbiAgVGltZVBpY2tlcixcbiAgVGltZVBpY2tlclNlbGVjdCxcbn0gZnJvbSAnY2FyYm9uLWNvbXBvbmVudHMtcmVhY3QnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ21kLCBEaXNwYXRjaGVyLCBNYXliZSwgbWF5YmVPZiB9IGZyb20gJ3RlYS1jdXAtY29yZSc7XG5pbXBvcnQgeyBib3gsIERpbSwgcG9zIH0gZnJvbSAndGVhLXBvcC1jb3JlJztcbmltcG9ydCB7XG4gIEpzb25WYWx1ZSxcbiAgSnZBcnJheSxcbiAgSnZCb29sZWFuLFxuICBKdk51bGwsXG4gIEp2TnVtYmVyLFxuICBKdk9iamVjdCxcbiAganZTdHJpbmcsXG4gIEp2U3RyaW5nLFxufSBmcm9tICcuLi9Kc29uVmFsdWUnO1xuaW1wb3J0IHsgSnNQYXRoIH0gZnJvbSAnLi4vSnNQYXRoJztcbmltcG9ydCB7IEN1c3RvbVJlbmRlcmVyTW9kZWwsIE1vZGVsIGFzIEZvcm1Nb2RlbCB9IGZyb20gJy4uL01vZGVsJztcbmltcG9ydCB7IE1zZyB9IGZyb20gJy4uL01zZyc7XG5cbmltcG9ydCBBZGQxNiBmcm9tICdAY2FyYm9uL2ljb25zLXJlYWN0L2xpYi9hZGQvMTYnO1xuaW1wb3J0IENoZXZyb25Eb3duMTYgZnJvbSAnQGNhcmJvbi9pY29ucy1yZWFjdC9saWIvY2hldnJvbi0tZG93bi8xNic7XG5pbXBvcnQgQ2hldnJvblVwMTYgZnJvbSAnQGNhcmJvbi9pY29ucy1yZWFjdC9saWIvY2hldnJvbi0tdXAvMTYnO1xuaW1wb3J0IE92ZXJmbG93TWVudVZlcnRpY2FsMTYgZnJvbSAnQGNhcmJvbi9pY29ucy1yZWFjdC9saWIvb3ZlcmZsb3ctbWVudS0tdmVydGljYWwvMTYnO1xuaW1wb3J0IHsgVEZ1bmN0aW9uIH0gZnJvbSAnaTE4bmV4dCc7XG5pbXBvcnQgeyBWaWV3VmFsdWVQcm9wcyB9IGZyb20gJy4vVmlld1ZhbHVlUHJvcHMnO1xuaW1wb3J0IHsgUmVuZGVyT3B0aW9ucyB9IGZyb20gJy4uL1JlbmRlck9wdGlvbnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlcmVySW5pdEFyZ3M8TW9kZWw+IHtcbiAgcmVhZG9ubHkgcGF0aDogSnNQYXRoO1xuICByZWFkb25seSBmb3JtTW9kZWw6IEZvcm1Nb2RlbDtcbiAgcmVhZG9ubHkgdmFsdWU6IEpzb25WYWx1ZTtcbiAgcmVhZG9ubHkgbW9kZWw6IE1heWJlPE1vZGVsPjtcbiAgcmVhZG9ubHkgc2NoZW1hOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyZXJWaWV3QXJnczxNb2RlbCwgTXNnPiB7XG4gIHJlYWRvbmx5IGRpc3BhdGNoOiBEaXNwYXRjaGVyPE1zZz47XG4gIHJlYWRvbmx5IG1vZGVsOiBNb2RlbDtcbiAgcmVhZG9ubHkgcGF0aDogSnNQYXRoO1xuICByZWFkb25seSBmb3JtVmlldzogKHBhdGg6IEpzUGF0aCwgdmFsdWU6IEpzb25WYWx1ZSkgPT4gUmVhY3QuUmVhY3RFbGVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlcmVyPE1vZGVsLCBNc2c+IHtcbiAgcmVpbml0KGFyZ3M6IFJlbmRlcmVySW5pdEFyZ3M8TW9kZWw+KTogW01vZGVsLCBDbWQ8TXNnPl07XG4gIHZpZXcoYXJnczogUmVuZGVyZXJWaWV3QXJnczxNb2RlbCwgTXNnPik6IFJlYWN0LlJlYWN0RWxlbWVudDtcbiAgdXBkYXRlKG1zZzogTXNnLCBtb2RlbDogTW9kZWwpOiBbTW9kZWwsIENtZDxNc2c+LCBNYXliZTxKc29uVmFsdWU+XTtcbn1cblxuZXhwb3J0IGNsYXNzIFJlbmRlcmVyRmFjdG9yeSB7XG4gIHByaXZhdGUgcmVuZGVyZXJzOiBNYXA8c3RyaW5nLCBSZW5kZXJlcjxhbnksIGFueT4+ID0gbmV3IE1hcCgpO1xuXG4gIGFkZFJlbmRlcmVyPE1vZGVsLCBNc2c+KGtleTogc3RyaW5nLCByZW5kZXJlcjogUmVuZGVyZXI8TW9kZWwsIE1zZz4pIHtcbiAgICB0aGlzLnJlbmRlcmVycy5zZXQoa2V5LCByZW5kZXJlcik7XG4gIH1cblxuICBnZXRSZW5kZXJlcjxNb2RlbCwgTXNnPihrZXk6IHN0cmluZyk6IE1heWJlPFJlbmRlcmVyPE1vZGVsLCBNc2c+PiB7XG4gICAgY29uc3QgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVycy5nZXQoa2V5KTtcbiAgICByZXR1cm4gbWF5YmVPZihyZW5kZXJlciBhcyBSZW5kZXJlcjxNb2RlbCwgTXNnPik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFZpZXdKc29uVmFsdWUoXG4gIHA6IFZpZXdWYWx1ZVByb3BzPEpzb25WYWx1ZT4sXG4pOiBSZWFjdC5SZWFjdEVsZW1lbnQge1xuICBjb25zdCB7IHZhbHVlLCByZW5kZXJlckZhY3RvcnkgfSA9IHA7XG5cbiAgY29uc3QgcGF0aCA9IHAucGF0aC5mb3JtYXQoKTtcbiAgaWYgKHJlbmRlcmVyRmFjdG9yeSkge1xuICAgIGNvbnN0IGN1c3RvbVJlbmRlcmVyTW9kZWwgPSBwLm1vZGVsLmN1c3RvbVJlbmRlcmVycy5nZXQocGF0aCk7XG4gICAgaWYgKGN1c3RvbVJlbmRlcmVyTW9kZWwgJiYgY3VzdG9tUmVuZGVyZXJNb2RlbC50eXBlID09PSAnSnVzdCcpIHtcbiAgICAgIGNvbnN0IG06IEN1c3RvbVJlbmRlcmVyTW9kZWwgPSBjdXN0b21SZW5kZXJlck1vZGVsLnZhbHVlO1xuICAgICAgY29uc3QgcmVuZGVyZXIgPSByZW5kZXJlckZhY3RvcnkuZ2V0UmVuZGVyZXIobS5rZXkpO1xuICAgICAgaWYgKHJlbmRlcmVyLnR5cGUgPT09ICdKdXN0Jykge1xuICAgICAgICByZXR1cm4gcmVuZGVyZXIudmFsdWUudmlldyh7XG4gICAgICAgICAgZGlzcGF0Y2g6IChtc2c6IGFueSkgPT5cbiAgICAgICAgICAgIHAuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICB0YWc6ICdyZW5kZXJlci1jaGlsZC1tc2cnLFxuICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICBtc2csXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICBtb2RlbDogbS5yZW5kZXJlck1vZGVsLFxuICAgICAgICAgIHBhdGg6IHAucGF0aCxcbiAgICAgICAgICBmb3JtVmlldzogKHBhdGg6IEpzUGF0aCwgdmFsdWU6IEpzb25WYWx1ZSkgPT4gKFxuICAgICAgICAgICAgPFZpZXdKc29uVmFsdWVcbiAgICAgICAgICAgICAgbW9kZWw9e3AubW9kZWx9XG4gICAgICAgICAgICAgIHBhdGg9e3BhdGh9XG4gICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgICAgZGlzcGF0Y2g9e3AuZGlzcGF0Y2h9XG4gICAgICAgICAgICAgIHJlbmRlcmVyRmFjdG9yeT17cmVuZGVyZXJGYWN0b3J5fVxuICAgICAgICAgICAgICBsYW5ndWFnZT17cC5sYW5ndWFnZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY29udGVudCA9ICgpID0+IHtcbiAgICBzd2l0Y2ggKHZhbHVlLnRhZykge1xuICAgICAgY2FzZSAnanYtYXJyYXknOlxuICAgICAgICByZXR1cm4gPFZpZXdBcnJheSB7Li4ucH0gdmFsdWU9e3ZhbHVlfSAvPjtcbiAgICAgIGNhc2UgJ2p2LW9iamVjdCc6XG4gICAgICAgIHJldHVybiA8Vmlld09iamVjdCB7Li4ucH0gdmFsdWU9e3ZhbHVlfSAvPjtcbiAgICAgIGNhc2UgJ2p2LWJvb2xlYW4nOlxuICAgICAgICByZXR1cm4gPFZpZXdCb29sZWFuIHsuLi5wfSB2YWx1ZT17dmFsdWV9IC8+O1xuICAgICAgY2FzZSAnanYtbnVsbCc6XG4gICAgICAgIHJldHVybiA8Vmlld051bGwgey4uLnB9IHZhbHVlPXt2YWx1ZX0gLz47XG4gICAgICBjYXNlICdqdi1udW1iZXInOlxuICAgICAgICByZXR1cm4gPFZpZXdOdW1iZXIgey4uLnB9IHZhbHVlPXt2YWx1ZX0gLz47XG4gICAgICBjYXNlICdqdi1zdHJpbmcnOlxuICAgICAgICByZXR1cm4gPFZpZXdTdHJpbmcgey4uLnB9IHZhbHVlPXt2YWx1ZX0gLz47XG4gICAgfVxuICB9O1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXsndmFsdWUnfSBkYXRhLXBhdGg9e3AucGF0aC5mb3JtYXQoKX0+XG4gICAgICB7Y29udGVudCgpfVxuICAgIDwvZGl2PlxuICApO1xufVxuXG5mdW5jdGlvbiBWaWV3T2JqZWN0KHA6IFZpZXdWYWx1ZVByb3BzPEp2T2JqZWN0Pik6IFJlYWN0LlJlYWN0RWxlbWVudCB7XG4gIGNvbnN0IHsgbW9kZWwsIHZhbHVlLCBkaXNwYXRjaCwgcGF0aCwgcmVuZGVyT3B0aW9ucyB9ID0gcDtcbiAgY29uc3QgeyBwcm9wZXJ0aWVzIH0gPSB2YWx1ZTtcbiAgY29uc3QgeyB0IH0gPSBtb2RlbDtcblxuICBjb25zdCBpc0FkZGluZ1Byb3AgPSBwLm1vZGVsLmFkZGluZy5pc0p1c3QoKTtcblxuICBsZXQgYWRkU2VjdGlvbiA9IDw+PC8+O1xuICBtb2RlbC5hZGRpbmcuZm9yRWFjaCgoYWRkaW5nU3RhdGUpID0+IHtcbiAgICAvLyBhcmUgd2Ugb3duaW5nID9cbiAgICBjb25zdCB7IG93bmVyUGF0aCB9ID0gYWRkaW5nU3RhdGU7XG4gICAgaWYgKHBhdGguZXF1YWxzKG93bmVyUGF0aCkpIHtcbiAgICAgIGFkZFNlY3Rpb24gPSAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWRkLXByb3AtZm9ybVwiPlxuICAgICAgICAgIDxUZXh0SW5wdXRcbiAgICAgICAgICAgIGxhYmVsVGV4dD17dCgncHJvcGVydHlOYW1lTGFiZWwnLCB7XG4gICAgICAgICAgICAgIHBhdGg6IHBhdGguZm9ybWF0KCcuJyksXG4gICAgICAgICAgICB9KS50b1N0cmluZygpfVxuICAgICAgICAgICAgaGlkZUxhYmVsPXt0cnVlfVxuICAgICAgICAgICAgaWQ9eydwcm9wZXJ0eS1uYW1lLWVkaXRvcid9XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj17dCgncHJvcGVydHlOYW1lUGxhY2Vob2xkZXInKX1cbiAgICAgICAgICAgIHZhbHVlPXthZGRpbmdTdGF0ZS5hZGRpbmdQcm9wTmFtZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT5cbiAgICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIHRhZzogJ25ldy1wcm9wZXJ0eS1uYW1lLWNoYW5nZWQnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uS2V5RG93bj17KGUpID0+IHtcbiAgICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIHRhZzogJ25ldy1wcm9wZXJ0eS1uYW1lLWtleS1kb3duJyxcbiAgICAgICAgICAgICAgICBrZXk6IGUua2V5LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBpbnZhbGlkVGV4dD17dDxzdHJpbmc+KCdwcm9wZXJ0eUFscmVhZHlFeGlzdHMnKX1cbiAgICAgICAgICAgIGludmFsaWQ9e2FkZGluZ1N0YXRlLmlzRHVwbGljYXRlfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9eydidXR0b25zLXJvdyd9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZXJcIiAvPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBraW5kPXsncHJpbWFyeSd9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtcbiAgICAgICAgICAgICAgICBhZGRpbmdTdGF0ZS5hZGRpbmdQcm9wTmFtZSA9PT0gJycgfHwgYWRkaW5nU3RhdGUuaXNEdXBsaWNhdGVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgIGRpc3BhdGNoKHsgdGFnOiAnYWRkLXByb3Atb2stY2FuY2VsLWNsaWNrZWQnLCBvazogdHJ1ZSB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIEFkZFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIGtpbmQ9eydzZWNvbmRhcnknfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgIGRpc3BhdGNoKHsgdGFnOiAnYWRkLXByb3Atb2stY2FuY2VsLWNsaWNrZWQnLCBvazogZmFsc2UgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBhZGRpbmdPd25lclBhdGggPSBtb2RlbC5hZGRpbmcubWFwKChhKSA9PiBhLm93bmVyUGF0aCk7XG5cbiAgY29uc3QgZXhpc3RpbmdQcm9wZXJ0eU5hbWVzID0gbmV3IFNldChwcm9wZXJ0aWVzLm1hcCgocCkgPT4gcC5uYW1lKSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImp2LW9iamVjdFwiPlxuICAgICAge3Byb3BlcnRpZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVtcHR5LW9ialwiPnt0KCdlbXB0eU9iamVjdCcpfTwvZGl2PlxuICAgICAgKSA6IChcbiAgICAgICAgPD48Lz5cbiAgICAgICl9XG4gICAgICB7cHJvcGVydGllcy5tYXAoKHByb3AsIHByb3BJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eVBhdGggPSBwLnBhdGguYXBwZW5kKHByb3AubmFtZSk7XG4gICAgICAgIGNvbnN0IGRpc2FibGVkID1cbiAgICAgICAgICBpc0FkZGluZ1Byb3AgJiZcbiAgICAgICAgICBhZGRpbmdPd25lclBhdGhcbiAgICAgICAgICAgIC5tYXAoKG93bmVyUGF0aCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gIXByb3BlcnR5UGF0aC5pc1BhcmVudE9mKG93bmVyUGF0aCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndpdGhEZWZhdWx0KGZhbHNlKTtcbiAgICAgICAgY29uc3QgcHJvcE5hbWVDbGFzcyA9IFsnb2JqZWN0LXByb3AnXS5jb25jYXQoXG4gICAgICAgICAgZGlzYWJsZWQgPyBbJ2Rpc2FibGVkJ10gOiBbJyddLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBpc0NvbGxhcHNlZCA9IG1vZGVsLmNvbGxhcHNlZFBhdGhzLmhhcyhwcm9wZXJ0eVBhdGguZm9ybWF0KCkpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtwcm9wTmFtZUNsYXNzLmpvaW4oJyAnKX0ga2V5PXtwcm9wLm5hbWUgKyBwcm9wSW5kZXh9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9eydwcm9wLW5hbWUtcm93J30+XG4gICAgICAgICAgICAgIHshcmVuZGVyT3B0aW9ucz8uaGlkZUNvbGxhcHNpYmxlUGFuZWwgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvcC1leHBhbmRcIj5cbiAgICAgICAgICAgICAgICAgIDxFeHBhbmRDb2xsYXBzZUJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZWQ9e2lzQ29sbGFwc2VkfVxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaD17ZGlzcGF0Y2h9XG4gICAgICAgICAgICAgICAgICAgIHBhdGg9e3Byb3BlcnR5UGF0aH1cbiAgICAgICAgICAgICAgICAgICAgdD17dH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsncHJvcC1uYW1lJ30+e3Byb3AubmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgPEFycmF5Q291bnRlciB2YWx1ZT17cHJvcC52YWx1ZX0gLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9eydwcm9wLW1lbnUnfT5cbiAgICAgICAgICAgICAgICA8TWVudVRyaWdnZXJcbiAgICAgICAgICAgICAgICAgIGRpc3BhdGNoPXtkaXNwYXRjaH1cbiAgICAgICAgICAgICAgICAgIHBhdGg9e3Byb3BlcnR5UGF0aH1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0FkZGluZ1Byb3B9XG4gICAgICAgICAgICAgICAgICB0PXt0fVxuICAgICAgICAgICAgICAgICAgcmVuZGVyT3B0aW9ucz17cmVuZGVyT3B0aW9uc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge2lzQ29sbGFwc2VkID8gKFxuICAgICAgICAgICAgICA8PjwvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9wLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgPFZpZXdKc29uVmFsdWVcbiAgICAgICAgICAgICAgICAgIHsuLi5wfVxuICAgICAgICAgICAgICAgICAgcGF0aD17cHJvcGVydHlQYXRofVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3Byb3AudmFsdWV9XG4gICAgICAgICAgICAgICAgICByZW5kZXJPcHRpb25zPXtyZW5kZXJPcHRpb25zfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH0pfVxuICAgICAgPFZpZXdFcnJvcnMgZXJyb3JzPXtnZXRFcnJvcnNBdFBhdGgocCl9IC8+XG4gICAgICA8ZGl2PnthZGRTZWN0aW9ufTwvZGl2PlxuICAgICAgPGRpdj5cbiAgICAgICAge21heWJlT2YobW9kZWwucHJvcGVydGllc1RvQWRkLmdldChwLnBhdGguZm9ybWF0KCkpKVxuICAgICAgICAgIC5tYXAoKHByb3BOYW1lcykgPT4gKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAge3Byb3BOYW1lc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHByb3BOYW1lKSA9PiAhZXhpc3RpbmdQcm9wZXJ0eU5hbWVzLmhhcyhwcm9wTmFtZSkpXG4gICAgICAgICAgICAgICAgLnNvcnQoKVxuICAgICAgICAgICAgICAgIC5tYXAoKHByb3BOYW1lKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFkZC1wcm9wLXJvd1wiIGtleT17cHJvcE5hbWV9PlxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgcmVuZGVySWNvbj17QWRkMTZ9XG4gICAgICAgICAgICAgICAgICAgICAga2luZD17J2dob3N0J31cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICdhZGQtcHJvcGVydHktYnRuLWNsaWNrZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBwLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogcHJvcE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtwcm9wTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICkpXG4gICAgICAgICAgLndpdGhEZWZhdWx0KDw+PC8+KX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFycmF5Q291bnRlclByb3BzIHtcbiAgcmVhZG9ubHkgdmFsdWU6IEpzb25WYWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFycmF5Q291bnRlcihwcm9wczogQXJyYXlDb3VudGVyUHJvcHMpIHtcbiAgaWYgKHByb3BzLnZhbHVlLnRhZyA9PT0gJ2p2LWFycmF5Jykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFycmF5LWNvdW50ZXJcIj5cbiAgICAgICAgPFRhZz57cHJvcHMudmFsdWUuZWxlbXMubGVuZ3RofTwvVGFnPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuICByZXR1cm4gPD48Lz47XG59XG5cbmludGVyZmFjZSBFeHBhbmRDb2xsYXBzZUJ1dHRvblByb3BzIHtcbiAgcmVhZG9ubHkgY29sbGFwc2VkOiBib29sZWFuO1xuICByZWFkb25seSBkaXNwYXRjaDogRGlzcGF0Y2hlcjxNc2c+O1xuICByZWFkb25seSBwYXRoOiBKc1BhdGg7XG4gIHJlYWRvbmx5IHQ6IFRGdW5jdGlvbjtcbn1cblxuZnVuY3Rpb24gRXhwYW5kQ29sbGFwc2VCdXR0b24ocHJvcHM6IEV4cGFuZENvbGxhcHNlQnV0dG9uUHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8QnV0dG9uXG4gICAgICBraW5kPXsnZ2hvc3QnfVxuICAgICAgcmVuZGVySWNvbj17cHJvcHMuY29sbGFwc2VkID8gQ2hldnJvblVwMTYgOiBDaGV2cm9uRG93bjE2fVxuICAgICAgaWNvbkRlc2NyaXB0aW9uPXtwcm9wcy50KFxuICAgICAgICBwcm9wcy5jb2xsYXBzZWQgPyAnaWNvbi5leHBhbmQnIDogJ2ljb24uY29sbGFwc2UnLFxuICAgICAgKX1cbiAgICAgIC8vIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHNpemU9eydzbSd9XG4gICAgICB0b29sdGlwUG9zaXRpb249eydyaWdodCd9XG4gICAgICBoYXNJY29uT25seT17dHJ1ZX1cbiAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgIHByb3BzLmRpc3BhdGNoKHtcbiAgICAgICAgICB0YWc6ICd0b2dnbGUtZXhwYW5kLWNvbGxhcHNlJyxcbiAgICAgICAgICBwYXRoOiBwcm9wcy5wYXRoLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFZpZXdBcnJheShwOiBWaWV3VmFsdWVQcm9wczxKdkFycmF5Pik6IFJlYWN0LlJlYWN0RWxlbWVudCB7XG4gIGNvbnN0IHsgZGlzcGF0Y2gsIHBhdGgsIHZhbHVlLCBtb2RlbCwgcmVuZGVyT3B0aW9ucyB9ID0gcDtcbiAgY29uc3QgeyB0IH0gPSBtb2RlbDtcbiAgY29uc3QgaXNBZGRpbmcgPSBwLm1vZGVsLmFkZGluZy5pc0p1c3QoKTtcbiAgcmV0dXJuIChcbiAgICA8V3JhcEVycm9ycyB7Li4ucH0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImp2LWFycmF5XCI+XG4gICAgICAgIHt2YWx1ZS5lbGVtcy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlbXB0eS1vYmpcIj57dCgnZW1wdHlBcnJheScpfTwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICB7dmFsdWUuZWxlbXMubWFwKChlbGVtVmFsdWUsIGVsZW1JbmRleCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBlbGVtUGF0aCA9IHBhdGguYXBwZW5kKGVsZW1JbmRleC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgY29uc3QgaXNDb2xsYXBzZWQgPSBwLm1vZGVsLmNvbGxhcHNlZFBhdGhzLmhhcyhlbGVtUGF0aC5mb3JtYXQoKSk7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9eydhcnJheS1lbGVtJ30ga2V5PXtgdmFsdWUtJHtlbGVtSW5kZXh9YH0+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J2FycmF5LWVsZW0taGVhZCd9PlxuICAgICAgICAgICAgICAgICAgICB7IXJlbmRlck9wdGlvbnM/LmhpZGVDb2xsYXBzaWJsZVBhbmVsICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb3AtZXhwYW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RXhwYW5kQ29sbGFwc2VCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VkPXtpc0NvbGxhcHNlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2g9e2Rpc3BhdGNofVxuICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtlbGVtUGF0aH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdD17dH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsnZWxlbS1uYW1lJ30+I3tlbGVtSW5kZXh9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsncHJvcC1tZW51J30+XG4gICAgICAgICAgICAgICAgICAgICAgPE1lbnVUcmlnZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaD17ZGlzcGF0Y2h9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtlbGVtUGF0aH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0FkZGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgIHQ9e3R9XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJPcHRpb25zPXtyZW5kZXJPcHRpb25zfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7aXNDb2xsYXBzZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgIDw+PC8+XG4gICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J2VsZW0tdmFsdWUnfT5cbiAgICAgICAgICAgICAgICAgICAgICA8Vmlld0pzb25WYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLnB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoPXtlbGVtUGF0aH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtlbGVtVmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJPcHRpb25zPXtyZW5kZXJPcHRpb25zfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9XcmFwRXJyb3JzPlxuICApO1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaFVwZGF0ZVByb3BlcnR5KFxuICBwOiBWaWV3VmFsdWVQcm9wczxKc29uVmFsdWU+LFxuICBuZXdWYWx1ZTogSnNvblZhbHVlLFxuKSB7XG4gIHAuZGlzcGF0Y2goe1xuICAgIHRhZzogJ3VwZGF0ZS1wcm9wZXJ0eScsXG4gICAgcGF0aDogcC5wYXRoLFxuICAgIHZhbHVlOiBuZXdWYWx1ZSxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIFZpZXdOdW1iZXIocDogVmlld1ZhbHVlUHJvcHM8SnZOdW1iZXI+KTogUmVhY3QuUmVhY3RFbGVtZW50IHtcbiAgY29uc3QgeyB0IH0gPSBwLm1vZGVsO1xuICByZXR1cm4gKFxuICAgIDxUZXh0SW5wdXRcbiAgICAgIGxhYmVsVGV4dD17dCgnbnVtYmVyVmFsdWVMYWJlbCcsIHsgcGF0aDogcC5wYXRoLmZvcm1hdCgnLicpIH0pLnRvU3RyaW5nKCl9XG4gICAgICBoaWRlTGFiZWw9e3RydWV9XG4gICAgICBpZD17J2lucHV0LScgKyBwLnBhdGguZm9ybWF0KCdfJyl9XG4gICAgICB2YWx1ZT17cC52YWx1ZS52YWx1ZX1cbiAgICAgIGRpc2FibGVkPXtwLm1vZGVsLmFkZGluZy5pc0p1c3QoKX1cbiAgICAgIGludmFsaWRUZXh0PXtlcnJvcnNUb0ludmFsaWRUZXh0KHApfVxuICAgICAgaW52YWxpZD17aXNJbnZhbGlkKHApfVxuICAgICAgb25DaGFuZ2U9eyhldnQpID0+IHtcbiAgICAgICAgZGlzcGF0Y2hVcGRhdGVQcm9wZXJ0eShwLCB7XG4gICAgICAgICAgdGFnOiAnanYtbnVtYmVyJyxcbiAgICAgICAgICB2YWx1ZTogZXZ0LnRhcmdldC52YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9fVxuICAgIC8+XG4gICk7XG59XG5cbmZ1bmN0aW9uIGVycm9yc1RvSW52YWxpZFRleHQocDogVmlld1ZhbHVlUHJvcHM8SnNvblZhbHVlPik6IHN0cmluZyB7XG4gIHJldHVybiBnZXRFcnJvcnNBdFBhdGgocClcbiAgICAubWFwKChlKSA9PiBlLm1lc3NhZ2UpXG4gICAgLmpvaW4oJywgJyk7XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yc0F0UGF0aChcbiAgcDogVmlld1ZhbHVlUHJvcHM8SnNvblZhbHVlPixcbik6IFJlYWRvbmx5QXJyYXk8SnNWYWxpZGF0aW9uRXJyb3I+IHtcbiAgcmV0dXJuIHAubW9kZWwuZXJyb3JzLmdldChwLnBhdGguZm9ybWF0KCkpID8/IFtdO1xufVxuXG5mdW5jdGlvbiBpc0ludmFsaWQocDogVmlld1ZhbHVlUHJvcHM8SnNvblZhbHVlPik6IGJvb2xlYW4ge1xuICByZXR1cm4gZ2V0RXJyb3JzQXRQYXRoKHApLmxlbmd0aCA+IDA7XG59XG5cbmZ1bmN0aW9uIFZpZXdTdHJpbmdEZWZhdWx0KHA6IFZpZXdWYWx1ZVByb3BzPEp2U3RyaW5nPik6IFJlYWN0LlJlYWN0RWxlbWVudCB7XG4gIGNvbnN0IHsgdCB9ID0gcC5tb2RlbDtcbiAgcmV0dXJuIChcbiAgICA8VGV4dElucHV0XG4gICAgICBsYWJlbFRleHQ9e3QoJ3N0cmluZ1ZhbHVlTGFiZWwnLCB7IHBhdGg6IHAucGF0aC5mb3JtYXQoJy4nKSB9KS50b1N0cmluZygpfVxuICAgICAgaGlkZUxhYmVsPXt0cnVlfVxuICAgICAgaWQ9eydpbnB1dC0nICsgcC5wYXRoLmZvcm1hdCgnXycpfVxuICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgdmFsdWU9e3AudmFsdWUudmFsdWV9XG4gICAgICBkaXNhYmxlZD17cC5tb2RlbC5hZGRpbmcuaXNKdXN0KCl9XG4gICAgICBpbnZhbGlkVGV4dD17ZXJyb3JzVG9JbnZhbGlkVGV4dChwKX1cbiAgICAgIGludmFsaWQ9e2lzSW52YWxpZChwKX1cbiAgICAgIHBsYWNlaG9sZGVyPXt0KCdzdHJpbmdWYWx1ZVBsYWNlaG9sZGVyJyl9XG4gICAgICBvbkNoYW5nZT17KGV2dCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdTdHIgPSBldnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICBkaXNwYXRjaFVwZGF0ZVByb3BlcnR5KHAsIHsgdGFnOiAnanYtc3RyaW5nJywgdmFsdWU6IG5ld1N0ciB9KTtcbiAgICAgIH19XG4gICAgLz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVmlld1N0cmluZyhwOiBWaWV3VmFsdWVQcm9wczxKdlN0cmluZz4pOiBSZWFjdC5SZWFjdEVsZW1lbnQge1xuICBjb25zdCBmbXRQYXRoID0gcC5wYXRoLmZvcm1hdCgpO1xuXG4gIGNvbnN0IGZvcm1hdHMgPSBwLm1vZGVsLmZvcm1hdHMuZ2V0KGZtdFBhdGgpID8/IFtdO1xuICBpZiAoZm9ybWF0cy5sZW5ndGggPT09IDApIHtcbiAgICAvLyBubyBmb3JtYXRzLCBjaGVjayBmb3IgcHJvcG9zYWxzIChlbnVtLCBleGFtcGxlcyBldGMpXG4gICAgY29uc3QgcHJvcG9zYWxzID0gcC5tb2RlbC5jb21ib0JveGVzLmdldChmbXRQYXRoKSA/PyBbXTtcbiAgICBpZiAocHJvcG9zYWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIDxWaWV3U3RyaW5nRGVmYXVsdCB7Li4ucH0gLz47XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBWaWV3U3RyaW5nV2l0aENvbWJvKHsgLi4ucCwgcHJvcG9zYWxzIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyB3ZSBoYXZlIGZvcm1hdHMgIVxuICAgIHJldHVybiA8Vmlld1N0cmluZ1dpdGhGb3JtYXRzIHsuLi5wfSBmb3JtYXRzPXtmb3JtYXRzfSAvPjtcbiAgfVxufVxuXG5pbnRlcmZhY2UgVmlld1N0cmluZ1dpdGhDb21ib1Byb3BzIGV4dGVuZHMgVmlld1ZhbHVlUHJvcHM8SnZTdHJpbmc+IHtcbiAgcmVhZG9ubHkgcHJvcG9zYWxzOiBSZWFkb25seUFycmF5PHN0cmluZz47XG59XG5cbmZ1bmN0aW9uIFZpZXdTdHJpbmdXaXRoQ29tYm8ocDogVmlld1N0cmluZ1dpdGhDb21ib1Byb3BzKTogUmVhY3QuUmVhY3RFbGVtZW50IHtcbiAgY29uc3QgeyB0IH0gPSBwLm1vZGVsO1xuICByZXR1cm4gKFxuICAgIDxDb21ib0JveFxuICAgICAgaWQ9eydpbnB1dC0nICsgcC5wYXRoLmZvcm1hdCgnXycpfVxuICAgICAgYXJpYUxhYmVsPXt0KCdzdHJpbmdWYWx1ZUNvbWJvTGFiZWwnLCB7XG4gICAgICAgIHBhdGg6IHAucGF0aC5mb3JtYXQoJy4nKSxcbiAgICAgIH0pLnRvU3RyaW5nKCl9XG4gICAgICBkaXNhYmxlZD17cC5tb2RlbC5hZGRpbmcuaXNKdXN0KCl9XG4gICAgICBpbnZhbGlkVGV4dD17ZXJyb3JzVG9JbnZhbGlkVGV4dChwKX1cbiAgICAgIGludmFsaWQ9e2lzSW52YWxpZChwKX1cbiAgICAgIGl0ZW1zPXtwLnByb3Bvc2Fsc31cbiAgICAgIHZhbHVlPXtwLnZhbHVlLnZhbHVlfVxuICAgICAgc2VsZWN0ZWRJdGVtPXtwLnZhbHVlLnZhbHVlfVxuICAgICAgcGxhY2Vob2xkZXI9eycnfVxuICAgICAgb25DaGFuZ2U9eyhpdGVtKSA9PiB7XG4gICAgICAgIGRpc3BhdGNoVXBkYXRlUHJvcGVydHkocCwge1xuICAgICAgICAgIHRhZzogJ2p2LXN0cmluZycsXG4gICAgICAgICAgdmFsdWU6IGl0ZW0uc2VsZWN0ZWRJdGVtID8/ICcnLFxuICAgICAgICB9KTtcbiAgICAgIH19XG4gICAgICBvbklucHV0Q2hhbmdlPXsodGV4dCkgPT4ge1xuICAgICAgICBkaXNwYXRjaFVwZGF0ZVByb3BlcnR5KHAsIHtcbiAgICAgICAgICB0YWc6ICdqdi1zdHJpbmcnLFxuICAgICAgICAgIHZhbHVlOiB0ZXh0ID8/ICcnLFxuICAgICAgICB9KTtcbiAgICAgIH19XG4gICAgLz5cbiAgKTtcbn1cblxuaW50ZXJmYWNlIE15VGltZVBpY2tlclByb3BzIHtcbiAgcmVhZG9ubHkgcGF0aDogSnNQYXRoO1xuICByZWFkb25seSBvbkNoYW5nZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IHZhbHVlOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGlzSW52YWxpZDogYm9vbGVhbjtcbiAgcmVhZG9ubHkgaW52YWxpZFRleHQ6IHN0cmluZztcbiAgcmVhZG9ubHkgdDogVEZ1bmN0aW9uO1xufVxuXG5mdW5jdGlvbiBNeVRpbWVQaWNrZXIocHJvcHM6IE15VGltZVBpY2tlclByb3BzKSB7XG4gIGNvbnN0IGZtdFBhdGggPSBwcm9wcy5wYXRoLmZvcm1hdCgnXycpO1xuICBjb25zdCB7IG9uQ2hhbmdlLCB2YWx1ZSwgaXNJbnZhbGlkLCBpbnZhbGlkVGV4dCwgdCB9ID0gcHJvcHM7XG4gIHJldHVybiAoXG4gICAgPFRpbWVQaWNrZXJcbiAgICAgIGlkPXsndGltZS1waWNrZXItJyArIGZtdFBhdGh9XG4gICAgICBjbGFzc05hbWU9eyd0aW1lLXBpY2tlcid9XG4gICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBNeVRpbWUodmFsdWUpO1xuICAgICAgICBjb25zdCByZXBsYWNlZCA9IHQuc2V0VGltZShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgIG9uQ2hhbmdlKHJlcGxhY2VkLmZ1bGxUaW1lKTtcbiAgICAgIH19XG4gICAgICBwYXR0ZXJuPVwiKFswLTFdXFxkfDJbMC0zXSk6KFswLTVdXFxkKSg6WzAtNV1cXGQoXFwuKFxcZHsxLDN9KSk/KT9cIlxuICAgICAgbWF4TGVuZ3RoPXsxMn1cbiAgICAgIGludmFsaWRUZXh0PXtpbnZhbGlkVGV4dH1cbiAgICAgIGludmFsaWQ9e2lzSW52YWxpZH1cbiAgICAgIHZhbHVlPXtuZXcgTXlUaW1lKHZhbHVlKS50aW1lfVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXsndGltZS1waWNrZXItb2Zmc2V0LXdyYXBwZXInfT5cbiAgICAgICAgPFRpbWVQaWNrZXJTZWxlY3RcbiAgICAgICAgICBpZD17J3RpbWUtcGlja2VyLXNlbGVjdCcgKyBmbXRQYXRofVxuICAgICAgICAgIGFyaWEtbGFiZWw9e3QoJ3RpbWVWYWx1ZUxhYmVsJywge1xuICAgICAgICAgICAgcGF0aDogcHJvcHMucGF0aC5mb3JtYXQoJy4nKSxcbiAgICAgICAgICB9KS50b1N0cmluZygpfVxuICAgICAgICAgIGxhYmVsVGV4dD17Jyd9XG4gICAgICAgICAgb25DaGFuZ2U9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBNeVRpbWUodmFsdWUpO1xuICAgICAgICAgICAgb25DaGFuZ2UodC5zZXRPZmZzZXQob2Zmc2V0KS5mdWxsVGltZSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICB2YWx1ZT17bmV3IE15VGltZSh2YWx1ZSkub2Zmc2V0fVxuICAgICAgICA+XG4gICAgICAgICAge1s8U2VsZWN0SXRlbSB0ZXh0PXsnJ30gdmFsdWU9eycnfSBrZXk9eydpdGVtJ30gLz5dLmNvbmNhdChcbiAgICAgICAgICAgIGFsbE9mZnNldHMubWFwKChvZmZzZXQsIGkpID0+IChcbiAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9e29mZnNldH0gdGV4dD17b2Zmc2V0fSBrZXk9eydpdGVtLScgKyBpfSAvPlxuICAgICAgICAgICAgKSksXG4gICAgICAgICAgKX1cbiAgICAgICAgPC9UaW1lUGlja2VyU2VsZWN0PlxuICAgICAgPC9kaXY+XG4gICAgPC9UaW1lUGlja2VyPlxuICApO1xufVxuXG5pbnRlcmZhY2UgTXlEYXRlUGlja2VyUHJvcHMge1xuICByZWFkb25seSBwYXRoOiBKc1BhdGg7XG4gIHJlYWRvbmx5IHZhbHVlOiBzdHJpbmc7XG4gIHJlYWRvbmx5IG9uQ2hhbmdlOiAoczogc3RyaW5nKSA9PiB2b2lkO1xuICByZWFkb25seSBpc0ludmFsaWQ6IGJvb2xlYW47XG4gIHJlYWRvbmx5IGludmFsaWRUZXh0OiBzdHJpbmc7XG4gIHJlYWRvbmx5IHQ6IFRGdW5jdGlvbjtcbiAgcmVhZG9ubHkgbGFuZ3VhZ2U6IHN0cmluZztcbn1cblxuZnVuY3Rpb24gbGFuZ3VhZ2VUb1BpY2tlckxvY2FsZSh4OiBzdHJpbmcpOiBEYXRlUGlja2VyUHJvcHNbJ2xvY2FsZSddIHtcbiAgY29uc3QgcGFydHMgPSB4LnNwbGl0KCctJyk7XG4gIC8vIEB0cy1pZ25vcmVcbiAgcmV0dXJuIHBhcnRzWzBdO1xufVxuXG5mdW5jdGlvbiBNeURhdGVQaWNrZXIocHJvcHM6IE15RGF0ZVBpY2tlclByb3BzKSB7XG4gIGNvbnN0IGZtdFBhdGggPSBwcm9wcy5wYXRoLmZvcm1hdCgnXycpO1xuICBjb25zdCB7IHQgfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxEYXRlUGlja2VyXG4gICAgICBpZD17J2RhdGUtcGlja2VyLScgKyBmbXRQYXRofVxuICAgICAgZGF0ZVBpY2tlclR5cGU9XCJzaW5nbGVcIlxuICAgICAgZGF0ZUZvcm1hdD17J1ktbS1kJ31cbiAgICAgIG9uQ2hhbmdlPXsoZGF0ZXMsIHN0cikgPT4ge1xuICAgICAgICBwcm9wcy5vbkNoYW5nZShzdHIpO1xuICAgICAgfX1cbiAgICAgIHZhbHVlPXtwcm9wcy52YWx1ZX1cbiAgICAgIGxvY2FsZT17bGFuZ3VhZ2VUb1BpY2tlckxvY2FsZShwcm9wcy5sYW5ndWFnZSl9XG4gICAgPlxuICAgICAgPERhdGVQaWNrZXJJbnB1dFxuICAgICAgICBpZD17J2lucHV0LScgKyBmbXRQYXRofVxuICAgICAgICBhcmlhLWxhYmVsPXt0KCdkYXRlVmFsdWVMYWJlbCcsIHtcbiAgICAgICAgICBwYXRoOiBwcm9wcy5wYXRoLmZvcm1hdCgnLicpLFxuICAgICAgICB9KS50b1N0cmluZygpfVxuICAgICAgICBsYWJlbFRleHQ9eycnfVxuICAgICAgICBoaWRlTGFiZWw9e3RydWV9XG4gICAgICAgIGF1dG9Db21wbGV0ZT17J29mZid9XG4gICAgICAgIHZhbHVlPXtwcm9wcy52YWx1ZX1cbiAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgcHJvcHMub25DaGFuZ2UoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICB9fVxuICAgICAgICBpbnZhbGlkVGV4dD17cHJvcHMuaW52YWxpZFRleHR9XG4gICAgICAgIGludmFsaWQ9e3Byb3BzLmlzSW52YWxpZH1cbiAgICAgIC8+XG4gICAgPC9EYXRlUGlja2VyPlxuICApO1xufVxuXG5pbnRlcmZhY2UgVmlld1N0cmluZ1dpdGhGb3JtYXRzUHJvcHMgZXh0ZW5kcyBWaWV3VmFsdWVQcm9wczxKdlN0cmluZz4ge1xuICByZWFkb25seSBmb3JtYXRzOiBSZWFkb25seUFycmF5PHN0cmluZz47XG59XG5cbmZ1bmN0aW9uIFZpZXdTdHJpbmdXaXRoRm9ybWF0cyhcbiAgcDogVmlld1N0cmluZ1dpdGhGb3JtYXRzUHJvcHMsXG4pOiBSZWFjdC5SZWFjdEVsZW1lbnQge1xuICBjb25zdCB7IGZvcm1hdHMgfSA9IHA7XG4gIHN3aXRjaCAoZm9ybWF0cy5sZW5ndGgpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4gPFZpZXdTdHJpbmdEZWZhdWx0IHsuLi5wfSAvPjtcbiAgICBjYXNlIDE6IHtcbiAgICAgIGNvbnN0IGZvcm1hdCA9IGZvcm1hdHNbMF07XG4gICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlICdkYXRlJzoge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TXlEYXRlUGlja2VyXG4gICAgICAgICAgICAgIHBhdGg9e3AucGF0aH1cbiAgICAgICAgICAgICAgdmFsdWU9e3AudmFsdWUudmFsdWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsocykgPT5cbiAgICAgICAgICAgICAgICBwLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgIHRhZzogJ3VwZGF0ZS1wcm9wZXJ0eScsXG4gICAgICAgICAgICAgICAgICBwYXRoOiBwLnBhdGgsXG4gICAgICAgICAgICAgICAgICB2YWx1ZToganZTdHJpbmcocyksXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpc0ludmFsaWQ9e2lzSW52YWxpZChwKX1cbiAgICAgICAgICAgICAgaW52YWxpZFRleHQ9e2Vycm9yc1RvSW52YWxpZFRleHQocCl9XG4gICAgICAgICAgICAgIHQ9e3AubW9kZWwudH1cbiAgICAgICAgICAgICAgbGFuZ3VhZ2U9e3AubGFuZ3VhZ2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnZGF0ZS10aW1lJzoge1xuICAgICAgICAgIGNvbnN0IGludmFsaWQgPSBpc0ludmFsaWQocCk7XG4gICAgICAgICAgY29uc3QgZHQgPSBuZXcgTXlEYXRlVGltZShwLnZhbHVlLnZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9eydkYXRlLXRpbWUtcGlja2VyJ30+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsnZGF0ZS10aW1lLXBpY2tlcl9fZGF0ZSd9PlxuICAgICAgICAgICAgICAgIDxNeURhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICAgIHBhdGg9e3AucGF0aH1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtkdC5kYXRlfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGR0MiA9IGR0LnNldERhdGUocyk7XG4gICAgICAgICAgICAgICAgICAgIHAuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgIHRhZzogJ3VwZGF0ZS1wcm9wZXJ0eScsXG4gICAgICAgICAgICAgICAgICAgICAgcGF0aDogcC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBqdlN0cmluZyhkdDIuZGF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBpc0ludmFsaWQ9e2ludmFsaWR9XG4gICAgICAgICAgICAgICAgICBpbnZhbGlkVGV4dD17ZXJyb3JzVG9JbnZhbGlkVGV4dChwKX1cbiAgICAgICAgICAgICAgICAgIHQ9e3AubW9kZWwudH1cbiAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPXtwLmxhbmd1YWdlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J2RhdGUtdGltZS1waWNrZXJfX3RpbWUnfT5cbiAgICAgICAgICAgICAgICA8TXlUaW1lUGlja2VyXG4gICAgICAgICAgICAgICAgICBwYXRoPXtwLnBhdGh9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHQyID0gZHQuc2V0VGltZShzKTtcbiAgICAgICAgICAgICAgICAgICAgcC5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgdGFnOiAndXBkYXRlLXByb3BlcnR5JyxcbiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBwLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGp2U3RyaW5nKGR0Mi5kYXRlVGltZSksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtkdC50aW1lLmZ1bGxUaW1lfVxuICAgICAgICAgICAgICAgICAgaXNJbnZhbGlkPXtpbnZhbGlkfVxuICAgICAgICAgICAgICAgICAgaW52YWxpZFRleHQ9e2Vycm9yc1RvSW52YWxpZFRleHQocCl9XG4gICAgICAgICAgICAgICAgICB0PXtwLm1vZGVsLnR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3RpbWUnOiB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxNeVRpbWVQaWNrZXJcbiAgICAgICAgICAgICAgcGF0aD17cC5wYXRofVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KHMpID0+XG4gICAgICAgICAgICAgICAgcC5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICB0YWc6ICd1cGRhdGUtcHJvcGVydHknLFxuICAgICAgICAgICAgICAgICAgcGF0aDogcC5wYXRoLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IGp2U3RyaW5nKHMpLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFsdWU9e3AudmFsdWUudmFsdWV9XG4gICAgICAgICAgICAgIGlzSW52YWxpZD17aXNJbnZhbGlkKHApfVxuICAgICAgICAgICAgICBpbnZhbGlkVGV4dD17ZXJyb3JzVG9JbnZhbGlkVGV4dChwKX1cbiAgICAgICAgICAgICAgdD17cC5tb2RlbC50fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIDxWaWV3U3RyaW5nRGVmYXVsdCB7Li4ucH0gLz47XG4gICAgICB9XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHJldHVybiA8Vmlld1N0cmluZ0RlZmF1bHQgey4uLnB9IC8+O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBWaWV3Qm9vbGVhbihwOiBWaWV3VmFsdWVQcm9wczxKdkJvb2xlYW4+KTogUmVhY3QuUmVhY3RFbGVtZW50IHtcbiAgY29uc3QgeyB0IH0gPSBwLm1vZGVsO1xuICByZXR1cm4gKFxuICAgIDxXcmFwRXJyb3JzIHsuLi5wfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hlY2tib3gtd3JhcHBlclwiPlxuICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICBsYWJlbFRleHQ9e3QoJ2Jvb2xlYW5WYWx1ZUxhYmVsJywge1xuICAgICAgICAgICAgcGF0aDogcC5wYXRoLmZvcm1hdCgnLicpLFxuICAgICAgICAgIH0pLnRvU3RyaW5nKCl9XG4gICAgICAgICAgaGlkZUxhYmVsPXt0cnVlfVxuICAgICAgICAgIGlkPXsnaW5wdXQtJyArIHAucGF0aC5mb3JtYXQoJ18nKX1cbiAgICAgICAgICBjaGVja2VkPXtwLnZhbHVlLnZhbHVlfVxuICAgICAgICAgIGRpc2FibGVkPXtwLm1vZGVsLmFkZGluZy5pc0p1c3QoKX1cbiAgICAgICAgICBvbkNoYW5nZT17KCkgPT4ge1xuICAgICAgICAgICAgZGlzcGF0Y2hVcGRhdGVQcm9wZXJ0eShwLCB7XG4gICAgICAgICAgICAgIHRhZzogJ2p2LWJvb2xlYW4nLFxuICAgICAgICAgICAgICB2YWx1ZTogIXAudmFsdWUudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgPC9XcmFwRXJyb3JzPlxuICApO1xufVxuXG5mdW5jdGlvbiBWaWV3TnVsbChwOiBWaWV3VmFsdWVQcm9wczxKdk51bGw+KTogUmVhY3QuUmVhY3RFbGVtZW50IHtcbiAgY29uc3QgY2xhc3NlcyA9IFsnanMtbnVsbCddXG4gICAgLmNvbmNhdChpc0ludmFsaWQocCkgPyBbJ2Zvcm0tZXJyb3InXSA6IFtdKVxuICAgIC5qb2luKCcgJyk7XG4gIHJldHVybiAoXG4gICAgPFdyYXBFcnJvcnMgey4uLnB9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXN9Pm51bGw8L2Rpdj5cbiAgICA8L1dyYXBFcnJvcnM+XG4gICk7XG59XG5cbmV4cG9ydCBjb25zdCBvbk1lbnVUcmlnZ2VyQ2xpY2sgPVxuICAoZGlzcGF0Y2g6IERpc3BhdGNoZXI8TXNnPiwgcHJvcGVydHlQYXRoOiBKc1BhdGgpID0+XG4gIChlOiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IGJ0bkJveCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGlmIChidG5Cb3gpIHtcbiAgICAgIGNvbnN0IHJiID0gYm94KHBvcyhlLmNsaWVudFgsIGUuY2xpZW50WSksIERpbS56ZXJvKTtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdGFnOiAnbWVudS10cmlnZ2VyLWNsaWNrZWQnLFxuICAgICAgICBwYXRoOiBwcm9wZXJ0eVBhdGgsXG4gICAgICAgIHJlZkJveDogcmIsIC8vYm94KHJiLnAuYWRkKHBvcyhyYi5kLncgLyAyLCByYi5kLmggLyAyKSksIERpbS56ZXJvKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuZXhwb3J0IGludGVyZmFjZSBWaWV3RXJyb3JzUHJvcHMge1xuICBlcnJvcnM6IFJlYWRvbmx5QXJyYXk8SnNWYWxpZGF0aW9uRXJyb3I+O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gVmlld0Vycm9ycyhwcm9wczogVmlld0Vycm9yc1Byb3BzKSB7XG4gIHJldHVybiBwcm9wcy5lcnJvcnMubGVuZ3RoID4gMCA/IChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZXJyb3JzXCI+XG4gICAgICB7cHJvcHMuZXJyb3JzLm1hcCgoZSkgPT4gZS5tZXNzYWdlKS5qb2luKCcsICcpfVxuICAgIDwvZGl2PlxuICApIDogKFxuICAgIDw+PC8+XG4gICk7XG59XG5cbmV4cG9ydCBjb25zdCBXcmFwRXJyb3JzOiBSZWFjdC5GdW5jdGlvbkNvbXBvbmVudDxWaWV3VmFsdWVQcm9wczxKc29uVmFsdWU+PiA9IChcbiAgcCxcbikgPT4ge1xuICBjb25zdCBlcnJvcnNBdFBhdGggPSBnZXRFcnJvcnNBdFBhdGgocCk7XG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHtwLmNoaWxkcmVufVxuICAgICAge2Vycm9yc0F0UGF0aC5sZW5ndGggPiAwID8gPFZpZXdFcnJvcnMgZXJyb3JzPXtlcnJvcnNBdFBhdGh9IC8+IDogPD48Lz59XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lbnVUcmlnZ2VyUHJvcHMge1xuICByZWFkb25seSBkaXNwYXRjaDogRGlzcGF0Y2hlcjxNc2c+O1xuICByZWFkb25seSBwYXRoOiBKc1BhdGg7XG4gIHJlYWRvbmx5IGRpc2FibGVkOiBib29sZWFuO1xuICByZWFkb25seSB0OiBURnVuY3Rpb247XG4gIHJlYWRvbmx5IHJlbmRlck9wdGlvbnM/OiBSZW5kZXJPcHRpb25zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gTWVudVRyaWdnZXIocHJvcHM6IE1lbnVUcmlnZ2VyUHJvcHMpIHtcbiAgY29uc3QgeyBkaXNhYmxlZCwgcGF0aCwgZGlzcGF0Y2gsIHQsIHJlbmRlck9wdGlvbnMgfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxCdXR0b25cbiAgICAgIGljb25EZXNjcmlwdGlvbj17dCgnaWNvbi5vcGVuTWVudScpfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgc2l6ZT17J3NtJ31cbiAgICAgIGtpbmQ9eydnaG9zdCd9XG4gICAgICByZW5kZXJJY29uPXtPdmVyZmxvd01lbnVWZXJ0aWNhbDE2fVxuICAgICAgdG9vbHRpcFBvc2l0aW9uPXsnbGVmdCd9XG4gICAgICBoYXNJY29uT25seT17dHJ1ZX1cbiAgICAgIG9uQ2xpY2s9e29uTWVudVRyaWdnZXJDbGljayhkaXNwYXRjaCwgcGF0aCl9XG4gICAgICBzdHlsZT17e1xuICAgICAgICBvdmVyZmxvdzogcmVuZGVyT3B0aW9ucz8uaGlkZU1lbnVUb29sdGlwID8gJ2hpZGRlbicgOiB1bmRlZmluZWQsXG4gICAgICB9fVxuICAgIC8+XG4gICk7XG59XG5cbmNvbnN0IGFsbE9mZnNldHMgPSBbXG4gICdaJyxcbiAgJyswMTowMCcsXG4gICcrMDI6MDAnLFxuICAnKzAzOjAwJyxcbiAgJyswNDowMCcsXG4gICcrMDQ6MzAnLFxuICAnKzA1OjAwJyxcbiAgJyswNTozMCcsXG4gICcrMDU6NDUnLFxuICAnKzA2OjAwJyxcbiAgJyswNjozMCcsXG4gICcrMDc6MDAnLFxuICAnKzA4OjAwJyxcbiAgJyswODo0NScsXG4gICcrMDk6MDAnLFxuICAnKzA5OjMwJyxcbiAgJysxMDowMCcsXG4gICcrMTA6MzAnLFxuICAnKzExOjAwJyxcbiAgJysxMjowMCcsXG4gICcrMTI6NDUnLFxuICAnKzEzOjAwJyxcbiAgJysxNDowMCcsXG4gICctMDE6MDAnLFxuICAnLTAyOjAwJyxcbiAgJy0wMjozMCcsXG4gICctMDM6MDAnLFxuICAnLTA0OjAwJyxcbiAgJy0wNTowMCcsXG4gICctMDY6MDAnLFxuICAnLTA3OjAwJyxcbiAgJy0wODowMCcsXG4gICctMDk6MDAnLFxuICAnLTA5OjMwJyxcbiAgJy0xMDowMCcsXG4gICctMTE6MDAnLFxuICAnLTEyOjAwJyxcbl07XG5cbmNsYXNzIE15RGF0ZVRpbWUge1xuICByZWFkb25seSBkYXRlOiBzdHJpbmc7XG4gIHJlYWRvbmx5IHRpbWU6IE15VGltZTtcblxuICBjb25zdHJ1Y3RvcihyZWFkb25seSBkYXRlVGltZTogc3RyaW5nKSB7XG4gICAgdGhpcy5kYXRlID0gJyc7XG4gICAgdGhpcy50aW1lID0gbmV3IE15VGltZSgnJyk7XG4gICAgY29uc3Qgc2VwSW5kZXggPSBkYXRlVGltZS5pbmRleE9mKCdUJyk7XG4gICAgaWYgKHNlcEluZGV4ICE9PSAtMSkge1xuICAgICAgLy8gc2VwYXJhdG9yIGZvdW5kLCBleHRyYWN0IGRhdGUgYW5kIHRpbWUgcGFydHNcbiAgICAgIHRoaXMuZGF0ZSA9IGRhdGVUaW1lLnN1YnN0cmluZygwLCBzZXBJbmRleCk7XG4gICAgICB0aGlzLnRpbWUgPSBuZXcgTXlUaW1lKGRhdGVUaW1lLnN1YnN0cmluZyhzZXBJbmRleCArIDEpKTtcbiAgICB9XG4gIH1cblxuICBzZXREYXRlKGRhdGU6IHN0cmluZyk6IE15RGF0ZVRpbWUge1xuICAgIHJldHVybiBuZXcgTXlEYXRlVGltZShkYXRlICsgJ1QnICsgdGhpcy50aW1lLmZ1bGxUaW1lKTtcbiAgfVxuXG4gIHNldFRpbWUodGltZTogc3RyaW5nKTogTXlEYXRlVGltZSB7XG4gICAgcmV0dXJuIG5ldyBNeURhdGVUaW1lKHRoaXMuZGF0ZSArICdUJyArIHRpbWUpO1xuICB9XG59XG5cbmNsYXNzIE15VGltZSB7XG4gIHJlYWRvbmx5IHRpbWU6IHN0cmluZztcbiAgcmVhZG9ubHkgb2Zmc2V0OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgZnVsbFRpbWU6IHN0cmluZykge1xuICAgIHRoaXMudGltZSA9IGZ1bGxUaW1lO1xuICAgIHRoaXMub2Zmc2V0ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxPZmZzZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBvZmZzZXQgPSBhbGxPZmZzZXRzW2ldO1xuICAgICAgaWYgKGZ1bGxUaW1lLmVuZHNXaXRoKG9mZnNldCkpIHtcbiAgICAgICAgdGhpcy50aW1lID0gZnVsbFRpbWUuc3Vic3RyaW5nKDAsIGZ1bGxUaW1lLmxlbmd0aCAtIG9mZnNldC5sZW5ndGgpO1xuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0VGltZSh0aW1lOiBzdHJpbmcpOiBNeVRpbWUge1xuICAgIHJldHVybiBuZXcgTXlUaW1lKHRpbWUgKyB0aGlzLm9mZnNldCk7XG4gIH1cblxuICBzZXRPZmZzZXQob2Zmc2V0OiBzdHJpbmcpOiBNeVRpbWUge1xuICAgIHJldHVybiBuZXcgTXlUaW1lKHRoaXMudGltZSArIG9mZnNldCk7XG4gIH1cbn1cbiJdfQ==