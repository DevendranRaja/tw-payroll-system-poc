"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/*
 * Copyright 2018, 2024 The Diesel Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const react_1 = require("@testing-library/react");
require("@testing-library/jest-dom");
const JsPath_1 = require("./JsPath");
const Renderer_1 = require("./renderer/Renderer");
const JsonEditor_1 = require("./JsonEditor");
const Model_1 = require("./Model");
const tea_cup_core_1 = require("tea-cup-core");
const JsonValue_1 = require("./JsonValue");
describe('Render options', () => {
    describe('defaults', () => {
        test('menu tooltip', () => {
            const { container } = (0, react_1.render)((0, Renderer_1.MenuTrigger)({
                path: JsPath_1.JsPath.empty,
                disabled: false,
                t: () => 'no-t',
                dispatch: () => { },
                renderOptions: {},
            }));
            expect(container.querySelector('button')).not.toHaveAttribute('style');
        });
        test('menu document root', () => {
            const { container } = (0, react_1.render)((0, JsonEditor_1.ViewJsonEditor)({
                model: (0, Model_1.initialModel)('en', tea_cup_core_1.nothing, JsonValue_1.jvNull, false, 0),
                dispatch: () => { },
                rendererFactory: new Renderer_1.RendererFactory(),
                renderOptions: {},
            }));
            expect(container.querySelectorAll('.doc-root')).toHaveLength(1);
        });
        test('menu collapsible panel in object', () => {
            const { container } = (0, react_1.render)((0, Renderer_1.ViewJsonValue)({
                model: (0, Model_1.initialModel)('en', tea_cup_core_1.nothing, JsonValue_1.jvNull, false, 0),
                path: JsPath_1.JsPath.empty,
                value: (0, JsonValue_1.jvObject)([{ name: 'foo', value: JsonValue_1.jvNull }]),
                language: 'en',
                dispatch: () => { },
                rendererFactory: new Renderer_1.RendererFactory(),
                renderOptions: {},
            }));
            expect(container.querySelectorAll('.prop-expand')).toHaveLength(1);
        });
        test('menu collapsible panel in array', () => {
            const { container } = (0, react_1.render)((0, Renderer_1.ViewJsonValue)({
                model: (0, Model_1.initialModel)('en', tea_cup_core_1.nothing, JsonValue_1.jvNull, false, 0),
                path: JsPath_1.JsPath.empty,
                value: (0, JsonValue_1.jvArray)([JsonValue_1.jvNull]),
                language: 'en',
                dispatch: () => { },
                rendererFactory: new Renderer_1.RendererFactory(),
                renderOptions: {},
            }));
            expect(container.querySelectorAll('.prop-expand')).toHaveLength(1);
        });
    });
    describe('with options', () => {
        test('hide menu tooltip', () => {
            const { container } = (0, react_1.render)((0, Renderer_1.MenuTrigger)({
                path: JsPath_1.JsPath.empty,
                disabled: false,
                t: () => 'no-t',
                dispatch: () => { },
                renderOptions: { hideMenuTooltip: true },
            }));
            expect(container.querySelector('button')).toHaveAttribute('style', 'overflow: hidden;');
        });
        test('hide menu document root', () => {
            const { container } = (0, react_1.render)((0, JsonEditor_1.ViewJsonEditor)({
                model: (0, Model_1.initialModel)('en', tea_cup_core_1.nothing, JsonValue_1.jvNull, false, 0),
                dispatch: () => { },
                rendererFactory: new Renderer_1.RendererFactory(),
                renderOptions: { hideDocRoot: true },
            }));
            expect(container.querySelectorAll('.doc-root')).toHaveLength(0);
        });
        test('hide menu collapsible panel in object', () => {
            const { container } = (0, react_1.render)((0, Renderer_1.ViewJsonValue)({
                model: (0, Model_1.initialModel)('en', tea_cup_core_1.nothing, JsonValue_1.jvNull, false, 0),
                path: JsPath_1.JsPath.empty,
                value: (0, JsonValue_1.jvObject)([{ name: 'foo', value: JsonValue_1.jvNull }]),
                language: 'en',
                dispatch: () => { },
                rendererFactory: new Renderer_1.RendererFactory(),
                renderOptions: { hideCollapsiblePanel: true },
            }));
            expect(container.querySelectorAll('.prop-expand')).toHaveLength(0);
        });
        test('hide menu collapsible panel in array', () => {
            const { container } = (0, react_1.render)((0, Renderer_1.ViewJsonValue)({
                model: (0, Model_1.initialModel)('en', tea_cup_core_1.nothing, JsonValue_1.jvNull, false, 0),
                path: JsPath_1.JsPath.empty,
                value: (0, JsonValue_1.jvArray)([JsonValue_1.jvNull]),
                language: 'en',
                dispatch: () => { },
                rendererFactory: new Renderer_1.RendererFactory(),
                renderOptions: { hideCollapsiblePanel: true },
            }));
            expect(container.querySelectorAll('.prop-expand')).toHaveLength(0);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVuZGVyT3B0aW9ucy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1JlbmRlck9wdGlvbnMudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7Ozs7Ozs7OztHQWNHO0FBQ0gsa0RBQWdEO0FBQ2hELHFDQUFtQztBQUNuQyxxQ0FBa0M7QUFDbEMsa0RBSTZCO0FBQzdCLDZDQUE4QztBQUM5QyxtQ0FBdUM7QUFDdkMsK0NBQXVDO0FBQ3ZDLDJDQUF3RDtBQUV4RCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO0lBQzlCLFFBQVEsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1FBQ3hCLElBQUksQ0FBQyxjQUFjLEVBQUUsR0FBRyxFQUFFO1lBQ3hCLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxJQUFBLGNBQU0sRUFDMUIsSUFBQSxzQkFBVyxFQUFDO2dCQUNWLElBQUksRUFBRSxlQUFNLENBQUMsS0FBSztnQkFDbEIsUUFBUSxFQUFFLEtBQUs7Z0JBQ2YsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU07Z0JBQ2YsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFFLENBQUM7Z0JBQ2xCLGFBQWEsRUFBRSxFQUFFO2FBQ2xCLENBQUMsQ0FDSCxDQUFDO1lBQ0YsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3pFLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtZQUM5QixNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsSUFBQSxjQUFNLEVBQzFCLElBQUEsMkJBQWMsRUFBQztnQkFDYixLQUFLLEVBQUUsSUFBQSxvQkFBWSxFQUFDLElBQUksRUFBRSxzQkFBTyxFQUFFLGtCQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztnQkFDcEQsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFFLENBQUM7Z0JBQ2xCLGVBQWUsRUFBRSxJQUFJLDBCQUFlLEVBQUU7Z0JBQ3RDLGFBQWEsRUFBRSxFQUFFO2FBQ2xCLENBQUMsQ0FDSCxDQUFDO1lBQ0YsTUFBTSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRSxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7WUFDNUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLElBQUEsY0FBTSxFQUMxQixJQUFBLHdCQUFhLEVBQUM7Z0JBQ1osS0FBSyxFQUFFLElBQUEsb0JBQVksRUFBQyxJQUFJLEVBQUUsc0JBQU8sRUFBRSxrQkFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7Z0JBQ3BELElBQUksRUFBRSxlQUFNLENBQUMsS0FBSztnQkFDbEIsS0FBSyxFQUFFLElBQUEsb0JBQVEsRUFBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsa0JBQU0sRUFBRSxDQUFDLENBQUM7Z0JBQ2pELFFBQVEsRUFBRSxJQUFJO2dCQUNkLFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO2dCQUNsQixlQUFlLEVBQUUsSUFBSSwwQkFBZSxFQUFFO2dCQUN0QyxhQUFhLEVBQUUsRUFBRTthQUNsQixDQUFDLENBQ0gsQ0FBQztZQUNGLE1BQU0sQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckUsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFO1lBQzNDLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxJQUFBLGNBQU0sRUFDMUIsSUFBQSx3QkFBYSxFQUFDO2dCQUNaLEtBQUssRUFBRSxJQUFBLG9CQUFZLEVBQUMsSUFBSSxFQUFFLHNCQUFPLEVBQUUsa0JBQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO2dCQUNwRCxJQUFJLEVBQUUsZUFBTSxDQUFDLEtBQUs7Z0JBQ2xCLEtBQUssRUFBRSxJQUFBLG1CQUFPLEVBQUMsQ0FBQyxrQkFBTSxDQUFDLENBQUM7Z0JBQ3hCLFFBQVEsRUFBRSxJQUFJO2dCQUNkLFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO2dCQUNsQixlQUFlLEVBQUUsSUFBSSwwQkFBZSxFQUFFO2dCQUN0QyxhQUFhLEVBQUUsRUFBRTthQUNsQixDQUFDLENBQ0gsQ0FBQztZQUNGLE1BQU0sQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxjQUFjLEVBQUUsR0FBRyxFQUFFO1FBQzVCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7WUFDN0IsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLElBQUEsY0FBTSxFQUMxQixJQUFBLHNCQUFXLEVBQUM7Z0JBQ1YsSUFBSSxFQUFFLGVBQU0sQ0FBQyxLQUFLO2dCQUNsQixRQUFRLEVBQUUsS0FBSztnQkFDZixDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTTtnQkFDZixRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztnQkFDbEIsYUFBYSxFQUFFLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRTthQUN6QyxDQUFDLENBQ0gsQ0FBQztZQUNGLE1BQU0sQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUN2RCxPQUFPLEVBQ1AsbUJBQW1CLENBQ3BCLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7WUFDbkMsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLElBQUEsY0FBTSxFQUMxQixJQUFBLDJCQUFjLEVBQUM7Z0JBQ2IsS0FBSyxFQUFFLElBQUEsb0JBQVksRUFBQyxJQUFJLEVBQUUsc0JBQU8sRUFBRSxrQkFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7Z0JBQ3BELFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO2dCQUNsQixlQUFlLEVBQUUsSUFBSSwwQkFBZSxFQUFFO2dCQUN0QyxhQUFhLEVBQUUsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFO2FBQ3JDLENBQUMsQ0FDSCxDQUFDO1lBQ0YsTUFBTSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRSxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7WUFDakQsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLElBQUEsY0FBTSxFQUMxQixJQUFBLHdCQUFhLEVBQUM7Z0JBQ1osS0FBSyxFQUFFLElBQUEsb0JBQVksRUFBQyxJQUFJLEVBQUUsc0JBQU8sRUFBRSxrQkFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7Z0JBQ3BELElBQUksRUFBRSxlQUFNLENBQUMsS0FBSztnQkFDbEIsS0FBSyxFQUFFLElBQUEsb0JBQVEsRUFBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsa0JBQU0sRUFBRSxDQUFDLENBQUM7Z0JBQ2pELFFBQVEsRUFBRSxJQUFJO2dCQUNkLFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO2dCQUNsQixlQUFlLEVBQUUsSUFBSSwwQkFBZSxFQUFFO2dCQUN0QyxhQUFhLEVBQUUsRUFBRSxvQkFBb0IsRUFBRSxJQUFJLEVBQUU7YUFDOUMsQ0FBQyxDQUNILENBQUM7WUFDRixNQUFNLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JFLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUNoRCxNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsSUFBQSxjQUFNLEVBQzFCLElBQUEsd0JBQWEsRUFBQztnQkFDWixLQUFLLEVBQUUsSUFBQSxvQkFBWSxFQUFDLElBQUksRUFBRSxzQkFBTyxFQUFFLGtCQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztnQkFDcEQsSUFBSSxFQUFFLGVBQU0sQ0FBQyxLQUFLO2dCQUNsQixLQUFLLEVBQUUsSUFBQSxtQkFBTyxFQUFDLENBQUMsa0JBQU0sQ0FBQyxDQUFDO2dCQUN4QixRQUFRLEVBQUUsSUFBSTtnQkFDZCxRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztnQkFDbEIsZUFBZSxFQUFFLElBQUksMEJBQWUsRUFBRTtnQkFDdEMsYUFBYSxFQUFFLEVBQUUsb0JBQW9CLEVBQUUsSUFBSSxFQUFFO2FBQzlDLENBQUMsQ0FDSCxDQUFDO1lBQ0YsTUFBTSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMTgsIDIwMjQgVGhlIERpZXNlbCBBdXRob3JzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCAnQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbSc7XG5pbXBvcnQgeyBKc1BhdGggfSBmcm9tICcuL0pzUGF0aCc7XG5pbXBvcnQge1xuICBNZW51VHJpZ2dlcixcbiAgUmVuZGVyZXJGYWN0b3J5LFxuICBWaWV3SnNvblZhbHVlLFxufSBmcm9tICcuL3JlbmRlcmVyL1JlbmRlcmVyJztcbmltcG9ydCB7IFZpZXdKc29uRWRpdG9yIH0gZnJvbSAnLi9Kc29uRWRpdG9yJztcbmltcG9ydCB7IGluaXRpYWxNb2RlbCB9IGZyb20gJy4vTW9kZWwnO1xuaW1wb3J0IHsgbm90aGluZyB9IGZyb20gJ3RlYS1jdXAtY29yZSc7XG5pbXBvcnQgeyBqdkFycmF5LCBqdk51bGwsIGp2T2JqZWN0IH0gZnJvbSAnLi9Kc29uVmFsdWUnO1xuXG5kZXNjcmliZSgnUmVuZGVyIG9wdGlvbnMnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdkZWZhdWx0cycsICgpID0+IHtcbiAgICB0ZXN0KCdtZW51IHRvb2x0aXAnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKFxuICAgICAgICBNZW51VHJpZ2dlcih7XG4gICAgICAgICAgcGF0aDogSnNQYXRoLmVtcHR5LFxuICAgICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgICB0OiAoKSA9PiAnbm8tdCcsXG4gICAgICAgICAgZGlzcGF0Y2g6ICgpID0+IHt9LFxuICAgICAgICAgIHJlbmRlck9wdGlvbnM6IHt9LFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpKS5ub3QudG9IYXZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgIH0pO1xuICAgIHRlc3QoJ21lbnUgZG9jdW1lbnQgcm9vdCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXIoXG4gICAgICAgIFZpZXdKc29uRWRpdG9yKHtcbiAgICAgICAgICBtb2RlbDogaW5pdGlhbE1vZGVsKCdlbicsIG5vdGhpbmcsIGp2TnVsbCwgZmFsc2UsIDApLFxuICAgICAgICAgIGRpc3BhdGNoOiAoKSA9PiB7fSxcbiAgICAgICAgICByZW5kZXJlckZhY3Rvcnk6IG5ldyBSZW5kZXJlckZhY3RvcnkoKSxcbiAgICAgICAgICByZW5kZXJPcHRpb25zOiB7fSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZG9jLXJvb3QnKSkudG9IYXZlTGVuZ3RoKDEpO1xuICAgIH0pO1xuICAgIHRlc3QoJ21lbnUgY29sbGFwc2libGUgcGFuZWwgaW4gb2JqZWN0JywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcihcbiAgICAgICAgVmlld0pzb25WYWx1ZSh7XG4gICAgICAgICAgbW9kZWw6IGluaXRpYWxNb2RlbCgnZW4nLCBub3RoaW5nLCBqdk51bGwsIGZhbHNlLCAwKSxcbiAgICAgICAgICBwYXRoOiBKc1BhdGguZW1wdHksXG4gICAgICAgICAgdmFsdWU6IGp2T2JqZWN0KFt7IG5hbWU6ICdmb28nLCB2YWx1ZToganZOdWxsIH1dKSxcbiAgICAgICAgICBsYW5ndWFnZTogJ2VuJyxcbiAgICAgICAgICBkaXNwYXRjaDogKCkgPT4ge30sXG4gICAgICAgICAgcmVuZGVyZXJGYWN0b3J5OiBuZXcgUmVuZGVyZXJGYWN0b3J5KCksXG4gICAgICAgICAgcmVuZGVyT3B0aW9uczoge30sXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnByb3AtZXhwYW5kJykpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICB9KTtcbiAgICB0ZXN0KCdtZW51IGNvbGxhcHNpYmxlIHBhbmVsIGluIGFycmF5JywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcihcbiAgICAgICAgVmlld0pzb25WYWx1ZSh7XG4gICAgICAgICAgbW9kZWw6IGluaXRpYWxNb2RlbCgnZW4nLCBub3RoaW5nLCBqdk51bGwsIGZhbHNlLCAwKSxcbiAgICAgICAgICBwYXRoOiBKc1BhdGguZW1wdHksXG4gICAgICAgICAgdmFsdWU6IGp2QXJyYXkoW2p2TnVsbF0pLFxuICAgICAgICAgIGxhbmd1YWdlOiAnZW4nLFxuICAgICAgICAgIGRpc3BhdGNoOiAoKSA9PiB7fSxcbiAgICAgICAgICByZW5kZXJlckZhY3Rvcnk6IG5ldyBSZW5kZXJlckZhY3RvcnkoKSxcbiAgICAgICAgICByZW5kZXJPcHRpb25zOiB7fSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucHJvcC1leHBhbmQnKSkudG9IYXZlTGVuZ3RoKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnd2l0aCBvcHRpb25zJywgKCkgPT4ge1xuICAgIHRlc3QoJ2hpZGUgbWVudSB0b29sdGlwJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcihcbiAgICAgICAgTWVudVRyaWdnZXIoe1xuICAgICAgICAgIHBhdGg6IEpzUGF0aC5lbXB0eSxcbiAgICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgICAgdDogKCkgPT4gJ25vLXQnLFxuICAgICAgICAgIGRpc3BhdGNoOiAoKSA9PiB7fSxcbiAgICAgICAgICByZW5kZXJPcHRpb25zOiB7IGhpZGVNZW51VG9vbHRpcDogdHJ1ZSB9LFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpKS50b0hhdmVBdHRyaWJ1dGUoXG4gICAgICAgICdzdHlsZScsXG4gICAgICAgICdvdmVyZmxvdzogaGlkZGVuOycsXG4gICAgICApO1xuICAgIH0pO1xuICAgIHRlc3QoJ2hpZGUgbWVudSBkb2N1bWVudCByb290JywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcihcbiAgICAgICAgVmlld0pzb25FZGl0b3Ioe1xuICAgICAgICAgIG1vZGVsOiBpbml0aWFsTW9kZWwoJ2VuJywgbm90aGluZywganZOdWxsLCBmYWxzZSwgMCksXG4gICAgICAgICAgZGlzcGF0Y2g6ICgpID0+IHt9LFxuICAgICAgICAgIHJlbmRlcmVyRmFjdG9yeTogbmV3IFJlbmRlcmVyRmFjdG9yeSgpLFxuICAgICAgICAgIHJlbmRlck9wdGlvbnM6IHsgaGlkZURvY1Jvb3Q6IHRydWUgfSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZG9jLXJvb3QnKSkudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuICAgIHRlc3QoJ2hpZGUgbWVudSBjb2xsYXBzaWJsZSBwYW5lbCBpbiBvYmplY3QnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKFxuICAgICAgICBWaWV3SnNvblZhbHVlKHtcbiAgICAgICAgICBtb2RlbDogaW5pdGlhbE1vZGVsKCdlbicsIG5vdGhpbmcsIGp2TnVsbCwgZmFsc2UsIDApLFxuICAgICAgICAgIHBhdGg6IEpzUGF0aC5lbXB0eSxcbiAgICAgICAgICB2YWx1ZToganZPYmplY3QoW3sgbmFtZTogJ2ZvbycsIHZhbHVlOiBqdk51bGwgfV0pLFxuICAgICAgICAgIGxhbmd1YWdlOiAnZW4nLFxuICAgICAgICAgIGRpc3BhdGNoOiAoKSA9PiB7fSxcbiAgICAgICAgICByZW5kZXJlckZhY3Rvcnk6IG5ldyBSZW5kZXJlckZhY3RvcnkoKSxcbiAgICAgICAgICByZW5kZXJPcHRpb25zOiB7IGhpZGVDb2xsYXBzaWJsZVBhbmVsOiB0cnVlIH0sXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnByb3AtZXhwYW5kJykpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgICB0ZXN0KCdoaWRlIG1lbnUgY29sbGFwc2libGUgcGFuZWwgaW4gYXJyYXknLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKFxuICAgICAgICBWaWV3SnNvblZhbHVlKHtcbiAgICAgICAgICBtb2RlbDogaW5pdGlhbE1vZGVsKCdlbicsIG5vdGhpbmcsIGp2TnVsbCwgZmFsc2UsIDApLFxuICAgICAgICAgIHBhdGg6IEpzUGF0aC5lbXB0eSxcbiAgICAgICAgICB2YWx1ZToganZBcnJheShbanZOdWxsXSksXG4gICAgICAgICAgbGFuZ3VhZ2U6ICdlbicsXG4gICAgICAgICAgZGlzcGF0Y2g6ICgpID0+IHt9LFxuICAgICAgICAgIHJlbmRlcmVyRmFjdG9yeTogbmV3IFJlbmRlcmVyRmFjdG9yeSgpLFxuICAgICAgICAgIHJlbmRlck9wdGlvbnM6IHsgaGlkZUNvbGxhcHNpYmxlUGFuZWw6IHRydWUgfSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucHJvcC1leHBhbmQnKSkudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19