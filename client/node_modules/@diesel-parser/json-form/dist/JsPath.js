"use strict";
/*
 * Copyright 2018 The Diesel Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.JsPath = void 0;
const tea_cup_core_1 = require("tea-cup-core");
class JsPath {
    constructor(_elems) {
        this._elems = _elems;
    }
    isEmpty() {
        return this._elems.length === 0;
    }
    get elems() {
        return this._elems;
    }
    head() {
        return (0, tea_cup_core_1.maybeOf)(this.elems[0]);
    }
    tail() {
        const newElems = this._elems.slice(1);
        return new JsPath(newElems);
    }
    format(separator = '/') {
        return this._elems.join(separator);
    }
    equals(other) {
        return this.format() === other.format();
    }
    append(elem) {
        return new JsPath(this._elems.concat([elem.toString()]));
    }
    parent() {
        if (this._elems.length === 0) {
            return tea_cup_core_1.nothing;
        }
        const parts = this._elems.slice(0, -1);
        return (0, tea_cup_core_1.just)(new JsPath(parts));
    }
    lastElem() {
        return (0, tea_cup_core_1.maybeOf)(this._elems[this._elems.length - 1]);
    }
    isParentOf(child) {
        return child.format().startsWith(this.format());
    }
    static parse(path) {
        if (path === '') {
            return JsPath.empty;
        }
        const parts = path.split('/');
        return new JsPath(parts);
    }
}
exports.JsPath = JsPath;
JsPath.empty = new JsPath([]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSnNQYXRoLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL0pzUGF0aC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7O0dBY0c7OztBQUVILCtDQUE2RDtBQUU3RCxNQUFhLE1BQU07SUFDakIsWUFBcUMsTUFBNkI7UUFBN0IsV0FBTSxHQUFOLE1BQU0sQ0FBdUI7SUFBRyxDQUFDO0lBRXRFLE9BQU87UUFDTCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxJQUFJO1FBQ0YsT0FBTyxJQUFBLHNCQUFPLEVBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxJQUFJO1FBQ0YsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsT0FBTyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRUQsTUFBTSxDQUFDLFNBQVMsR0FBRyxHQUFHO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVELE1BQU0sQ0FBQyxLQUFhO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUMxQyxDQUFDO0lBRUQsTUFBTSxDQUFDLElBQXFCO1FBQzFCLE9BQU8sSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0QsQ0FBQztJQUVELE1BQU07UUFDSixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUM1QixPQUFPLHNCQUFPLENBQUM7U0FDaEI7UUFDRCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxPQUFPLElBQUEsbUJBQUksRUFBQyxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxRQUFRO1FBQ04sT0FBTyxJQUFBLHNCQUFPLEVBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRCxVQUFVLENBQUMsS0FBYTtRQUN0QixPQUFPLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVELE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBWTtRQUN2QixJQUFJLElBQUksS0FBSyxFQUFFLEVBQUU7WUFDZixPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUM7U0FDckI7UUFDRCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzlCLE9BQU8sSUFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDM0IsQ0FBQzs7QUF0REgsd0JBeURDO0FBRFEsWUFBSyxHQUFXLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBEaWVzZWwgQXV0aG9yc1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBqdXN0LCBNYXliZSwgbWF5YmVPZiwgbm90aGluZyB9IGZyb20gJ3RlYS1jdXAtY29yZSc7XG5cbmV4cG9ydCBjbGFzcyBKc1BhdGgge1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgX2VsZW1zOiBSZWFkb25seUFycmF5PHN0cmluZz4pIHt9XG5cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZWxlbXMubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgZ2V0IGVsZW1zKCk6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1zO1xuICB9XG5cbiAgaGVhZCgpOiBNYXliZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbWF5YmVPZih0aGlzLmVsZW1zWzBdKTtcbiAgfVxuXG4gIHRhaWwoKTogSnNQYXRoIHtcbiAgICBjb25zdCBuZXdFbGVtcyA9IHRoaXMuX2VsZW1zLnNsaWNlKDEpO1xuICAgIHJldHVybiBuZXcgSnNQYXRoKG5ld0VsZW1zKTtcbiAgfVxuXG4gIGZvcm1hdChzZXBhcmF0b3IgPSAnLycpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9lbGVtcy5qb2luKHNlcGFyYXRvcik7XG4gIH1cblxuICBlcXVhbHMob3RoZXI6IEpzUGF0aCkge1xuICAgIHJldHVybiB0aGlzLmZvcm1hdCgpID09PSBvdGhlci5mb3JtYXQoKTtcbiAgfVxuXG4gIGFwcGVuZChlbGVtOiBzdHJpbmcgfCBudW1iZXIpOiBKc1BhdGgge1xuICAgIHJldHVybiBuZXcgSnNQYXRoKHRoaXMuX2VsZW1zLmNvbmNhdChbZWxlbS50b1N0cmluZygpXSkpO1xuICB9XG5cbiAgcGFyZW50KCk6IE1heWJlPEpzUGF0aD4ge1xuICAgIGlmICh0aGlzLl9lbGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBub3RoaW5nO1xuICAgIH1cbiAgICBjb25zdCBwYXJ0cyA9IHRoaXMuX2VsZW1zLnNsaWNlKDAsIC0xKTtcbiAgICByZXR1cm4ganVzdChuZXcgSnNQYXRoKHBhcnRzKSk7XG4gIH1cblxuICBsYXN0RWxlbSgpOiBNYXliZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbWF5YmVPZih0aGlzLl9lbGVtc1t0aGlzLl9lbGVtcy5sZW5ndGggLSAxXSk7XG4gIH1cblxuICBpc1BhcmVudE9mKGNoaWxkOiBKc1BhdGgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gY2hpbGQuZm9ybWF0KCkuc3RhcnRzV2l0aCh0aGlzLmZvcm1hdCgpKTtcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZShwYXRoOiBzdHJpbmcpIHtcbiAgICBpZiAocGF0aCA9PT0gJycpIHtcbiAgICAgIHJldHVybiBKc1BhdGguZW1wdHk7XG4gICAgfVxuICAgIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLycpO1xuICAgIHJldHVybiBuZXcgSnNQYXRoKHBhcnRzKTtcbiAgfVxuXG4gIHN0YXRpYyBlbXB0eTogSnNQYXRoID0gbmV3IEpzUGF0aChbXSk7XG59XG4iXX0=